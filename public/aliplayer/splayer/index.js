/*! splayer - ver0.7.4 created:2024/2/6 15:52:55 */(()=>{var e={725:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(645),o=r.n(n)()((function(e){return e[1]}));o.push([e.id,".videox-icon {\n  display: inline-block;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  font-size: 14px;\n}\n.videox-icon > svg {\n  fill: white;\n}\n",""]);const i=o},212:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(645),o=r.n(n)()((function(e){return e[1]}));o.push([e.id,"",""]);const i=o},669:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(645),o=r.n(n)()((function(e){return e[1]}));o.push([e.id,".videox-popover {\n  position: relative;\n  cursor: pointer;\n}\n.videox-popover-content {\n  position: absolute;\n  top: -20px;\n  left: 50%;\n  white-space: nowrap;\n  background-color: rgba(0, 0, 0, 0.25);\n  z-index: 99;\n  transform: translate(-50%, -100%);\n  padding: 6px;\n  border-radius: 4px;\n}\n",""]);const i=o},100:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(645),o=r.n(n)()((function(e){return e[1]}));o.push([e.id,".videox-slider {\n  padding: 0 4px;\n}\n.videox-slider-inner {\n  display: flex;\n  position: relative;\n  cursor: pointer;\n  height: 10px;\n}\n.videox-slider-track {\n  display: flex;\n  margin-top: 3px;\n  width: 100%;\n  height: 4px;\n  border-radius: 8px;\n  overflow: hidden;\n  background-color: rgba(120, 120, 120, 0.5);\n}\n.videox-slider-track-fill {\n  width: 0;\n  height: 100%;\n  background-color: red;\n  z-index: 10;\n}\n.videox-slider-thumb {\n  position: absolute;\n  top: 0;\n  left: 0;\n  margin-left: -5px;\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  background-color: red;\n  box-shadow: 0 -1px 2px black;\n}\n.videox-slider-disabled {\n  cursor: not-allowed;\n}\n.videox-slider-disabled .videox-slider-inner {\n  cursor: not-allowed;\n}\n.videox-slider-vertical.videox-slider {\n  padding: 4px 0;\n  height: 100%;\n}\n.videox-slider-vertical .videox-slider-inner {\n  width: 10px;\n  height: 100%;\n}\n.videox-slider-vertical .videox-slider-track {\n  align-items: flex-end;\n  height: 100%;\n  width: 4px;\n  margin-top: 0;\n  margin-left: 3px;\n}\n.videox-slider-vertical .videox-slider-track-fill {\n  height: 0;\n  width: 100%;\n}\n.videox-slider-vertical .videox-slider-thumb {\n  top: auto;\n  margin-left: 0;\n  margin-bottom: -5px;\n}\n",""]);const i=o},683:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(645),o=r.n(n)()((function(e){return e[1]}));o.push([e.id,".videox-control {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n  transition: opacity 0.5s ease-out;\n  z-index: 100000 !important;\n}\n.videox-control.videox-playing {\n  opacity: 0;\n}\n.videox-control.videox-playing:hover {\n  opacity: 1;\n}\n.videox-volume-content {\n  height: 100px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n}\n.videox-volume-number {\n  padding-bottom: 5px;\n  font-family: Arial, Helvetica, sans-serif;\n  color: #ddd;\n  font-size: 12px;\n}\n.videox-matte {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n}\n.videox-matte-icon-btn {\n  cursor: pointer;\n  width: 80px;\n  height: 80px;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  background-color: rgba(0, 0, 0, 0.25);\n}\n.videox-matte-icon-btn .videox-icon {\n  font-size: 36px;\n}\n.videox-icon-reload {\n  cursor: pointer;\n  font-size: 28px !important;\n  padding: 20px;\n}\n.videox-icon-play {\n  padding: 0 10px;\n}\n.videox-icon-loading {\n  font-size: 64px !important;\n  animation: loading-rotate linear 1s infinite;\n}\n.videox-icon-loading > svg {\n  fill: #ddd !important;\n}\n.videox-error {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  font-family: tahoma, arial, 'Hiragino Sans GB', '\\5b8b\\4f53', sans-serif;\n  background-color: rgba(0, 0, 0, 0.9);\n  width: 100%;\n  height: 100%;\n}\n.videox-debugger {\n  position: absolute;\n  color: white;\n  left: 0;\n  top: 0;\n  font-size: 12px;\n  padding: 10px;\n  line-height: 1.75;\n  background-color: rgba(0, 0, 0, 0.25);\n}\n.videox-contextmenu {\n  position: absolute;\n  background: rgba(28, 28, 28, 0.9);\n  text-shadow: 0 0 2px rgba(0, 0, 0, 0.5);\n  padding: 8px 18px;\n  border-radius: 2px;\n  font-size: 14px;\n}\n.videox-contextmenu-bg {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n@keyframes loading-rotate {\n  from {\n    transform: rotate(0);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n",""]);const i=o},992:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(645),o=r.n(n)()((function(e){return e[1]}));o.push([e.id,".videox-progress {\n  position: absolute !important;\n  top: -4px;\n  left: 0;\n  width: 100%;\n}\n.videox-progress-container {\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  padding: 10px 15px 10px 0px;\n  font-size: 12px;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  background-color: rgba(0, 0, 0, 0.5);\n}\n.videox-progress-container .videox-icon {\n  cursor: pointer;\n}\n.videox-progress-container .videox-btn + .videox-btn {\n  margin-left: 10px;\n}\n.videox-progress-buffered {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n.videox-progress-buffered-item {\n  position: absolute;\n  top: 0;\n  height: 4px;\n  background-color: gray;\n}\n.videox-progress-placeholder {\n  height: 4px;\n  background-color: red;\n}\n.videox-time {\n  flex: 1;\n  text-align: left;\n  color: #bbb;\n  font-size: 12px;\n  font-family: Arial;\n}\n",""]);const i=o},849:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(645),o=r.n(n)()((function(e){return e[1]}));o.push([e.id,".videox-container {\n  position: relative;\n  left: 0;\n  top: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: #000;\n  overflow: hidden;\n  z-index: 100000 !important;\n}\n.videox-container * {\n  -webkit-tap-highlight-color: transparent;\n  user-select: none;\n  box-sizing: border-box;\n}\n",""]);const i=o},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=e(t);return t[2]?"@media ".concat(t[2]," {").concat(r,"}"):r})).join("")},t.i=function(e,r,n){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(n)for(var i=0;i<this.length;i++){var a=this[i][0];null!=a&&(o[a]=!0)}for(var s=0;s<e.length;s++){var u=[].concat(e[s]);n&&o[u[0]]||(r&&(u[2]?u[2]="".concat(r," and ").concat(u[2]):u[2]=r),t.push(u))}},t}},729:e=>{"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function o(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function i(e,t,n,i,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new o(n,i||e,a),u=r?r+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function s(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),s.prototype.eventNames=function(){var e,n,o=[];if(0===this._eventsCount)return o;for(n in e=this._events)t.call(e,n)&&o.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},s.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var o=0,i=n.length,a=new Array(i);o<i;o++)a[o]=n[o].fn;return a},s.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},s.prototype.emit=function(e,t,n,o,i,a){var s=r?r+e:e;if(!this._events[s])return!1;var u,c,l=this._events[s],p=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),p){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,o),!0;case 5:return l.fn.call(l.context,t,n,o,i),!0;case 6:return l.fn.call(l.context,t,n,o,i,a),!0}for(c=1,u=new Array(p-1);c<p;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var f,d=l.length;for(c=0;c<d;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),p){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,n);break;case 4:l[c].fn.call(l[c].context,t,n,o);break;default:if(!u)for(f=1,u=new Array(p-1);f<p;f++)u[f-1]=arguments[f];l[c].fn.apply(l[c].context,u)}}return!0},s.prototype.on=function(e,t,r){return i(this,e,t,r,!1)},s.prototype.once=function(e,t,r){return i(this,e,t,r,!0)},s.prototype.removeListener=function(e,t,n,o){var i=r?r+e:e;if(!this._events[i])return this;if(!t)return a(this,i),this;var s=this._events[i];if(s.fn)s.fn!==t||o&&!s.once||n&&s.context!==n||a(this,i);else{for(var u=0,c=[],l=s.length;u<l;u++)(s[u].fn!==t||o&&!s[u].once||n&&s[u].context!==n)&&c.push(s[u]);c.length?this._events[i]=1===c.length?c[0]:c:a(this,i)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&a(this,t)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s},307:(e,t,r)=>{e=r.nmd(e);var n="__lodash_hash_undefined__",o=1,i=2,a=9007199254740991,s="[object Arguments]",u="[object Array]",c="[object AsyncFunction]",l="[object Boolean]",p="[object Date]",f="[object Error]",d="[object Function]",h="[object GeneratorFunction]",v="[object Map]",y="[object Number]",_="[object Null]",m="[object Object]",g="[object Promise]",b="[object Proxy]",E="[object RegExp]",T="[object Set]",w="[object String]",S="[object Symbol]",O="[object Undefined]",A="[object WeakMap]",P="[object ArrayBuffer]",R="[object DataView]",x=/^\[object .+?Constructor\]$/,C=/^(?:0|[1-9]\d*)$/,N={};N["[object Float32Array]"]=N["[object Float64Array]"]=N["[object Int8Array]"]=N["[object Int16Array]"]=N["[object Int32Array]"]=N["[object Uint8Array]"]=N["[object Uint8ClampedArray]"]=N["[object Uint16Array]"]=N["[object Uint32Array]"]=!0,N[s]=N[u]=N[P]=N[l]=N[R]=N[p]=N[f]=N[d]=N[v]=N[y]=N[m]=N[E]=N[T]=N[w]=N[A]=!1;var L="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,D="object"==typeof self&&self&&self.Object===Object&&self,k=L||D||Function("return this")(),I=t&&!t.nodeType&&t,U=I&&e&&!e.nodeType&&e,M=U&&U.exports===I,j=M&&L.process,F=function(){try{return j&&j.binding&&j.binding("util")}catch(e){}}(),V=F&&F.isTypedArray;function B(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function W(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function G(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var H,z,X,Y=Array.prototype,q=Function.prototype,K=Object.prototype,Z=k["__core-js_shared__"],$=q.toString,Q=K.hasOwnProperty,J=(H=/[^.]+$/.exec(Z&&Z.keys&&Z.keys.IE_PROTO||""))?"Symbol(src)_1."+H:"",ee=K.toString,te=RegExp("^"+$.call(Q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),re=M?k.Buffer:void 0,ne=k.Symbol,oe=k.Uint8Array,ie=K.propertyIsEnumerable,ae=Y.splice,se=ne?ne.toStringTag:void 0,ue=Object.getOwnPropertySymbols,ce=re?re.isBuffer:void 0,le=(z=Object.keys,X=Object,function(e){return z(X(e))}),pe=Fe(k,"DataView"),fe=Fe(k,"Map"),de=Fe(k,"Promise"),he=Fe(k,"Set"),ve=Fe(k,"WeakMap"),ye=Fe(Object,"create"),_e=Ge(pe),me=Ge(fe),ge=Ge(de),be=Ge(he),Ee=Ge(ve),Te=ne?ne.prototype:void 0,we=Te?Te.valueOf:void 0;function Se(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Oe(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Ae(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Pe(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Ae;++t<r;)this.add(e[t])}function Re(e){var t=this.__data__=new Oe(e);this.size=t.size}function xe(e,t){var r=Xe(e),n=!r&&ze(e),o=!r&&!n&&Ye(e),i=!r&&!n&&!o&&Qe(e),a=r||n||o||i,s=a?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],u=s.length;for(var c in e)!t&&!Q.call(e,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||We(c,u))||s.push(c);return s}function Ce(e,t){for(var r=e.length;r--;)if(He(e[r][0],t))return r;return-1}function Ne(e){return null==e?void 0===e?O:_:se&&se in Object(e)?function(e){var t=Q.call(e,se),r=e[se];try{e[se]=void 0;var n=!0}catch(e){}var o=ee.call(e);n&&(t?e[se]=r:delete e[se]);return o}(e):function(e){return ee.call(e)}(e)}function Le(e){return $e(e)&&Ne(e)==s}function De(e,t,r,n,a){return e===t||(null==e||null==t||!$e(e)&&!$e(t)?e!=e&&t!=t:function(e,t,r,n,a,c){var d=Xe(e),h=Xe(t),_=d?u:Be(e),g=h?u:Be(t),b=(_=_==s?m:_)==m,O=(g=g==s?m:g)==m,A=_==g;if(A&&Ye(e)){if(!Ye(t))return!1;d=!0,b=!1}if(A&&!b)return c||(c=new Re),d||Qe(e)?Ue(e,t,r,n,a,c):function(e,t,r,n,a,s,u){switch(r){case R:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case P:return!(e.byteLength!=t.byteLength||!s(new oe(e),new oe(t)));case l:case p:case y:return He(+e,+t);case f:return e.name==t.name&&e.message==t.message;case E:case w:return e==t+"";case v:var c=W;case T:var d=n&o;if(c||(c=G),e.size!=t.size&&!d)return!1;var h=u.get(e);if(h)return h==t;n|=i,u.set(e,t);var _=Ue(c(e),c(t),n,a,s,u);return u.delete(e),_;case S:if(we)return we.call(e)==we.call(t)}return!1}(e,t,_,r,n,a,c);if(!(r&o)){var x=b&&Q.call(e,"__wrapped__"),C=O&&Q.call(t,"__wrapped__");if(x||C){var N=x?e.value():e,L=C?t.value():t;return c||(c=new Re),a(N,L,r,n,c)}}if(!A)return!1;return c||(c=new Re),function(e,t,r,n,i,a){var s=r&o,u=Me(e),c=u.length,l=Me(t),p=l.length;if(c!=p&&!s)return!1;var f=c;for(;f--;){var d=u[f];if(!(s?d in t:Q.call(t,d)))return!1}var h=a.get(e);if(h&&a.get(t))return h==t;var v=!0;a.set(e,t),a.set(t,e);var y=s;for(;++f<c;){var _=e[d=u[f]],m=t[d];if(n)var g=s?n(m,_,d,t,e,a):n(_,m,d,e,t,a);if(!(void 0===g?_===m||i(_,m,r,n,a):g)){v=!1;break}y||(y="constructor"==d)}if(v&&!y){var b=e.constructor,E=t.constructor;b==E||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof E&&E instanceof E||(v=!1)}return a.delete(e),a.delete(t),v}(e,t,r,n,a,c)}(e,t,r,n,De,a))}function ke(e){return!(!Ze(e)||function(e){return!!J&&J in e}(e))&&(qe(e)?te:x).test(Ge(e))}function Ie(e){if(r=(t=e)&&t.constructor,n="function"==typeof r&&r.prototype||K,t!==n)return le(e);var t,r,n,o=[];for(var i in Object(e))Q.call(e,i)&&"constructor"!=i&&o.push(i);return o}function Ue(e,t,r,n,a,s){var u=r&o,c=e.length,l=t.length;if(c!=l&&!(u&&l>c))return!1;var p=s.get(e);if(p&&s.get(t))return p==t;var f=-1,d=!0,h=r&i?new Pe:void 0;for(s.set(e,t),s.set(t,e);++f<c;){var v=e[f],y=t[f];if(n)var _=u?n(y,v,f,t,e,s):n(v,y,f,e,t,s);if(void 0!==_){if(_)continue;d=!1;break}if(h){if(!B(t,(function(e,t){if(o=t,!h.has(o)&&(v===e||a(v,e,r,n,s)))return h.push(t);var o}))){d=!1;break}}else if(v!==y&&!a(v,y,r,n,s)){d=!1;break}}return s.delete(e),s.delete(t),d}function Me(e){return function(e,t,r){var n=t(e);return Xe(e)?n:function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}(n,r(e))}(e,Je,Ve)}function je(e,t){var r,n,o=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof t?"string":"hash"]:o.map}function Fe(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return ke(r)?r:void 0}Se.prototype.clear=function(){this.__data__=ye?ye(null):{},this.size=0},Se.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Se.prototype.get=function(e){var t=this.__data__;if(ye){var r=t[e];return r===n?void 0:r}return Q.call(t,e)?t[e]:void 0},Se.prototype.has=function(e){var t=this.__data__;return ye?void 0!==t[e]:Q.call(t,e)},Se.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=ye&&void 0===t?n:t,this},Oe.prototype.clear=function(){this.__data__=[],this.size=0},Oe.prototype.delete=function(e){var t=this.__data__,r=Ce(t,e);return!(r<0)&&(r==t.length-1?t.pop():ae.call(t,r,1),--this.size,!0)},Oe.prototype.get=function(e){var t=this.__data__,r=Ce(t,e);return r<0?void 0:t[r][1]},Oe.prototype.has=function(e){return Ce(this.__data__,e)>-1},Oe.prototype.set=function(e,t){var r=this.__data__,n=Ce(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},Ae.prototype.clear=function(){this.size=0,this.__data__={hash:new Se,map:new(fe||Oe),string:new Se}},Ae.prototype.delete=function(e){var t=je(this,e).delete(e);return this.size-=t?1:0,t},Ae.prototype.get=function(e){return je(this,e).get(e)},Ae.prototype.has=function(e){return je(this,e).has(e)},Ae.prototype.set=function(e,t){var r=je(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},Pe.prototype.add=Pe.prototype.push=function(e){return this.__data__.set(e,n),this},Pe.prototype.has=function(e){return this.__data__.has(e)},Re.prototype.clear=function(){this.__data__=new Oe,this.size=0},Re.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Re.prototype.get=function(e){return this.__data__.get(e)},Re.prototype.has=function(e){return this.__data__.has(e)},Re.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Oe){var n=r.__data__;if(!fe||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Ae(n)}return r.set(e,t),this.size=r.size,this};var Ve=ue?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var r=-1,n=null==e?0:e.length,o=0,i=[];++r<n;){var a=e[r];t(a,r,e)&&(i[o++]=a)}return i}(ue(e),(function(t){return ie.call(e,t)})))}:function(){return[]},Be=Ne;function We(e,t){return!!(t=null==t?a:t)&&("number"==typeof e||C.test(e))&&e>-1&&e%1==0&&e<t}function Ge(e){if(null!=e){try{return $.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function He(e,t){return e===t||e!=e&&t!=t}(pe&&Be(new pe(new ArrayBuffer(1)))!=R||fe&&Be(new fe)!=v||de&&Be(de.resolve())!=g||he&&Be(new he)!=T||ve&&Be(new ve)!=A)&&(Be=function(e){var t=Ne(e),r=t==m?e.constructor:void 0,n=r?Ge(r):"";if(n)switch(n){case _e:return R;case me:return v;case ge:return g;case be:return T;case Ee:return A}return t});var ze=Le(function(){return arguments}())?Le:function(e){return $e(e)&&Q.call(e,"callee")&&!ie.call(e,"callee")},Xe=Array.isArray;var Ye=ce||function(){return!1};function qe(e){if(!Ze(e))return!1;var t=Ne(e);return t==d||t==h||t==c||t==b}function Ke(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a}function Ze(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function $e(e){return null!=e&&"object"==typeof e}var Qe=V?function(e){return function(t){return e(t)}}(V):function(e){return $e(e)&&Ke(e.length)&&!!N[Ne(e)]};function Je(e){return null!=(t=e)&&Ke(t.length)&&!qe(t)?xe(e):Ie(e);var t}e.exports=function(e,t){return De(e,t)}},801:e=>{e.exports=function(e){return void 0===e}},378:(e,t,r)=>{e=r.nmd(e);var n="__lodash_hash_undefined__",o=9007199254740991,i="[object Arguments]",a="[object AsyncFunction]",s="[object Function]",u="[object GeneratorFunction]",c="[object Null]",l="[object Object]",p="[object Proxy]",f="[object Undefined]",d=/^\[object .+?Constructor\]$/,h=/^(?:0|[1-9]\d*)$/,v={};v["[object Float32Array]"]=v["[object Float64Array]"]=v["[object Int8Array]"]=v["[object Int16Array]"]=v["[object Int32Array]"]=v["[object Uint8Array]"]=v["[object Uint8ClampedArray]"]=v["[object Uint16Array]"]=v["[object Uint32Array]"]=!0,v[i]=v["[object Array]"]=v["[object ArrayBuffer]"]=v["[object Boolean]"]=v["[object DataView]"]=v["[object Date]"]=v["[object Error]"]=v[s]=v["[object Map]"]=v["[object Number]"]=v[l]=v["[object RegExp]"]=v["[object Set]"]=v["[object String]"]=v["[object WeakMap]"]=!1;var y="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,_="object"==typeof self&&self&&self.Object===Object&&self,m=y||_||Function("return this")(),g=t&&!t.nodeType&&t,b=g&&e&&!e.nodeType&&e,E=b&&b.exports===g,T=E&&y.process,w=function(){try{var e=b&&b.require&&b.require("util").types;return e||T&&T.binding&&T.binding("util")}catch(e){}}(),S=w&&w.isTypedArray;var O,A,P,R=Array.prototype,x=Function.prototype,C=Object.prototype,N=m["__core-js_shared__"],L=x.toString,D=C.hasOwnProperty,k=(O=/[^.]+$/.exec(N&&N.keys&&N.keys.IE_PROTO||""))?"Symbol(src)_1."+O:"",I=C.toString,U=L.call(Object),M=RegExp("^"+L.call(D).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),j=E?m.Buffer:void 0,F=m.Symbol,V=m.Uint8Array,B=j?j.allocUnsafe:void 0,W=(A=Object.getPrototypeOf,P=Object,function(e){return A(P(e))}),G=Object.create,H=C.propertyIsEnumerable,z=R.splice,X=F?F.toStringTag:void 0,Y=function(){try{var e=ge(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),q=j?j.isBuffer:void 0,K=Math.max,Z=Date.now,$=ge(m,"Map"),Q=ge(Object,"create"),J=function(){function e(){}return function(t){if(!Ne(t))return{};if(G)return G(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function ee(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function te(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function re(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ne(e){var t=this.__data__=new te(e);this.size=t.size}function oe(e,t){var r=Ae(e),n=!r&&Oe(e),o=!r&&!n&&Re(e),i=!r&&!n&&!o&&De(e),a=r||n||o||i,s=a?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],u=s.length;for(var c in e)!t&&!D.call(e,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||be(c,u))||s.push(c);return s}function ie(e,t,r){(void 0!==r&&!Se(e[t],r)||void 0===r&&!(t in e))&&ue(e,t,r)}function ae(e,t,r){var n=e[t];D.call(e,t)&&Se(n,r)&&(void 0!==r||t in e)||ue(e,t,r)}function se(e,t){for(var r=e.length;r--;)if(Se(e[r][0],t))return r;return-1}function ue(e,t,r){"__proto__"==t&&Y?Y(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}ee.prototype.clear=function(){this.__data__=Q?Q(null):{},this.size=0},ee.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ee.prototype.get=function(e){var t=this.__data__;if(Q){var r=t[e];return r===n?void 0:r}return D.call(t,e)?t[e]:void 0},ee.prototype.has=function(e){var t=this.__data__;return Q?void 0!==t[e]:D.call(t,e)},ee.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Q&&void 0===t?n:t,this},te.prototype.clear=function(){this.__data__=[],this.size=0},te.prototype.delete=function(e){var t=this.__data__,r=se(t,e);return!(r<0)&&(r==t.length-1?t.pop():z.call(t,r,1),--this.size,!0)},te.prototype.get=function(e){var t=this.__data__,r=se(t,e);return r<0?void 0:t[r][1]},te.prototype.has=function(e){return se(this.__data__,e)>-1},te.prototype.set=function(e,t){var r=this.__data__,n=se(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},re.prototype.clear=function(){this.size=0,this.__data__={hash:new ee,map:new($||te),string:new ee}},re.prototype.delete=function(e){var t=me(this,e).delete(e);return this.size-=t?1:0,t},re.prototype.get=function(e){return me(this,e).get(e)},re.prototype.has=function(e){return me(this,e).has(e)},re.prototype.set=function(e,t){var r=me(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},ne.prototype.clear=function(){this.__data__=new te,this.size=0},ne.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},ne.prototype.get=function(e){return this.__data__.get(e)},ne.prototype.has=function(e){return this.__data__.has(e)},ne.prototype.set=function(e,t){var r=this.__data__;if(r instanceof te){var n=r.__data__;if(!$||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new re(n)}return r.set(e,t),this.size=r.size,this};var ce,le=function(e,t,r){for(var n=-1,o=Object(e),i=r(e),a=i.length;a--;){var s=i[ce?a:++n];if(!1===t(o[s],s,o))break}return e};function pe(e){return null==e?void 0===e?f:c:X&&X in Object(e)?function(e){var t=D.call(e,X),r=e[X];try{e[X]=void 0;var n=!0}catch(e){}var o=I.call(e);n&&(t?e[X]=r:delete e[X]);return o}(e):function(e){return I.call(e)}(e)}function fe(e){return Le(e)&&pe(e)==i}function de(e){return!(!Ne(e)||function(e){return!!k&&k in e}(e))&&(xe(e)?M:d).test(function(e){if(null!=e){try{return L.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}function he(e){if(!Ne(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=Ee(e),r=[];for(var n in e)("constructor"!=n||!t&&D.call(e,n))&&r.push(n);return r}function ve(e,t,r,n,o){e!==t&&le(t,(function(i,a){if(o||(o=new ne),Ne(i))!function(e,t,r,n,o,i,a){var s=Te(e,r),u=Te(t,r),c=a.get(u);if(c)return void ie(e,r,c);var p=i?i(s,u,r+"",e,t,a):void 0,f=void 0===p;if(f){var d=Ae(u),h=!d&&Re(u),v=!d&&!h&&De(u);p=u,d||h||v?Ae(s)?p=s:Le(b=s)&&Pe(b)?p=function(e,t){var r=-1,n=e.length;t||(t=Array(n));for(;++r<n;)t[r]=e[r];return t}(s):h?(f=!1,p=function(e,t){if(t)return e.slice();var r=e.length,n=B?B(r):new e.constructor(r);return e.copy(n),n}(u,!0)):v?(f=!1,y=u,_=!0?(m=y.buffer,g=new m.constructor(m.byteLength),new V(g).set(new V(m)),g):y.buffer,p=new y.constructor(_,y.byteOffset,y.length)):p=[]:function(e){if(!Le(e)||pe(e)!=l)return!1;var t=W(e);if(null===t)return!0;var r=D.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&L.call(r)==U}(u)||Oe(u)?(p=s,Oe(s)?p=function(e){return function(e,t,r,n){var o=!r;r||(r={});var i=-1,a=t.length;for(;++i<a;){var s=t[i],u=n?n(r[s],e[s],s,r,e):void 0;void 0===u&&(u=e[s]),o?ue(r,s,u):ae(r,s,u)}return r}(e,ke(e))}(s):Ne(s)&&!xe(s)||(p=function(e){return"function"!=typeof e.constructor||Ee(e)?{}:J(W(e))}(u))):f=!1}var y,_,m,g;var b;f&&(a.set(u,p),o(p,u,n,i,a),a.delete(u));ie(e,r,p)}(e,t,a,r,ve,n,o);else{var s=n?n(Te(e,a),i,a+"",e,t,o):void 0;void 0===s&&(s=i),ie(e,a,s)}}),ke)}function ye(e,t){return we(function(e,t,r){return t=K(void 0===t?e.length-1:t,0),function(){for(var n=arguments,o=-1,i=K(n.length-t,0),a=Array(i);++o<i;)a[o]=n[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=n[o];return s[t]=r(a),function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(e,this,s)}}(e,t,Me),e+"")}var _e=Y?function(e,t){return Y(e,"toString",{configurable:!0,enumerable:!1,value:(r=t,function(){return r}),writable:!0});var r}:Me;function me(e,t){var r,n,o=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof t?"string":"hash"]:o.map}function ge(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return de(r)?r:void 0}function be(e,t){var r=typeof e;return!!(t=null==t?o:t)&&("number"==r||"symbol"!=r&&h.test(e))&&e>-1&&e%1==0&&e<t}function Ee(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||C)}function Te(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var we=function(e){var t=0,r=0;return function(){var n=Z(),o=16-(n-r);if(r=n,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(_e);function Se(e,t){return e===t||e!=e&&t!=t}var Oe=fe(function(){return arguments}())?fe:function(e){return Le(e)&&D.call(e,"callee")&&!H.call(e,"callee")},Ae=Array.isArray;function Pe(e){return null!=e&&Ce(e.length)&&!xe(e)}var Re=q||function(){return!1};function xe(e){if(!Ne(e))return!1;var t=pe(e);return t==s||t==u||t==a||t==p}function Ce(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}function Ne(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Le(e){return null!=e&&"object"==typeof e}var De=S?function(e){return function(t){return e(t)}}(S):function(e){return Le(e)&&Ce(e.length)&&!!v[pe(e)]};function ke(e){return Pe(e)?oe(e,!0):he(e)}var Ie,Ue=(Ie=function(e,t,r){ve(e,t,r)},ye((function(e,t){var r=-1,n=t.length,o=n>1?t[n-1]:void 0,i=n>2?t[2]:void 0;for(o=Ie.length>3&&"function"==typeof o?(n--,o):void 0,i&&function(e,t,r){if(!Ne(r))return!1;var n=typeof t;return!!("number"==n?Pe(r)&&be(t,r.length):"string"==n&&t in r)&&Se(r[t],e)}(t[0],t[1],i)&&(o=n<3?void 0:o,n=1),e=Object(e);++r<n;){var a=t[r];a&&Ie(e,a,r,o)}return e})));function Me(e){return e}e.exports=Ue},96:(e,t,r)=>{var n="Expected a function",o=NaN,i="[object Symbol]",a=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt,p="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,f="object"==typeof self&&self&&self.Object===Object&&self,d=p||f||Function("return this")(),h=Object.prototype.toString,v=Math.max,y=Math.min,_=function(){return d.Date.now()};function m(e,t,r){var o,i,a,s,u,c,l=0,p=!1,f=!1,d=!0;if("function"!=typeof e)throw new TypeError(n);function h(t){var r=o,n=i;return o=i=void 0,l=t,s=e.apply(n,r)}function m(e){var r=e-c;return void 0===c||r>=t||r<0||f&&e-l>=a}function E(){var e=_();if(m(e))return T(e);u=setTimeout(E,function(e){var r=t-(e-c);return f?y(r,a-(e-l)):r}(e))}function T(e){return u=void 0,d&&o?h(e):(o=i=void 0,s)}function w(){var e=_(),r=m(e);if(o=arguments,i=this,c=e,r){if(void 0===u)return function(e){return l=e,u=setTimeout(E,t),p?h(e):s}(c);if(f)return u=setTimeout(E,t),h(c)}return void 0===u&&(u=setTimeout(E,t)),s}return t=b(t)||0,g(r)&&(p=!!r.leading,a=(f="maxWait"in r)?v(b(r.maxWait)||0,t):a,d="trailing"in r?!!r.trailing:d),w.cancel=function(){void 0!==u&&clearTimeout(u),l=0,o=c=i=u=void 0},w.flush=function(){return void 0===u?s:T(_())},w}function g(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function b(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&h.call(e)==i}(e))return o;if(g(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=g(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var r=u.test(e);return r||c.test(e)?l(e.slice(2),r?2:8):s.test(e)?o:+e}e.exports=function(e,t,r){var o=!0,i=!0;if("function"!=typeof e)throw new TypeError(n);return g(r)&&(o="leading"in r?!!r.leading:o,i="trailing"in r?!!r.trailing:i),m(e,t,{leading:o,maxWait:t,trailing:i})}},775:e=>{var t=Object.prototype.hasOwnProperty;function r(e){return"[Throws: "+(e?e.message:"?")+"]"}function n(e){var n=[];return function e(o){if(null===o||"object"!=typeof o)return o;if(-1!==n.indexOf(o))return"[Circular]";if(n.push(o),"function"==typeof o.toJSON)try{var i=e(o.toJSON());return n.pop(),i}catch(e){return r(e)}if(Array.isArray(o)){var a=o.map(e);return n.pop(),a}var s=Object.keys(o).reduce((function(n,i){return n[i]=e(function(e,n){if(t.call(e,n))try{return e[n]}catch(e){return r(e)}return e[n]}(o,i)),n}),{});return n.pop(),s}(e)}e.exports=function(e,t,r){return JSON.stringify(n(e),t,r)},e.exports.ensureProperties=n},379:e=>{"use strict";var t=[];function r(e){for(var r=-1,n=0;n<t.length;n++)if(t[n].identifier===e){r=n;break}return r}function n(e,n){for(var i={},a=[],s=0;s<e.length;s++){var u=e[s],c=n.base?u[0]+n.base:u[0],l=i[c]||0,p="".concat(c," ").concat(l);i[c]=l+1;var f=r(p),d={css:u[1],media:u[2],sourceMap:u[3],supports:u[4],layer:u[5]};if(-1!==f)t[f].references++,t[f].updater(d);else{var h=o(d,n);n.byIndex=s,t.splice(s,0,{identifier:p,updater:h,references:1})}a.push(p)}return a}function o(e,t){var r=t.domAPI(t);r.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;r.update(e=t)}else r.remove()}}e.exports=function(e,o){var i=n(e=e||[],o=o||{});return function(e){e=e||[];for(var a=0;a<i.length;a++){var s=r(i[a]);t[s].references--}for(var u=n(e,o),c=0;c<i.length;c++){var l=r(i[c]);0===t[l].references&&(t[l].updater(),t.splice(l,1))}i=u}}},569:e=>{"use strict";var t={};e.exports=function(e,r){var n=function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(r)}},216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,r)=>{"use strict";e.exports=function(e){var t=r.nc;t&&e.setAttribute("nonce",t)}},37:e=>{"use strict";var t,r=(t=[],function(e,r){return t[e]=r,t.filter(Boolean).join("\n")});function n(e,t,n,o){var i;if(n)i="";else{i="",o.supports&&(i+="@supports (".concat(o.supports,") {")),o.media&&(i+="@media ".concat(o.media," {"));var a=void 0!==o.layer;a&&(i+="@layer".concat(o.layer.length>0?" ".concat(o.layer):""," {")),i+=o.css,a&&(i+="}"),o.media&&(i+="}"),o.supports&&(i+="}")}if(e.styleSheet)e.styleSheet.cssText=r(t,i);else{var s=document.createTextNode(i),u=e.childNodes;u[t]&&e.removeChild(u[t]),u.length?e.insertBefore(s,u[t]):e.appendChild(s)}}var o={singleton:null,singletonCounter:0};e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=o.singletonCounter++,r=o.singleton||(o.singleton=e.insertStyleElement(e));return{update:function(e){n(r,t,!1,e)},remove:function(e){n(r,t,!0,e)}}}},477:e=>{"use strict";e.exports=function(e,t,r,n){var o=self||window;try{try{var i;try{i=new o.Blob([e])}catch(t){(i=new(o.BlobBuilder||o.WebKitBlobBuilder||o.MozBlobBuilder||o.MSBlobBuilder)).append(e),i=i.getBlob()}var a=o.URL||o.webkitURL,s=a.createObjectURL(i),u=new o[t](s,r);return a.revokeObjectURL(s),u}catch(n){return new o[t]("data:application/javascript,".concat(encodeURIComponent(e)),r)}}catch(e){if(!n)throw Error("Inline worker is not supported");return new o[t](n,r)}}},826:e=>{e.exports={vertex:"precision mediump float;\n\nattribute vec2 aPosition;\nattribute vec2 aLumaPosition;\nattribute vec2 aChromaPosition;\nvarying vec2 vLumaPosition;\nvarying vec2 vChromaPosition;\nvoid main() {\n    gl_Position = vec4(aPosition, 0, 1);\n    vLumaPosition = aLumaPosition;\n    vChromaPosition = aChromaPosition;\n}\n",fragment:"// inspired by https://github.com/mbebenita/Broadway/blob/master/Player/canvas.js\n\nprecision mediump float;\n\nuniform sampler2D uTextureY;\nuniform sampler2D uTextureCb;\nuniform sampler2D uTextureCr;\nvarying vec2 vLumaPosition;\nvarying vec2 vChromaPosition;\nvoid main() {\n   // Y, Cb, and Cr planes are uploaded as ALPHA textures.\n   float fY = texture2D(uTextureY, vLumaPosition).w;\n   float fCb = texture2D(uTextureCb, vChromaPosition).w;\n   float fCr = texture2D(uTextureCr, vChromaPosition).w;\n\n   // Premultipy the Y...\n   float fYmul = fY * 1.1643828125;\n\n   // And convert that to RGB!\n   gl_FragColor = vec4(\n     fYmul + 1.59602734375 * fCr - 0.87078515625,\n     fYmul - 0.39176171875 * fCb - 0.81296875 * fCr + 0.52959375,\n     fYmul + 2.017234375   * fCb - 1.081390625,\n     1\n   );\n}\n",vertexStripe:"precision mediump float;\n\nattribute vec2 aPosition;\nattribute vec2 aTexturePosition;\nvarying vec2 vTexturePosition;\n\nvoid main() {\n    gl_Position = vec4(aPosition, 0, 1);\n    vTexturePosition = aTexturePosition;\n}\n",fragmentStripe:"// extra 'stripe' texture fiddling to work around IE 11's poor performance on gl.LUMINANCE and gl.ALPHA textures\n\nprecision mediump float;\n\nuniform sampler2D uStripe;\nuniform sampler2D uTexture;\nvarying vec2 vTexturePosition;\nvoid main() {\n   // Y, Cb, and Cr planes are mapped into a pseudo-RGBA texture\n   // so we can upload them without expanding the bytes on IE 11\n   // which doesn't allow LUMINANCE or ALPHA textures\n   // The stripe textures mark which channel to keep for each pixel.\n   // Each texture extraction will contain the relevant value in one\n   // channel only.\n\n   float fLuminance = dot(\n      texture2D(uStripe, vTexturePosition),\n      texture2D(uTexture, vTexturePosition)\n   );\n\n   gl_FragColor = vec4(0, 0, 0, fLuminance);\n}\n"}},487:e=>{!function(){"use strict";function t(e,t){throw new Error("abstract")}t.prototype.drawFrame=function(e){throw new Error("abstract")},t.prototype.clear=function(){throw new Error("abstract")},e.exports=t}()},926:(e,t,r)=>{!function(){"use strict";var t=r(487),n=r(627);function o(e){var t=this,r=e.getContext("2d"),o=null,i=null,a=null;return t.drawFrame=function(t){var s=t.format;e.width===s.displayWidth&&e.height===s.displayHeight||(e.width=s.displayWidth,e.height=s.displayHeight),null!==o&&o.width==s.width&&o.height==s.height||function(e,t){for(var n=(o=r.createImageData(e,t)).data,i=e*t*4,a=0;a<i;a+=4)n[a+3]=255}(s.width,s.height),n.convertYCbCr(t,o.data);var u,c,l,p=s.cropWidth!=s.displayWidth||s.cropHeight!=s.displayHeight;p?(i||(c=s.cropWidth,l=s.cropHeight,(i=document.createElement("canvas")).width=c,i.height=l,a=i.getContext("2d")),u=a):u=r,u.putImageData(o,-s.cropLeft,-s.cropTop,s.cropLeft,s.cropTop,s.cropWidth,s.cropHeight),p&&r.drawImage(i,0,0,s.displayWidth,s.displayHeight)},t.clear=function(){r.clearRect(0,0,e.width,e.height)},t}o.prototype=Object.create(t.prototype),e.exports=o}()},895:(e,t,r)=>{!function(){"use strict";var t=r(487),n=r(826);function o(e){var t,r,i=this,a=o.contextForCanvas(e);if(null===a)throw new Error("WebGL unavailable");function s(e,t){var r=a.createShader(e);if(a.shaderSource(r,t),a.compileShader(r),!a.getShaderParameter(r,a.COMPILE_STATUS)){var n=a.getShaderInfoLog(r);throw a.deleteShader(r),new Error("GL shader compilation for "+e+" failed: "+n)}return r}var u,c,l,p,f,d,h,v,y,_,m=new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),g={},b={},E={};function T(e,t){return g[e]&&!t||(g[e]=a.createTexture()),g[e]}function w(e,t,r,n,i){var s=!g[e]||t,u=T(e,t);if(a.activeTexture(a.TEXTURE0),o.stripe){var c=!g[e+"_temp"]||t,l=T(e+"_temp",t);a.bindTexture(a.TEXTURE_2D,l),c?(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,r/4,n,0,a.RGBA,a.UNSIGNED_BYTE,i)):a.texSubImage2D(a.TEXTURE_2D,0,0,0,r/4,n,a.RGBA,a.UNSIGNED_BYTE,i);var p=g[e+"_stripe"],f=!p||t;f&&(p=T(e+"_stripe",t)),a.bindTexture(a.TEXTURE_2D,p),f&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,r,1,0,a.RGBA,a.UNSIGNED_BYTE,function(e){if(E[e])return E[e];for(var t=e,r=new Uint32Array(t),n=0;n<t;n+=4)r[n]=255,r[n+1]=65280,r[n+2]=16711680,r[n+3]=4278190080;return E[e]=new Uint8Array(r.buffer)}(r)))}else a.bindTexture(a.TEXTURE_2D,u),s?(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texImage2D(a.TEXTURE_2D,0,a.ALPHA,r,n,0,a.ALPHA,a.UNSIGNED_BYTE,i)):a.texSubImage2D(a.TEXTURE_2D,0,0,0,r,n,a.ALPHA,a.UNSIGNED_BYTE,i)}function S(e,t,n,o){var i=g[e];a.useProgram(r);var s=b[e];s&&!t||(a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,i),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,n,o,0,a.RGBA,a.UNSIGNED_BYTE,null),s=b[e]=a.createFramebuffer()),a.bindFramebuffer(a.FRAMEBUFFER,s),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,i,0);var h=g[e+"_temp"];a.activeTexture(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,h),a.uniform1i(d,1);var v=g[e+"_stripe"];a.activeTexture(a.TEXTURE2),a.bindTexture(a.TEXTURE_2D,v),a.uniform1i(f,2),a.bindBuffer(a.ARRAY_BUFFER,u),a.enableVertexAttribArray(c),a.vertexAttribPointer(c,2,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,l),a.enableVertexAttribArray(p),a.vertexAttribPointer(p,2,a.FLOAT,!1,0,0),a.viewport(0,0,n,o),a.drawArrays(a.TRIANGLES,0,m.length/2),a.bindFramebuffer(a.FRAMEBUFFER,null)}function O(e,r,n){a.activeTexture(r),a.bindTexture(a.TEXTURE_2D,g[e]),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.uniform1i(a.getUniformLocation(t,e),n)}function A(e,t){var r=s(a.VERTEX_SHADER,e),n=s(a.FRAGMENT_SHADER,t),o=a.createProgram();if(a.attachShader(o,r),a.attachShader(o,n),a.linkProgram(o),!a.getProgramParameter(o,a.LINK_STATUS)){var i=a.getProgramInfoLog(o);throw a.deleteProgram(o),new Error("GL program linking failed: "+i)}return o}return i.drawFrame=function(s){var g=s.format,b=!t||e.width!==g.displayWidth||e.height!==g.displayHeight;if(b&&(e.width=g.displayWidth,e.height=g.displayHeight,i.clear()),t||function(){if(o.stripe){r=A(n.vertexStripe,n.fragmentStripe),a.getAttribLocation(r,"aPosition"),l=a.createBuffer();var e=new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]);a.bindBuffer(a.ARRAY_BUFFER,l),a.bufferData(a.ARRAY_BUFFER,e,a.STATIC_DRAW),p=a.getAttribLocation(r,"aTexturePosition"),f=a.getUniformLocation(r,"uStripe"),d=a.getUniformLocation(r,"uTexture")}t=A(n.vertex,n.fragment),u=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,u),a.bufferData(a.ARRAY_BUFFER,m,a.STATIC_DRAW),c=a.getAttribLocation(t,"aPosition"),h=a.createBuffer(),v=a.getAttribLocation(t,"aLumaPosition"),y=a.createBuffer(),_=a.getAttribLocation(t,"aChromaPosition")}(),b){var E=function(e,t,r){var n=g.cropLeft/r,o=(g.cropLeft+g.cropWidth)/r,i=(g.cropTop+g.cropHeight)/g.height,s=g.cropTop/g.height,u=new Float32Array([n,i,o,i,n,s,n,s,o,i,o,s]);a.bindBuffer(a.ARRAY_BUFFER,e),a.bufferData(a.ARRAY_BUFFER,u,a.STATIC_DRAW)};E(h,0,s.y.stride),E(y,0,s.u.stride*g.width/g.chromaWidth)}w("uTextureY",b,s.y.stride,g.height,s.y.bytes),w("uTextureCb",b,s.u.stride,g.chromaHeight,s.u.bytes),w("uTextureCr",b,s.v.stride,g.chromaHeight,s.v.bytes),o.stripe&&(S("uTextureY",b,s.y.stride,g.height),S("uTextureCb",b,s.u.stride,g.chromaHeight),S("uTextureCr",b,s.v.stride,g.chromaHeight)),a.useProgram(t),a.viewport(0,0,e.width,e.height),O("uTextureY",a.TEXTURE0,0),O("uTextureCb",a.TEXTURE1,1),O("uTextureCr",a.TEXTURE2,2),a.bindBuffer(a.ARRAY_BUFFER,u),a.enableVertexAttribArray(c),a.vertexAttribPointer(c,2,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,h),a.enableVertexAttribArray(v),a.vertexAttribPointer(v,2,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,y),a.enableVertexAttribArray(_),a.vertexAttribPointer(_,2,a.FLOAT,!1,0,0),a.drawArrays(a.TRIANGLES,0,m.length/2)},i.clear=function(){a.viewport(0,0,e.width,e.height),a.clearColor(0,0,0,0),a.clear(a.COLOR_BUFFER_BIT)},i.clear(),i}o.stripe=!1,o.contextForCanvas=function(e){var t={preferLowPowerToHighPerformance:!0,powerPreference:"low-power",failIfMajorPerformanceCaveat:!0,preserveDrawingBuffer:!0};return e.getContext("webgl",t)||e.getContext("experimental-webgl",t)},o.isAvailable=function(){var e,t=document.createElement("canvas");t.width=1,t.height=1;try{e=o.contextForCanvas(t)}catch(e){return!1}if(e){var r=e.TEXTURE0,n=e.createTexture(),i=new Uint8Array(16),a=o.stripe?1:4,s=o.stripe?e.RGBA:e.ALPHA,u=o.stripe?e.NEAREST:e.LINEAR;return e.activeTexture(r),e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,u),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,u),e.texImage2D(e.TEXTURE_2D,0,s,a,4,0,s,e.UNSIGNED_BYTE,i),!e.getError()}return!1},o.prototype=Object.create(t.prototype),e.exports=o}()},627:(e,t,r)=>{!function(){"use strict";var t=r(877);
/**
	 * Basic YCbCr->RGB conversion
	 *
	 * @author Brion Vibber <brion@pobox.com>
	 * @copyright 2014-2019
	 * @license MIT-style
	 *
	 * @param {YUVFrame} buffer - input frame buffer
	 * @param {Uint8ClampedArray} output - array to draw RGBA into
	 * Assumes that the output array already has alpha channel set to opaque.
	 */e.exports={convertYCbCr:function(e,r){var n=0|e.format.width,o=0|e.format.height,i=0|t(e.format.width/e.format.chromaWidth),a=0|t(e.format.height/e.format.chromaHeight),s=e.y.bytes,u=e.u.bytes,c=e.v.bytes,l=0|e.y.stride,p=0|e.u.stride,f=0|e.v.stride,d=n<<2,h=0,v=0,y=0,_=0,m=0,g=0,b=0,E=0,T=0,w=0,S=0,O=0,A=0,P=0,R=0,x=0,C=0,N=0;if(1==i&&1==a)for(b=0,E=d,N=0,x=0;x<o;x+=2){for(y=(v=x*l|0)+l|0,_=N*p|0,m=N*f|0,R=0;R<n;R+=2)T=0|u[_++],O=(409*(w=0|c[m++])|0)-57088|0,A=(100*T|0)+(208*w|0)-34816|0,P=(516*T|0)-70912|0,S=298*s[v++]|0,r[b]=S+O>>8,r[b+1]=S-A>>8,r[b+2]=S+P>>8,b+=4,S=298*s[v++]|0,r[b]=S+O>>8,r[b+1]=S-A>>8,r[b+2]=S+P>>8,b+=4,S=298*s[y++]|0,r[E]=S+O>>8,r[E+1]=S-A>>8,r[E+2]=S+P>>8,E+=4,S=298*s[y++]|0,r[E]=S+O>>8,r[E+1]=S-A>>8,r[E+2]=S+P>>8,E+=4;b+=d,E+=d,N++}else for(g=0,x=0;x<o;x++)for(C=0,h=x*l|0,_=(N=x>>a)*p|0,m=N*f|0,R=0;R<n;R++)T=0|u[_+(C=R>>i)],O=(409*(w=0|c[m+C])|0)-57088|0,A=(100*T|0)+(208*w|0)-34816|0,P=(516*T|0)-70912|0,S=298*s[h++]|0,r[g]=S+O>>8,r[g+1]=S-A>>8,r[g+2]=S+P>>8,g+=4}}}()},877:e=>{!function(){"use strict";
/**
   * Convert a ratio into a bit-shift count; for instance a ratio of 2
   * becomes a bit-shift of 1, while a ratio of 1 is a bit-shift of 0.
   *
   * @author Brion Vibber <brion@pobox.com>
   * @copyright 2016
   * @license MIT-style
   *
   * @param {number} ratio - the integer ratio to convert.
   * @returns {number} - number of bits to shift to multiply/divide by the ratio.
   * @throws exception if given a non-power-of-two
   */e.exports=function(e){for(var t=0,r=e>>1;0!=r;)r>>=1,t++;if(e!==1<<t)throw"chroma plane dimensions must be power of 2 ratio to luma plane dimensions; got "+e;return t}}()},731:(e,t,r)=>{!function(){"use strict";var t=r(487),n=r(926),o=r(895),i={FrameSink:t,SoftwareFrameSink:n,WebGLFrameSink:o,attach:function(e,t){return("webGL"in(t=t||{})?t.webGL:o.isAvailable())?new o(e,t):new n(e,t)}};e.exports=i}()}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={id:n,loaded:!1,exports:{}};return e[n](i,i.exports,r),i.loaded=!0,i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),r.nc=void 0;var n={};(()=>{"use strict";r.r(n),r.d(n,{Videox:()=>Nu,default:()=>Lu});var e={};r.r(e),r.d(e,{Box:()=>Wn,avc1:()=>Uo,avcC:()=>zn,btrt:()=>Vo,co64:()=>Qi,ctts:()=>qi,dinf:()=>ko,dref:()=>Wo,edts:()=>ko,elst:()=>Ho,esds:()=>ei,ftyp:()=>ri,hdlr:()=>ui,hev1:()=>jo,hvc1:()=>jo,hvcC:()=>Yn,mdat:()=>li,mdhd:()=>fi,mdia:()=>ko,mfhd:()=>Ci,mfra:()=>ko,minf:()=>ko,moof:()=>Ai,moov:()=>ko,mp4a:()=>hi,mvex:()=>Li,mvhd:()=>yi,pasp:()=>mi,sdtp:()=>ki,sidx:()=>Ui,stbl:()=>ko,stco:()=>Zi,stsc:()=>ea,stsd:()=>ra,stss:()=>oa,stsz:()=>aa,stts:()=>ua,tfdt:()=>ji,tfhd:()=>Bi,tkhd:()=>bi,traf:()=>Ri,trak:()=>ko,trex:()=>Gi,trun:()=>Xi,url:()=>Ti,vmhd:()=>Si,vvc1:()=>oi,vvcC:()=>ai});var t=r(379),o=r.n(t),i=r(37),a=r.n(i),s=r(569),u=r.n(s),c=r(565),l=r.n(c),p=r(216),f=r.n(p),d=r(849),h={};d.Z&&d.Z.locals&&(h.locals=d.Z.locals);var v,y=0,_={};_.setAttributes=l(),_.insert=u().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=f(),h.use=function(e){return _.options=e||{},y++||(v=o()(d.Z,_)),h},h.unuse=function(){y>0&&! --y&&(v(),v=null)};const m=h;var g,b,E,T,w,S,O={},A=[],P=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function R(e,t){for(var r in t)e[r]=t[r];return e}function x(e){var t=e.parentNode;t&&t.removeChild(e)}function C(e,t,r){var n,o,i,a={};for(i in t)"key"==i?n=t[i]:"ref"==i?o=t[i]:a[i]=t[i];if(arguments.length>2&&(a.children=arguments.length>3?g.call(arguments,2):r),"function"==typeof e&&null!=e.defaultProps)for(i in e.defaultProps)void 0===a[i]&&(a[i]=e.defaultProps[i]);return N(e,a,n,o,null)}function N(e,t,r,n,o){var i={type:e,props:t,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==o?++E:o};return null==o&&null!=b.vnode&&b.vnode(i),i}function L(e){return e.children}function D(e,t){this.props=e,this.context=t}function k(e,t){if(null==t)return e.__?k(e.__,e.__.__k.indexOf(e)+1):null;for(var r;t<e.__k.length;t++)if(null!=(r=e.__k[t])&&null!=r.__e)return r.__e;return"function"==typeof e.type?k(e):null}function I(e){var t,r;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(r=e.__k[t])&&null!=r.__e){e.__e=e.__c.base=r.__e;break}return I(e)}}function U(e){(!e.__d&&(e.__d=!0)&&T.push(e)&&!M.__r++||w!==b.debounceRendering)&&((w=b.debounceRendering)||setTimeout)(M)}function M(){for(var e;M.__r=T.length;)e=T.sort((function(e,t){return e.__v.__b-t.__v.__b})),T=[],e.some((function(e){var t,r,n,o,i,a;e.__d&&(i=(o=(t=e).__v).__e,(a=t.__P)&&(r=[],(n=R({},o)).__v=o.__v+1,X(a,o,n,t.__n,void 0!==a.ownerSVGElement,null!=o.__h?[i]:null,r,null==i?k(o):i,o.__h),Y(r,o),o.__e!=i&&I(o)))}))}function j(e,t,r,n,o,i,a,s,u,c){var l,p,f,d,h,v,y,_=n&&n.__k||A,m=_.length;for(r.__k=[],l=0;l<t.length;l++)if(null!=(d=r.__k[l]=null==(d=t[l])||"boolean"==typeof d?null:"string"==typeof d||"number"==typeof d||"bigint"==typeof d?N(null,d,null,null,d):Array.isArray(d)?N(L,{children:d},null,null,null):d.__b>0?N(d.type,d.props,d.key,null,d.__v):d)){if(d.__=r,d.__b=r.__b+1,null===(f=_[l])||f&&d.key==f.key&&d.type===f.type)_[l]=void 0;else for(p=0;p<m;p++){if((f=_[p])&&d.key==f.key&&d.type===f.type){_[p]=void 0;break}f=null}X(e,d,f=f||O,o,i,a,s,u,c),h=d.__e,(p=d.ref)&&f.ref!=p&&(y||(y=[]),f.ref&&y.push(f.ref,null,d),y.push(p,d.__c||h,d)),null!=h?(null==v&&(v=h),"function"==typeof d.type&&d.__k===f.__k?d.__d=u=F(d,u,e):u=B(e,d,f,_,h,u),"function"==typeof r.type&&(r.__d=u)):u&&f.__e==u&&u.parentNode!=e&&(u=k(f))}for(r.__e=v,l=m;l--;)null!=_[l]&&("function"==typeof r.type&&null!=_[l].__e&&_[l].__e==r.__d&&(r.__d=k(n,l+1)),Z(_[l],_[l]));if(y)for(l=0;l<y.length;l++)K(y[l],y[++l],y[++l])}function F(e,t,r){for(var n,o=e.__k,i=0;o&&i<o.length;i++)(n=o[i])&&(n.__=e,t="function"==typeof n.type?F(n,t,r):B(r,n,n,o,n.__e,t));return t}function V(e,t){return t=t||[],null==e||"boolean"==typeof e||(Array.isArray(e)?e.some((function(e){V(e,t)})):t.push(e)),t}function B(e,t,r,n,o,i){var a,s,u;if(void 0!==t.__d)a=t.__d,t.__d=void 0;else if(null==r||o!=i||null==o.parentNode)e:if(null==i||i.parentNode!==e)e.appendChild(o),a=null;else{for(s=i,u=0;(s=s.nextSibling)&&u<n.length;u+=2)if(s==o)break e;e.insertBefore(o,i),a=i}return void 0!==a?a:o.nextSibling}function W(e,t,r){"-"===t[0]?e.setProperty(t,r):e[t]=null==r?"":"number"!=typeof r||P.test(t)?r:r+"px"}function G(e,t,r,n,o){var i;e:if("style"===t)if("string"==typeof r)e.style.cssText=r;else{if("string"==typeof n&&(e.style.cssText=n=""),n)for(t in n)r&&t in r||W(e.style,t,"");if(r)for(t in r)n&&r[t]===n[t]||W(e.style,t,r[t])}else if("o"===t[0]&&"n"===t[1])i=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=r,r?n||e.addEventListener(t,i?z:H,i):e.removeEventListener(t,i?z:H,i);else if("dangerouslySetInnerHTML"!==t){if(o)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==r?"":r;break e}catch(e){}"function"==typeof r||(null!=r&&(!1!==r||"a"===t[0]&&"r"===t[1])?e.setAttribute(t,r):e.removeAttribute(t))}}function H(e){this.l[e.type+!1](b.event?b.event(e):e)}function z(e){this.l[e.type+!0](b.event?b.event(e):e)}function X(e,t,r,n,o,i,a,s,u){var c,l,p,f,d,h,v,y,_,m,g,E,T,w=t.type;if(void 0!==t.constructor)return null;null!=r.__h&&(u=r.__h,s=t.__e=r.__e,t.__h=null,i=[s]),(c=b.__b)&&c(t);try{e:if("function"==typeof w){if(y=t.props,_=(c=w.contextType)&&n[c.__c],m=c?_?_.props.value:c.__:n,r.__c?v=(l=t.__c=r.__c).__=l.__E:("prototype"in w&&w.prototype.render?t.__c=l=new w(y,m):(t.__c=l=new D(y,m),l.constructor=w,l.render=$),_&&_.sub(l),l.props=y,l.state||(l.state={}),l.context=m,l.__n=n,p=l.__d=!0,l.__h=[]),null==l.__s&&(l.__s=l.state),null!=w.getDerivedStateFromProps&&(l.__s==l.state&&(l.__s=R({},l.__s)),R(l.__s,w.getDerivedStateFromProps(y,l.__s))),f=l.props,d=l.state,p)null==w.getDerivedStateFromProps&&null!=l.componentWillMount&&l.componentWillMount(),null!=l.componentDidMount&&l.__h.push(l.componentDidMount);else{if(null==w.getDerivedStateFromProps&&y!==f&&null!=l.componentWillReceiveProps&&l.componentWillReceiveProps(y,m),!l.__e&&null!=l.shouldComponentUpdate&&!1===l.shouldComponentUpdate(y,l.__s,m)||t.__v===r.__v){l.props=y,l.state=l.__s,t.__v!==r.__v&&(l.__d=!1),l.__v=t,t.__e=r.__e,t.__k=r.__k,t.__k.forEach((function(e){e&&(e.__=t)})),l.__h.length&&a.push(l);break e}null!=l.componentWillUpdate&&l.componentWillUpdate(y,l.__s,m),null!=l.componentDidUpdate&&l.__h.push((function(){l.componentDidUpdate(f,d,h)}))}if(l.context=m,l.props=y,l.__v=t,l.__P=e,g=b.__r,E=0,"prototype"in w&&w.prototype.render)l.state=l.__s,l.__d=!1,g&&g(t),c=l.render(l.props,l.state,l.context);else do{l.__d=!1,g&&g(t),c=l.render(l.props,l.state,l.context),l.state=l.__s}while(l.__d&&++E<25);l.state=l.__s,null!=l.getChildContext&&(n=R(R({},n),l.getChildContext())),p||null==l.getSnapshotBeforeUpdate||(h=l.getSnapshotBeforeUpdate(f,d)),T=null!=c&&c.type===L&&null==c.key?c.props.children:c,j(e,Array.isArray(T)?T:[T],t,r,n,o,i,a,s,u),l.base=t.__e,t.__h=null,l.__h.length&&a.push(l),v&&(l.__E=l.__=null),l.__e=!1}else null==i&&t.__v===r.__v?(t.__k=r.__k,t.__e=r.__e):t.__e=q(r.__e,t,r,n,o,i,a,u);(c=b.diffed)&&c(t)}catch(e){t.__v=null,(u||null!=i)&&(t.__e=s,t.__h=!!u,i[i.indexOf(s)]=null),b.__e(e,t,r)}}function Y(e,t){b.__c&&b.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){b.__e(e,t.__v)}}))}function q(e,t,r,n,o,i,a,s){var u,c,l,p=r.props,f=t.props,d=t.type,h=0;if("svg"===d&&(o=!0),null!=i)for(;h<i.length;h++)if((u=i[h])&&"setAttribute"in u==!!d&&(d?u.localName===d:3===u.nodeType)){e=u,i[h]=null;break}if(null==e){if(null===d)return document.createTextNode(f);e=o?document.createElementNS("http://www.w3.org/2000/svg",d):document.createElement(d,f.is&&f),i=null,s=!1}if(null===d)p===f||s&&e.data===f||(e.data=f);else{if(i=i&&g.call(e.childNodes),c=(p=r.props||O).dangerouslySetInnerHTML,l=f.dangerouslySetInnerHTML,!s){if(null!=i)for(p={},h=0;h<e.attributes.length;h++)p[e.attributes[h].name]=e.attributes[h].value;(l||c)&&(l&&(c&&l.__html==c.__html||l.__html===e.innerHTML)||(e.innerHTML=l&&l.__html||""))}if(function(e,t,r,n,o){var i;for(i in r)"children"===i||"key"===i||i in t||G(e,i,null,r[i],n);for(i in t)o&&"function"!=typeof t[i]||"children"===i||"key"===i||"value"===i||"checked"===i||r[i]===t[i]||G(e,i,t[i],r[i],n)}(e,f,p,o,s),l)t.__k=[];else if(h=t.props.children,j(e,Array.isArray(h)?h:[h],t,r,n,o&&"foreignObject"!==d,i,a,i?i[0]:r.__k&&k(r,0),s),null!=i)for(h=i.length;h--;)null!=i[h]&&x(i[h]);s||("value"in f&&void 0!==(h=f.value)&&(h!==e.value||"progress"===d&&!h||"option"===d&&h!==p.value)&&G(e,"value",h,p.value,!1),"checked"in f&&void 0!==(h=f.checked)&&h!==e.checked&&G(e,"checked",h,p.checked,!1))}return e}function K(e,t,r){try{"function"==typeof e?e(t):e.current=t}catch(e){b.__e(e,r)}}function Z(e,t,r){var n,o;if(b.unmount&&b.unmount(e),(n=e.ref)&&(n.current&&n.current!==e.__e||K(n,null,t)),null!=(n=e.__c)){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(e){b.__e(e,t)}n.base=n.__P=null}if(n=e.__k)for(o=0;o<n.length;o++)n[o]&&Z(n[o],t,"function"!=typeof e.type);r||null==e.__e||x(e.__e),e.__e=e.__d=void 0}function $(e,t,r){return this.constructor(e,r)}function Q(e,t,r){var n,o,i;b.__&&b.__(e,t),o=(n="function"==typeof r)?null:r&&r.__k||t.__k,i=[],X(t,e=(!n&&r||t).__k=C(L,null,[e]),o||O,O,void 0!==t.ownerSVGElement,!n&&r?[r]:o?null:t.firstChild?g.call(t.childNodes):null,i,!n&&r?r:o?o.__e:t.firstChild,n),Y(i,e)}function J(e,t){var r={__c:t="__cC"+S++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var r,n;return this.getChildContext||(r=[],(n={})[t]=this,this.getChildContext=function(){return n},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&r.some(U)},this.sub=function(e){r.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){r.splice(r.indexOf(e),1),t&&t.call(e)}}),e.children}};return r.Provider.__=r.Consumer.contextType=r}g=A.slice,b={__e:function(e,t,r,n){for(var o,i,a;t=t.__;)if((o=t.__c)&&!o.__)try{if((i=o.constructor)&&null!=i.getDerivedStateFromError&&(o.setState(i.getDerivedStateFromError(e)),a=o.__d),null!=o.componentDidCatch&&(o.componentDidCatch(e,n||{}),a=o.__d),a)return o.__E=o}catch(t){e=t}throw e}},E=0,D.prototype.setState=function(e,t){var r;r=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=R({},this.state),"function"==typeof e&&(e=e(R({},r),this.props)),e&&R(r,e),null!=e&&this.__v&&(t&&this.__h.push(t),U(this))},D.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),U(this))},D.prototype.render=L,T=[],M.__r=0,S=0;var ee,te,re,ne,oe=0,ie=[],ae=[],se=b.__b,ue=b.__r,ce=b.diffed,le=b.__c,pe=b.unmount;function fe(e,t){b.__h&&b.__h(te,e,oe||t),oe=0;var r=te.__H||(te.__H={__:[],__h:[]});return e>=r.__.length&&r.__.push({__V:ae}),r.__[e]}function de(e){return oe=1,he(Pe,e)}function he(e,t,r){var n=fe(ee++,2);if(n.t=e,!n.__c&&(n.__=[r?r(t):Pe(void 0,t),function(e){var t=n.__N?n.__N[0]:n.__[0],r=n.t(t,e);t!==r&&(n.__N=[r,n.__[1]],n.__c.setState({}))}],n.__c=te,!te.u)){te.u=!0;var o=te.shouldComponentUpdate;te.shouldComponentUpdate=function(e,t,r){if(!n.__c.__H)return!0;var i=n.__c.__H.__.filter((function(e){return e.__c}));return(i.every((function(e){return!e.__N}))||!i.every((function(e){if(!e.__N)return!0;var t=e.__[0];return e.__=e.__N,e.__N=void 0,t===e.__[0]})))&&(!o||o.call(this,e,t,r))}}return n.__N||n.__}function ve(e,t){var r=fe(ee++,3);!b.__s&&Ae(r.__H,t)&&(r.__=e,r.i=t,te.__H.__h.push(r))}function ye(e,t){var r=fe(ee++,4);!b.__s&&Ae(r.__H,t)&&(r.__=e,r.i=t,te.__h.push(r))}function _e(e){return oe=5,ge((function(){return{current:e}}),[])}function me(e,t,r){oe=6,ye((function(){return"function"==typeof e?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0}),null==r?r:r.concat(e))}function ge(e,t){var r=fe(ee++,7);return Ae(r.__H,t)?(r.__V=e(),r.i=t,r.__h=e,r.__V):r.__}function be(e,t){return oe=8,ge((function(){return e}),t)}function Ee(e){var t=te.context[e.__c],r=fe(ee++,9);return r.c=e,t?(null==r.__&&(r.__=!0,t.sub(te)),t.props.value):e.__}function Te(){for(var e;e=ie.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Se),e.__H.__h.forEach(Oe),e.__H.__h=[]}catch(t){e.__H.__h=[],b.__e(t,e.__v)}}b.__b=function(e){te=null,se&&se(e)},b.__r=function(e){ue&&ue(e),ee=0;var t=(te=e.__c).__H;t&&(re===te?(t.__h=[],te.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.__V=ae,e.__N=e.i=void 0}))):(t.__h.forEach(Se),t.__h.forEach(Oe),t.__h=[])),re=te},b.diffed=function(e){ce&&ce(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==ie.push(t)&&ne===b.requestAnimationFrame||((ne=b.requestAnimationFrame)||function(e){var t,r=function(){clearTimeout(n),we&&cancelAnimationFrame(t),setTimeout(e)},n=setTimeout(r,100);we&&(t=requestAnimationFrame(r))})(Te)),t.__H.__.forEach((function(e){e.i&&(e.__H=e.i),e.__V!==ae&&(e.__=e.__V),e.i=void 0,e.__V=ae}))),re=te=null},b.__c=function(e,t){t.some((function(e){try{e.__h.forEach(Se),e.__h=e.__h.filter((function(e){return!e.__||Oe(e)}))}catch(r){t.some((function(e){e.__h&&(e.__h=[])})),t=[],b.__e(r,e.__v)}})),le&&le(e,t)},b.unmount=function(e){pe&&pe(e);var t,r=e.__c;r&&r.__H&&(r.__H.__.forEach((function(e){try{Se(e)}catch(e){t=e}})),t&&b.__e(t,r.__v))};var we="function"==typeof requestAnimationFrame;function Se(e){var t=te,r=e.__c;"function"==typeof r&&(e.__c=void 0,r()),te=t}function Oe(e){var t=te;e.__c=e.__(),te=t}function Ae(e,t){return!e||e.length!==t.length||t.some((function(t,r){return t!==e[r]}))}function Pe(e,t){return"function"==typeof t?t(e):t}function Re(e,t){for(var r in t)e[r]=t[r];return e}function xe(e,t){for(var r in e)if("__source"!==r&&!(r in t))return!0;for(var n in t)if("__source"!==n&&e[n]!==t[n])return!0;return!1}function Ce(e){this.props=e}function Ne(e,t){function r(e){var r=this.props.ref,n=r==e.ref;return!n&&r&&(r.call?r(null):r.current=null),t?!t(this.props,e)||!n:xe(this.props,e)}function n(t){return this.shouldComponentUpdate=r,C(e,t)}return n.displayName="Memo("+(e.displayName||e.name)+")",n.prototype.isReactComponent=!0,n.__f=!0,n}(Ce.prototype=new D).isPureReactComponent=!0,Ce.prototype.shouldComponentUpdate=function(e,t){return xe(this.props,e)||xe(this.state,t)};var Le=b.__b;b.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),Le&&Le(e)};var De="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function ke(e){function t(t){var r=Re({},t);return delete r.ref,e(r,t.ref||null)}return t.$$typeof=De,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}var Ie=b.__e;b.__e=function(e,t,r,n){if(e.then)for(var o,i=t;i=i.__;)if((o=i.__c)&&o.__c)return null==t.__e&&(t.__e=r.__e,t.__k=r.__k),o.__c(e,t);Ie(e,t,r,n)};var Ue=b.unmount;function Me(){this.__u=0,this.t=null,this.__b=null}function je(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function Fe(){this.u=null,this.o=null}b.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&!0===e.__h&&(e.type=null),Ue&&Ue(e)},(Me.prototype=new D).__c=function(e,t){var r=t.__c,n=this;null==n.t&&(n.t=[]),n.t.push(r);var o=je(n.__v),i=!1,a=function(){i||(i=!0,r.__R=null,o?o(s):s())};r.__R=a;var s=function(){if(! --n.__u){if(n.state.__a){var e=n.state.__a;n.__v.__k[0]=function e(t,r,n){return t&&(t.__v=null,t.__k=t.__k&&t.__k.map((function(t){return e(t,r,n)})),t.__c&&t.__c.__P===r&&(t.__e&&n.insertBefore(t.__e,t.__d),t.__c.__e=!0,t.__c.__P=n)),t}(e,e.__c.__P,e.__c.__O)}var t;for(n.setState({__a:n.__b=null});t=n.t.pop();)t.forceUpdate()}},u=!0===t.__h;n.__u++||u||n.setState({__a:n.__b=n.__v.__k[0]}),e.then(a,a)},Me.prototype.componentWillUnmount=function(){this.t=[]},Me.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var r=document.createElement("div"),n=this.__v.__k[0].__c;this.__v.__k[0]=function e(t,r,n){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach((function(e){"function"==typeof e.__c&&e.__c()})),t.__c.__H=null),null!=(t=Re({},t)).__c&&(t.__c.__P===n&&(t.__c.__P=r),t.__c=null),t.__k=t.__k&&t.__k.map((function(t){return e(t,r,n)}))),t}(this.__b,r,n.__O=n.__P)}this.__b=null}var o=t.__a&&C(L,null,e.fallback);return o&&(o.__h=null),[C(L,null,t.__a?null:e.children),o]};var Ve=function(e,t,r){if(++r[1]===r[0]&&e.o.delete(t),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.o.size))for(r=e.u;r;){for(;r.length>3;)r.pop()();if(r[1]<r[0])break;e.u=r=r[2]}};(Fe.prototype=new D).__a=function(e){var t=this,r=je(t.__v),n=t.o.get(e);return n[0]++,function(o){var i=function(){t.props.revealOrder?(n.push(o),Ve(t,e,n)):o()};r?r(i):i()}},Fe.prototype.render=function(e){this.u=null,this.o=new Map;var t=V(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&t.reverse();for(var r=t.length;r--;)this.o.set(t[r],this.u=[1,0,this.u]);return e.children},Fe.prototype.componentDidUpdate=Fe.prototype.componentDidMount=function(){var e=this;this.o.forEach((function(t,r){Ve(e,r,t)}))};var Be="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,We=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Ge="undefined"!=typeof document,He=function(e){return("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/i:/fil|che|ra/i).test(e)};function ze(e,t,r){return null==t.__k&&(t.textContent=""),Q(e,t),"function"==typeof r&&r(),e?e.__c:null}D.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach((function(e){Object.defineProperty(D.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})}));var Xe=b.event;function Ye(){}function qe(){return this.cancelBubble}function Ke(){return this.defaultPrevented}b.event=function(e){return Xe&&(e=Xe(e)),e.persist=Ye,e.isPropagationStopped=qe,e.isDefaultPrevented=Ke,e.nativeEvent=e};var Ze={configurable:!0,get:function(){return this.class}},$e=b.vnode;b.vnode=function(e){var t=e.type,r=e.props,n=r;if("string"==typeof t){var o=-1===t.indexOf("-");for(var i in n={},r){var a=r[i];Ge&&"children"===i&&"noscript"===t||"value"===i&&"defaultValue"in r&&null==a||("defaultValue"===i&&"value"in r&&null==r.value?i="value":"download"===i&&!0===a?a="":/ondoubleclick/i.test(i)?i="ondblclick":/^onchange(textarea|input)/i.test(i+t)&&!He(r.type)?i="oninput":/^onfocus$/i.test(i)?i="onfocusin":/^onblur$/i.test(i)?i="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(i)?i=i.toLowerCase():o&&We.test(i)?i=i.replace(/[A-Z0-9]/g,"-$&").toLowerCase():null===a&&(a=void 0),/^oninput$/i.test(i)&&(i=i.toLowerCase(),n[i]&&(i="oninputCapture")),n[i]=a)}"select"==t&&n.multiple&&Array.isArray(n.value)&&(n.value=V(r.children).forEach((function(e){e.props.selected=-1!=n.value.indexOf(e.props.value)}))),"select"==t&&null!=n.defaultValue&&(n.value=V(r.children).forEach((function(e){e.props.selected=n.multiple?-1!=n.defaultValue.indexOf(e.props.value):n.defaultValue==e.props.value}))),e.props=n,r.class!=r.className&&(Ze.enumerable="className"in r,null!=r.className&&(n.class=r.className),Object.defineProperty(n,"className",Ze))}e.$$typeof=Be,$e&&$e(e)};var Qe=b.__r;b.__r=function(e){Qe&&Qe(e),e.__c};function Je(e){return!!e.__k&&(Q(null,e),!0)}function et(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}var tt,rt=function(){return rt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},rt.apply(this,arguments)};function nt(e,t){var r;return t.type===tt.TRIGGER_STORE_DIFF?(r={__storeUpdated:e.__storeUpdated+1},rt(rt({},e),r)):e}!function(e){e[e.TRIGGER_STORE_DIFF=0]="TRIGGER_STORE_DIFF"}(tt||(tt={}));var ot,it=J({}),at=(ot=it,function(e){var t,r=Ee(ot).store,n=he((function(e){return e+1}),0),o=n[1],i=_e((function(){})),a=_e({}),s=r.getState();return t=i.current!==e?e(s):a.current,ye((function(){i.current=e,a.current=t})),ye((function(){return r.subscribe((function(){var e=i.current(r.getState());(function(e,t){if(et(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var o=0;o<r.length;o++)if(!Object.prototype.hasOwnProperty.call(t,r[o])||!et(e[r[o]],t[r[o]]))return!1;return!0})(a.current,e)||(a.current=e,o(1))}))}),[r]),t}),st=function(e){return function(){return Ee(e).store.dispatch}}(it),ut=r(683),ct={};ut.Z&&ut.Z.locals&&(ct.locals=ut.Z.locals);var lt,pt=0,ft={};ft.setAttributes=l(),ft.insert=u().bind(null,"head"),ft.domAPI=a(),ft.insertStyleElement=f(),ct.use=function(e){return ft.options=e||{},pt++||(lt=o()(ut.Z,ft)),ct},ct.unuse=function(){pt>0&&! --pt&&(lt(),lt=null)};const dt=ct;var ht=r(725),vt={};ht.Z&&ht.Z.locals&&(vt.locals=ht.Z.locals);var yt,_t=0,mt={};mt.setAttributes=l(),mt.insert=u().bind(null,"head"),mt.domAPI=a(),mt.insertStyleElement=f(),vt.use=function(e){return mt.options=e||{},_t++||(yt=o()(ht.Z,mt)),vt},vt.unuse=function(){_t>0&&! --_t&&(yt(),yt=null)};const gt=vt;var bt=function(){return bt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},bt.apply(this,arguments)};const Et={play:Ne((function(e){return void 0===e&&(e={}),C("svg",bt({},e,{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3700",width:"1em",height:"1em"}),C("path",{d:"M370.57024 856.02304c-57.81504 36.03968-134.26176-3.7376-134.26176-69.90336V236.30848c0-66.12992 76.4416-105.94304 134.26176-69.86752l460.32896 275.69152A81.5104 81.5104 0 0 1 870.41024 512a81.49504 81.49504 0 0 1-39.51104 69.86752l-460.32896 274.11968v0.03584z",fill:"#ffffff","p-id":"3701"}))})),"play-circle":Ne((function(e){return void 0===e&&(e={}),C("svg",bt({},e,{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2241",width:"1em",height:"1em"}),C("path",{d:"M512 79.8892047A426.8607953 426.8607953 0 1 1 85.1392047 506.75 427.34403441 427.34403441 0 0 1 512 79.8892047m0-16.1079547A442.96875 442.96875 0 1 0 954.96875 506.75 442.96875 442.96875 0 0 0 512 63.78125z","p-id":"2242"}),C("path",{d:"M654.07215941 510.61590941l-231.31022735-133.53494382v267.06988676l231.31022735-133.53494294z","p-id":"2243"}))})),"volume-muted":Ne((function(e){return void 0===e&&(e={}),C("svg",bt({},e,{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4545",width:"1em",height:"1em"}),C("path",{d:"M469.333333 853.333333c-8.533333 0-17.066667-4.266667-25.6-8.533333L238.933333 682.666667H85.333333c-25.6 0-42.666667-17.066667-42.666666-42.666667V384c0-25.6 17.066667-42.666667 42.666666-42.666667h153.6l200.533334-162.133333c12.8-8.533333 29.866667-12.8 46.933333-4.266667 17.066667 8.533333 25.6 21.333333 25.6 38.4v597.333334c0 17.066667-8.533333 29.866667-25.6 38.4-4.266667 4.266667-12.8 4.266667-17.066667 4.266666z m-341.333333-256h128c8.533333 0 17.066667 4.266667 25.6 8.533334l145.066667 115.2V302.933333L281.6 418.133333c-8.533333 4.266667-17.066667 8.533333-25.6 8.533334H128v170.666666zM725.333333 682.666667c-12.8 0-21.333333-4.266667-29.866666-12.8-17.066667-17.066667-17.066667-42.666667 0-59.733334l256-256c17.066667-17.066667 42.666667-17.066667 59.733333 0 17.066667 17.066667 17.066667 42.666667 0 59.733334l-256 256c-8.533333 8.533333-17.066667 12.8-29.866667 12.8z","p-id":"4546"}),C("path",{d:"M981.333333 682.666667c-12.8 0-21.333333-4.266667-29.866666-12.8l-256-256c-17.066667-17.066667-17.066667-42.666667 0-59.733334 17.066667-17.066667 42.666667-17.066667 59.733333 0l256 256c17.066667 17.066667 17.066667 42.666667 0 59.733334-8.533333 8.533333-17.066667 12.8-29.866667 12.8z","p-id":"4547"}))})),volume:Ne((function(e){return void 0===e&&(e={}),C("svg",bt({},e,{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4408",width:"1em",height:"1em"}),C("path",{d:"M469.333333 853.333333c-8.533333 0-17.066667-4.266667-25.6-8.533333L238.933333 682.666667H85.333333c-25.6 0-42.666667-17.066667-42.666666-42.666667V384c0-25.6 17.066667-42.666667 42.666666-42.666667h153.6l200.533334-162.133333c12.8-8.533333 29.866667-12.8 46.933333-4.266667 17.066667 8.533333 25.6 21.333333 25.6 38.4v597.333334c0 17.066667-8.533333 29.866667-25.6 38.4-4.266667 4.266667-12.8 4.266667-17.066667 4.266666z m-341.333333-256h128c8.533333 0 17.066667 4.266667 25.6 8.533334l145.066667 115.2V302.933333L281.6 418.133333c-8.533333 4.266667-17.066667 8.533333-25.6 8.533334H128v170.666666zM814.933333 857.6c-12.8 0-21.333333-4.266667-29.866666-12.8-17.066667-17.066667-17.066667-42.666667 0-59.733333 149.333333-149.333333 149.333333-392.533333 0-541.866667-17.066667-17.066667-17.066667-42.666667 0-59.733333 17.066667-17.066667 42.666667-17.066667 59.733333 0 183.466667 183.466667 183.466667 482.133333 0 665.6-8.533333 4.266667-21.333333 8.533333-29.866667 8.533333z m-153.6-153.6c-12.8 0-21.333333-4.266667-29.866666-12.8-17.066667-17.066667-17.066667-42.666667 0-59.733333 68.266667-68.266667 68.266667-174.933333 0-243.2-17.066667-17.066667-17.066667-42.666667 0-59.733334 17.066667-17.066667 42.666667-17.066667 59.733333 0 98.133333 98.133333 98.133333 260.266667 0 362.666667-4.266667 8.533333-17.066667 12.8-29.866667 12.8z","p-id":"4409"}))})),fullscreen:Ne((function(e){return void 0===e&&(e={}),C("svg",bt({},e,{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2092",width:"1em",height:"1em"}),C("path",{d:"M176 798c0 27.338 21.94 49.552 49.173 49.993L226 848h118c22.091 0 40 17.909 40 40s-17.909 40-40 40H196c-55.228 0-100-44.772-100-100V672c0-22.091 17.909-40 40-40s40 17.909 40 40v126z m712-166c22.091 0 40 17.909 40 40v156c0 55.228-44.772 100-100 100H680c-22.091 0-40-17.909-40-40s17.909-40 40-40h118c27.338 0 49.552-21.94 49.993-49.173L848 798V672c0-22.091 17.909-40 40-40zM828 96c55.228 0 100 44.772 100 100v156c0 22.091-17.909 40-40 40s-40-17.909-40-40V226c0-27.614-22.386-50-50-50H680c-22.091 0-40-17.909-40-40s17.909-40 40-40h148z m-484 0c22.091 0 40 17.909 40 40s-17.909 40-40 40H226c-27.338 0-49.552 21.94-49.993 49.173L176 226v126c0 22.091-17.909 40-40 40s-40-17.909-40-40V196c0-55.228 44.772-100 100-100h148z","p-id":"2093"}))})),pause:Ne((function(e){return void 0===e&&(e={}),C("svg",bt({},e,{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2827",width:"1em",height:"1em"}),C("path",{d:"M426.666667 288v448a32.426667 32.426667 0 0 1-32 32h-64a32.426667 32.426667 0 0 1-32-32V288A32.426667 32.426667 0 0 1 330.666667 256h64a32.426667 32.426667 0 0 1 32 32zM693.333333 256h-64a32.426667 32.426667 0 0 0-32 32v448a32.426667 32.426667 0 0 0 32 32h64a32.426667 32.426667 0 0 0 32-32V288a32.426667 32.426667 0 0 0-32-32z","p-id":"2828"}))})),loading:Ne((function(e){return void 0===e&&(e={}),C("svg",bt({},e,{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2369",width:"1em",height:"1em"}),C("path",{d:"M512 0c282.7776 0 512 229.2224 512 512s-229.2224 512-512 512a512 512 0 0 1-462.1824-291.4304 36.608 36.608 0 1 1 66.048-31.5904A438.784 438.784 0 1 0 73.216 512 36.608 36.608 0 1 1 0 512C0 229.2224 229.2224 0 512 0z","p-id":"2370"}))})),replay:Ne((function(e){return void 0===e&&(e={}),C("svg",bt({},e,{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1208",width:"1em",height:"1em"}),C("path",{d:"M512 213.333333v59.648c0 6.826667-2.986667 13.354667-8.362667 18.176a30.805333 30.805333 0 0 1-40.32 0L349.696 188.8a23.893333 23.893333 0 0 1 0-36.266667l113.621333-102.357333A30.208 30.208 0 0 1 483.498667 42.666667c15.744 0 28.501333 11.52 28.501333 25.685333V128a384 384 0 1 1-366.293333 268.544 42.666667 42.666667 0 1 1 81.365333 25.6 299.178667 299.178667 0 0 0-12.586667 115.882667A298.666667 298.666667 0 1 0 512 213.333333z",fill:"#ffffff","p-id":"1209"}))}))};var Tt,wt="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,St="object"==typeof window&&"object"==typeof document,Ot=St?window:wt?r.g:{},At=Ot.AudioContext||Ot.webkitAudioContext||Ot.mozAudioContext||Ot.msAudioContext,Pt=([Ot.Atomics,Ot.SharedArrayBuffer].every((function(e){return!!e})),[Ot.WebAssembly,Ot.Worker,Ot.AudioContext,Ot.OfflineAudioContext,Ot.Blob,null===(Tt=Ot.URL)||void 0===Tt?void 0:Tt.createObjectURL].every((function(e){return!!e}))),Rt=[Ot.MediaSource,Ot.Blob].every((function(e){return!!e})),xt=!1;try{xt=MediaSource.isTypeSupported("video/mp4;codecs=hvc1.1.6.L93.90")}catch(e){}var Ct=xt;function Nt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=[];return e.forEach((function(e){e&&("string"==typeof e?r.push(e):Object.keys(e).forEach((function(t){e[t]&&r.push(t)})))})),r.join(" ")}var Lt,Dt,kt,It,Ut=function(){return Ut=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ut.apply(this,arguments)},Mt=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r},jt=Ne((function(e){var t=e.type,r=e.className,n=(e.class,Mt(e,["type","className","class"])),o=Et[t];return ve((function(){return gt.use(),function(){return gt.unuse()}}),[]),o?C("span",{className:Nt("videox-icon",r)},C(o,Ut({},n))):C("i",null)}));!function(e){e[e.PLAYING=0]="PLAYING",e[e.WAITING=1]="WAITING",e[e.SUSPEND=2]="SUSPEND",e[e.PAUSED=3]="PAUSED",e[e.ENDED=4]="ENDED"}(Lt||(Lt={})),function(e){e[e.READY=0]="READY",e[e.PLAYING=1]="PLAYING",e[e.WAITING=2]="WAITING",e[e.PAUSED=3]="PAUSED",e[e.ENDED=4]="ENDED"}(Dt||(Dt={})),function(e){e[e.Native=0]="Native",e[e.MSE=1]="MSE",e[e.WASM=2]="WASM"}(kt||(kt={})),function(e){e[e.UNKNOWN_ERROR=-1]="UNKNOWN_ERROR",e[e.WASM_NOT_SUPPORTED=10001]="WASM_NOT_SUPPORTED",e[e.CANVAS_NOT_SUPPORTED=10002]="CANVAS_NOT_SUPPORTED",e[e.AUDIOCONTEXT_NOT_SUPPORTED=10003]="AUDIOCONTEXT_NOT_SUPPORTED",e[e.WORKER_NOT_SUPPORTED=10004]="WORKER_NOT_SUPPORTED",e[e.WEBGL_NOT_SUPPORTED=10005]="WEBGL_NOT_SUPPORTED",e[e.SOFT_RENDER_INIT_FAILED=10006]="SOFT_RENDER_INIT_FAILED",e[e.WASM_THREADS_NOT_SUPPORTED=10007]="WASM_THREADS_NOT_SUPPORTED",e[e.WASM_THREADS_NEED=10008]="WASM_THREADS_NEED",e[e.COROUTINE=20001]="COROUTINE",e[e.DECODE=20002]="DECODE",e[e.BUFFERING=20003]="BUFFERING"}(It||(It={}));var Ft=r(669),Vt={};Ft.Z&&Ft.Z.locals&&(Vt.locals=Ft.Z.locals);var Bt,Wt=0,Gt={};Gt.setAttributes=l(),Gt.insert=u().bind(null,"head"),Gt.domAPI=a(),Gt.insertStyleElement=f(),Vt.use=function(e){return Gt.options=e||{},Wt++||(Bt=o()(Ft.Z,Gt)),Vt},Vt.unuse=function(){Wt>0&&! --Wt&&(Bt(),Bt=null)};const Ht=Vt;var zt={display:"none"},Xt=Ne(ke((function(e,t){var r=e.children,n=e.trigger,o=e.className,i=e.contentClassName,a=_e(null),s=_e(-1),u=_e(!1),c=_e(!1);ve((function(){return Ht.use(),function(){return Ht.unuse()}}),[]),me(t,(function(){return{setForceVisible:function(e){u.current=e;var t=a.current;e&&clearTimeout(s.current),t&&(e?t.style.display="":c.current||(t.style.display="none"))}}}));var l=be((function(){c.current=!0,clearTimeout(s.current),a.current&&(a.current.style.display="")}),[]),p=be((function(){c.current=!1,clearTimeout(s.current),s.current=setTimeout((function(){a.current&&!u.current&&(a.current.style.display="none")}),300)}),[]);return C("div",{className:Nt("videox-popover",o),onMouseEnter:l,onMouseLeave:p},n,C("div",{ref:a,className:Nt("videox-popover-content",i),style:zt},r))}))),Yt=r(100),qt={};Yt.Z&&Yt.Z.locals&&(qt.locals=Yt.Z.locals);var Kt,Zt=0,$t={};$t.setAttributes=l(),$t.insert=u().bind(null,"head"),$t.domAPI=a(),$t.insertStyleElement=f(),qt.use=function(e){return $t.options=e||{},Zt++||(Kt=o()(Yt.Z,$t)),qt},qt.unuse=function(){Zt>0&&! --Zt&&(Kt(),Kt=null)};const Qt=qt;var Jt=r(96),er=r.n(Jt),tr=Ne((function(e){var t=e.className,r=e.sliderTrackInner,n=e.onChange,o=e.onDragStart,i=e.onDragEnd,a=e.max,s=e.value,u=e.vertical,c=e.disabled,l=de(s),p=l[0],f=l[1],d=_e(!1);ve((function(){return Qt.use(),function(){return Qt.unuse()}}),[]),ve((function(){d.current||f(s)}),[s]);var h=ge((function(){return 100*(Math.max(Math.min(p/a,1),0)||0)+"%"}),[a,p]),v=_e(null),y=be((function(e){if(e.cancelable&&e.preventDefault(),v.current){var t=e.touches,r=t?t[0]:e,o=r.pageX,i=r.pageY,s=v.current.getBoundingClientRect(),c=void 0;if(u){if(s.height<=0)return;c=(s.height-(i-s.y))/s.height}else{if(s.width<=0)return;c=(o-s.x)/s.width}var l=Math.max(Math.min(c,1),0);f(l*a),null==n||n(l)}}),[n,u,a]),_=be((function(e){y(e)}),[y]),m=ge((function(){return er()(_,10)}),[_]),g=be((function(e){c||(d.current=!0,null==o||o(),document.addEventListener("touchmove",m,{passive:!1}),document.addEventListener("mousemove",m),y(e))}),[y,m,o]);ve((function(){var e=function(){d.current&&(document.removeEventListener("touchmove",m),document.removeEventListener("mousemove",m),d.current=!1,null==i||i())};return document.addEventListener("touchend",e),document.addEventListener("mouseup",e),function(){document.removeEventListener("touchend",e),document.removeEventListener("mouseup",e)}}),[i,m]);var b=ge((function(){return u?{height:h}:{width:h}}),[h,u]),E=ge((function(){return u?{bottom:h}:{left:h}}),[h,u]);return C("div",{className:Nt("videox-slider",t,{"videox-slider-vertical":u,"videox-slider-disabled":c})},C("div",{className:"videox-slider-inner",onMouseDown:g,onTouchStart:g},C("div",{className:"videox-slider-track",ref:v},r,C("div",{className:"videox-slider-track-fill",style:b})),C("div",{className:"videox-slider-thumb",style:E})))})),rr=r(992),nr={};rr.Z&&rr.Z.locals&&(nr.locals=rr.Z.locals);var or,ir=0,ar={};ar.setAttributes=l(),ar.insert=u().bind(null,"head"),ar.domAPI=a(),ar.insertStyleElement=f(),nr.use=function(e){return ar.options=e||{},ir++||(or=o()(rr.Z,ar)),nr},nr.unuse=function(){ir>0&&! --ir&&(or(),or=null)};const sr=nr;var ur=function(e){return e<10?"0"+e:e},cr=function(e,t){return void 0===t&&(t=!1),e===1/0?e:(n=Math.floor(e/60),n-=60*(r=Math.floor(n/60)),e=Math.floor(e-60*(60*r+n)),o=[],(t||r>0)&&o.push(ur(r)),o.push(ur(n)),o.push(ur(e)),o.join(":"));var r,n,o};function lr(e){return void 0===e}function pr(e){return/avc/i.test(e)}function fr(e){return/h(vc|ev)/i.test(e)}function dr(e){return/vvc/i.test(e)}function hr(e,t){var r={},n=[];return e.forEach((function(e){var o=t(e);r[o]||(n.push(e),r[o]=!0)})),n}var vr,yr=Ne((function(){var e=de([]),t=e[0],r=e[1],n=at((function(e){return{renderer:e.controller.activeRenderer,duration:e.controller.activeRenderer.duration}})),o=n.renderer,i=n.duration;return ve((function(){var e=function(){var e=o.buffered;r(Array.from(Array(e.length)).map((function(t,r){return{start:e.start(r),end:e.end(r)}})))};return o.on("progress",e),function(){o.off("progress",e)}}),[o]),i!==1/0&&t.length?C("div",{className:"videox-progress-buffered"},t.map((function(e,t){return C("span",{key:t,className:"videox-progress-buffered-item",style:{left:e.start/i*100+"%",width:(e.end-e.start)/i*100+"%"}})}))):null})),_r=Ne((function(e){var t=e.left,r=e.right,n=de(0),o=n[0],i=n[1],a=at((function(e){return{controller:e.controller,live:e.controller.live,progressive:e.controller.progressive,duration:e.controller.duration}})),s=a.controller,u=a.live,c=a.duration,l=ge((function(){return cr(o)}),[o]),p=ge((function(){return cr(c)}),[c]),f=u?l:l+" / "+p,d=_e(0),h=be((function(e){d.current=s.duration*e}),[s]),v=be((function(){s.currentTime=d.current}),[s]);return ve((function(){return sr.use(),function(){return sr.unuse()}}),[]),ve((function(){var e=function(){i(s.currentTime)};return s.on("timeupdate",e),function(){s.off("timeupdate",e)}}),[s]),C("div",{className:"videox-progress-container"},u?C("div",{className:"videox-progress videox-progress-placeholder"}):C(tr,{className:"videox-progress",value:o,max:s.duration,onChange:h,onDragEnd:v,sliderTrackInner:C(yr,null)}),t,C("div",{className:"videox-time"},f),r)})),mr={isFirefox:!1,isOpera:!1,isTrident:!1,isEdge:!1,isChrome:!1,isSafari:!1,isMQQBrowser:!1,isMobile:!1,isIos:!1,isDingtalk:!1},gr=void 0!==window.navigator,br=gr?window.navigator.userAgent:"";if(br.indexOf("MQQBrowser")>-1?mr.isMQQBrowser=!0:br.indexOf("Firefox")>-1?mr.isFirefox=!0:br.indexOf("Opera")>-1||br.indexOf("OPR")>-1?mr.isOpera=!0:br.indexOf("Trident")>-1?mr.isTrident=!0:br.indexOf("Edge")>-1?mr.isEdge=!0:br.indexOf("Chrome")>-1?(mr.isChrome=!0,(br.toLowerCase().match(/chrome\/([\d.]+)/)||[])[1]):br.indexOf("Safari")>-1||br.indexOf("iPhone")>-1||br.indexOf("iPad")>-1||br.indexOf("iPod")>-1?mr.isSafari=!0:br.toLowerCase().indexOf("dingtalk")>-1&&(mr.isDingtalk=!0),/(iPhone\sOS)\s([\d_]+)/i.test(br)&&(mr.isIos=!0),gr){var Er=window.navigator;if("maxTouchPoints"in Er)mr.isMobile=Er.maxTouchPoints>0;else if("msMaxTouchPoints"in Er)mr.isMobile=Er.msMaxTouchPoints>0;else{var Tr=null===(vr=window.matchMedia)||void 0===vr?void 0:vr.call(window,"(pointer:coarse)");if(Tr&&"(pointer:coarse)"===Tr.media)mr.isMobile=!!Tr.matches;else if("orientation"in window)mr.isMobile=!0;else{var wr=Er.userAgent;mr.isMobile=/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(wr)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(wr)}}}var Sr=r(212),Or={};Sr.Z&&Sr.Z.locals&&(Or.locals=Sr.Z.locals);var Ar,Pr=0,Rr={};Rr.setAttributes=l(),Rr.insert=u().bind(null,"head"),Rr.domAPI=a(),Rr.insertStyleElement=f(),Or.use=function(e){return Rr.options=e||{},Pr++||(Ar=o()(Sr.Z,Rr)),Or},Or.unuse=function(){Pr>0&&! --Pr&&(Ar(),Ar=null)};var xr=Ne((function(e){var t=e.dataSource,r=e.style;return C("div",{className:Nt(e.className,"videox-menu"),style:r},t.map((function(e,t){return C("div",{key:t,onClick:e.onClick},e.title)})))})),Cr=r(775),Nr=r.n(Cr),Lr=function(e){return e<10?"0"+e:e},Dr=function(e,t){void 0===t&&(t=!0);var r=Math.floor(e/1e3);return function(e,t){return void 0===t&&(t=!1),e===1/0?e:(n=Math.floor(e/60),n-=60*(r=Math.floor(n/60)),e=Math.floor(e-60*(60*r+n)),o=[],(t||r>0)&&o.push(Lr(r)),o.push(Lr(n)),o.push(Lr(e)),o.join(":"));var r,n,o}(r,t)+"."+Math.floor(1e3*(e-1e3*r))},kr="undefined"!=typeof performance&&"function"==typeof performance.now;function Ir(){return kr?performance.now():Date.now()}var Ur,Mr=function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};!function(e){e[e.TRACE=-1]="TRACE",e[e.DEBUG=0]="DEBUG",e[e.LOG=1]="LOG",e[e.INFO=2]="INFO",e[e.WARN=10]="WARN",e[e.ERROR=11]="ERROR",e[e.NONE=1e3]="NONE"}(Ur||(Ur={}));var jr=Ur.INFO,Fr=Ur.ERROR,Vr=2e3,Br=Ir(),Wr=[],Gr=0,Hr=function(){function e(e){var t=this;this.trace=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return t._print(Ur.TRACE,e)},this.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return t._print(Ur.DEBUG,e)},this.log=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return t._print(Ur.LOG,e)},this.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return t._print(Ur.INFO,e)},this.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return t._print(Ur.WARN,e)},this.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return t._print(Ur.ERROR,e)},this.name=e}return e.prototype._print=function(e,t){if(e>=jr){var r=Ir()-Br,n="[".concat(Ur[e],"][").concat(this.name,"][").concat(Dr(r,!0),"]");if(Wr.push({id:Gr++,level:e,name:this.name,timestamp:r,args:t,prefix:n,message:""}),Wr.length>Vr&&Wr.shift(),e>=Fr){var o=(Ur[e]||"").toLowerCase(),i=console[o];i&&i.apply(void 0,Mr([n],t,!1))}}},e.prototype.getLogs=function(){return Wr.map((function(e){return e.message=e.prefix+" "+e.args.map((function(e){return"string"==typeof e?e:Nr()(e)})).join(" "),e}))},e.prototype.clear=function(){Wr=[]},e.prototype.setSize=function(e){Vr=e},e.prototype.setLevel=function(e){jr=e},e.prototype.getLevel=function(){return jr},e.prototype.setPrintLevel=function(e){Fr=e},e.prototype.reset=function(){jr=Ur.INFO,Fr=Ur.ERROR,Vr=2e3,Br=Ir(),Wr=[],Gr=0},e.LogLevel=Ur,e}(),zr=new Hr("common"),Xr=Ne((function(){var e=at((function(e){var t=e.controller,r=e.root,n=t.activeRenderer;return{root:r,controller:t,muted:t.muted,status:n.status,volume:t.volume,err:t.error,poster:t.poster}})),t=e.controller,r=e.err,n=e.muted,o=e.root,i=e.status,a=e.volume,s=de(),u=s[0],c=s[1],l=_e(null),p=n?0:Math.round(100*a),f=0===a,d=n||0===p,h=i===Dt.PLAYING,v=_e(),y=be((function(){var e;null===(e=v.current)||void 0===e||e.setForceVisible(!0)}),[]),_=be((function(){var e;null===(e=v.current)||void 0===e||e.setForceVisible(!1)}),[]),m=be((function(e){t.volume=Math.round(100*e)/100}),[t]),g=be((function(){d?(t.muted=!1,f&&(t.volume=.1)):t.muted=!0}),[t,d,f]),b=be((function(){t.toggle()}),[t]),E=be((function(){t.load()}),[t]),T=be((function(){if("fullscreen"in document||"fullscreenElement"in document)document.fullscreen||document.fullscreenElement?(t=document).exitFullscreen?t.exitFullscreen():t.webkitExitFullScreen?t.webkitExitFullScreen():t.mozExitFullScreen?t.mozExitFullScreen():t.msExitFullscreen&&t.msExitFullscreen():function(e){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()}(o);else{var e=o.style;"fixed"!==e.position?(e.position="fixed",e.left="0",e.top="0",e.width="100%",e.height="100%"):(e.position="relative",e.left="",e.top="",e.width="",e.height=""),o.dispatchEvent(new Event("fullscreenchange"))}var t}),[o]);ve((function(){return dt.use(),function(){return dt.unuse()}}),[]),ve((function(){var e=function(){t.emit("fullscreenchange",void 0)};return o.addEventListener("fullscreenchange",e),function(){o.removeEventListener("fullscreenchange",e)}}),[t,o]);var w=ge((function(){return i===Dt.READY||i===Dt.PAUSED?"play":i===Dt.ENDED?"replay":"pause"}),[i]),S=ge((function(){return C(jt,{className:"videox-icon-volume",type:d?"volume-muted":"volume",onClick:g})}),[d,g]),O=ge((function(){return C(jt,{className:"videox-icon-play",type:w,onClick:b})}),[w,b]),A=ge((function(){return C(L,null,mr.isMobile?C("span",{className:"videox-btn"},S):C(Xt,{ref:v,className:"videox-btn",contentClassName:"videox-volume-content",trigger:S},C("span",{className:"videox-volume-number"},p),C(tr,{className:"videox-volume-progress",value:p,max:100,onChange:m,onDragStart:y,onDragEnd:_,vertical:!0})),C(jt,{className:"videox-btn",type:"fullscreen",onClick:T}))}),[p,S,T,m,y,_]),P=ge((function(){if(r)return C("div",{className:"videox-error"},C(jt,{className:"videox-icon-reload",type:"replay",onClick:E}),C("span",{className:"videox-error-text"},r.message||"播放异常，请重试"));switch(i){case Dt.WAITING:return C(jt,{className:"videox-icon-loading",type:"loading"});case Dt.READY:case Dt.PAUSED:return C("div",{className:"videox-matte-icon-btn",onClick:b},C(jt,{className:"videox-icon-play",type:"play"}));default:return null}}),[i,r,b]),R=be((function(e){e.preventDefault(),c({left:e.offsetX+"px",top:e.offsetY+"px"})}),[]),x=ge((function(){return[{title:"下载日志",onClick:function(){var e=zr.getLogs().map((function(e){return e.message+"\n"})),t=document.createElement("a");t.href=URL.createObjectURL(new Blob(e)),t.download="videox."+Date.now()+".log",t.click()}}]}),[]),N=be((function(){c(void 0)}),[]);return C("div",{ref:l,className:Nt("videox-control",{"videox-playing":h}),onContextMenu:R},u&&C("div",{className:"videox-contextmenu-bg",onClick:N},C(xr,{className:"videox-contextmenu",style:u,dataSource:x})),P&&C("div",{className:"videox-matte"},P),C(_r,{left:O,right:A}))})),Yr=Ne((function(){var e=at((function(e){return{controller:e.controller}})),t=st();return ve((function(){var r=function(){t({type:tt.TRIGGER_STORE_DIFF})};return e.controller.on("update",r),function(){return e.controller.off("update",r)}}),[]),C(Xr,null)})),qr=function(){function e(e){var t=this;this.listeners=[],this.dispatch=function(e){var r=t.state;t.state=t.reducer(t.state,e),r!==t.state&&t.listeners.forEach((function(e){return e()}))},this.state=e.state,this.reducer=e.reducer}return e.prototype.subscribe=function(e){var t=this;return this.listeners.push(e),function(){t.listeners=t.listeners.filter((function(t){return t!==e}))}},e.prototype.getState=function(){return this.state},e}(),Kr=function(){function e(e){this.mounted=!1,this.options=e,e.container.classList.add("videox-container"),m.use()}return e.prototype.mount=function(){if(!this.mounted){var e=this.options.container;this.compWrapper=document.createElement("div");var t=new qr({state:{controller:this.options.controller,root:e,__storeUpdated:0},reducer:nt});e.appendChild(this.compWrapper),ze(C(it.Provider,{value:{store:t}},C(Yr,null)),this.compWrapper),this.mounted=!0}},e.prototype.unmount=function(){var e;if(this.mounted){var t=this.compWrapper;t&&(Je(t),null===(e=t.parentNode)||void 0===e||e.removeChild(t)),this.mounted=!1}},e.prototype.destroy=function(){m.unuse(),this.unmount(),this.options.container.classList.remove("videox-container")},e}(),Zr=new Hr("core"),$r=function(){function e(e,t,r){this.dv=new DataView(e),this.offset=t||this.dv.byteOffset,this.start=this.offset,this.end=r?this.start+r:this.dv.byteLength}return e.fromUint8=function(t){return new e(t.buffer,t.byteOffset,t.byteLength)},e.concatUint8s=function(e){return this.concatUint8.apply(this,e)},e.concatUint8=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e.length<=1)return e[0]||new Uint8Array(0);var r=new Uint8Array(e.reduce((function(e,t){return e+t.byteLength}),0)),n=0;return e.forEach((function(e){r.set(e,n),n+=e.byteLength})),r},e.concat=function(t,r){return e.concatUint8(new Uint8Array(t),new Uint8Array(r)).buffer},Object.defineProperty(e.prototype,"buffer",{get:function(){return this.dv.buffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"unreadLength",{get:function(){return Math.max(this.end-this.offset,0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this.end-this.start},enumerable:!1,configurable:!0}),e.prototype.readFloat=function(e){var t=0;switch(e){case 4:t=this.dv.getFloat32(this.offset);break;case 8:t=this.dv.getFloat64(this.offset);break;default:throw new Error("not supported for read float byte with "+e)}return this.offset+=e,t},e.prototype.back=function(e){this.offset-=e},e.prototype.skip=function(e){this.offset+=e},e.prototype.readInt=function(e){var t=this.offset;switch(this.offset+=e,e){case 1:return this.dv.getInt8(t);case 2:return this.dv.getInt16(t);case 4:return this.dv.getInt32(t);default:throw new Error("not supported for read byte with "+e)}},e.prototype.read=function(e){var t=this.offset;switch(this.offset+=e,e){case 1:return this.dv.getUint8(t);case 2:return this.dv.getUint16(t);case 3:return(this.dv.getUint16(t)<<8)+this.dv.getUint8(t+2);case 4:return this.dv.getUint32(t);default:return this.back(e-4),this.read(e-4)+this.dv.getUint32(t)*Math.pow(256,e-4)}},e.prototype.writeInt=function(e,t){var r=this.offset;switch(this.offset+=e,e){case 1:return this.dv.setInt8(r,t);case 2:return this.dv.setInt16(r,t);case 3:return this.dv.setInt8(r,t>>16),this.dv.setInt16(r+1,65535&t);case 4:return this.dv.setInt32(r,t);default:throw new Error("不支持Byte write "+e)}},e.prototype.write=function(e,t){var r=this.offset;switch(this.offset+=e,e){case 1:return this.dv.setUint8(r,t);case 2:return this.dv.setUint16(r,t);case 3:return this.dv.setUint8(r,t>>>16),this.dv.setUint16(r+1,65535&t);case 4:return this.dv.setUint32(r,t);default:throw new Error("不支持Byte write "+e)}},e.prototype.readToUint8=function(e){var t=new Uint8Array(this.dv.buffer,this.offset,e||this.unreadLength);return this.offset+=t.byteLength,t},e.prototype.readToBuffer=function(e){var t;return t=this.offset||e?this.dv.buffer.slice(this.offset,e?this.offset+e:void 0):this.dv.buffer,this.offset+=t.byteLength,t},e}(),Qr=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Jr=function(e,t){var r=t.audioObjectType,n=t.sampleRate,o=t.samplingFrequencyIndex,i=t.channelCount,a=t.numberOfRawDataBlocksInFrame,s=void 0===a?0:a,u=o;0===u&&n>0&&(u=Qr.indexOf(n));var c=e.byteLength+7,l=new Uint8Array(7);return l[0]=255,l[1]=241,l[2]=r-1<<6,l[2]|=u<<2,l[2]|=(4&i)>>2,l[3]=(3&i)<<6,l[3]|=(6144&c)>>11,l[4]=(2047&c)>>3,l[5]=(7&c)<<5,l[5]|=31,l[6]=252,l[6]|=3&s,$r.concatUint8(l,e)},en=function(e,t){return t<e.byteLength-1&&255===e[t]&&240==(246&e[t+1])},tn=function(e,t){return 1&e[t+1]?7:9},rn=function(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5},nn=function(){function e(e,t){this.num=e,this.len=t,this.offset=0}return e.fromByte=function(t,r){return new e(t.read(r),r<<3)},e.prototype.skip=function(e){this.offset+=e},e.prototype.read=function(e){var t=this.len-this.offset-e;if(t>=0){for(var r=0,n=0;n<e;n++)r+=1<<n;return this.offset+=e,this.num>>>t&r}return console.warn("bit 读取位数超过限制"),0},e}(),on=function(){function e(){}return e.createAnnexbStartCode=function(){return new Uint8Array([0,0,0,1])},e.createVVCAnnexbStartCode=function(){return new Uint8Array([0,0,1])},e.createAVCCStartCode=function(e){return new Uint8Array([e>>24&255,e>>16&255,e>>8&255,255&e])},e.extractAVCCNAL=function(e,t){for(var r,n=[],o=new $r(e.buffer,e.byteOffset,e.byteLength);o.unreadLength>t;){if((r=o.read(t+1))<=0||r>o.unreadLength){console.warn("extract avc nalu size wrong! lengthSizeMinusOne:",t,"size:",r);break}var i=o.offset-o.start;n.push(e.subarray(i,i+r)),o.skip(r)}return n},e.extractAnnexbNAL=function(e){for(var t=e.byteLength,r=[],n=0;n<t-3;)0===e[n]?0===e[n+1]?0===e[n+2]?0===e[n+3]?n++:1===e[n+3]&&n+4<t?(r.push({prefixStart:n,start:n+4}),n+=4):n+=4:1===e[n+2]?(r.push({prefixStart:n,start:n+3}),n+=3):n+=3:n+=2:n++;return r.length?r.map((function(t,n){var o=r[n+1];return o?e.subarray(t.start,o.prefixStart):e.subarray(t.start)})):[]},e}();const an=on;var sn,un,cn=(sn=function(e,t){return sn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},sn(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}sn(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});!function(e){e[e.UNUSED=0]="UNUSED",e[e.NON_IDR_SLICE=1]="NON_IDR_SLICE",e[e.DP_A=2]="DP_A",e[e.DP_B=3]="DP_B",e[e.DP_C=4]="DP_C",e[e.IDR=5]="IDR",e[e.SEI=6]="SEI",e[e.SPS=7]="SPS",e[e.PPS=8]="PPS",e[e.DIVIDER=9]="DIVIDER",e[e.SEQUENCE_END=10]="SEQUENCE_END",e[e.STREAM_END=11]="STREAM_END",e[e.FILL=12]="FILL"}(un||(un={}));var ln,pn=function(e){function t(t){var r=e.call(this)||this,n=new nn(t.read(1),8);return r.forbiddenZeroBit=n.read(1),r.nalRefIdc=n.read(2),r.nalType=n.read(5),r}return cn(t,e),t.extractNALType=function(e){return 31&e[0]},t.isSlice=function(e){var t=this.extractNALType(e);return t>=un.NON_IDR_SLICE&&t<=un.IDR},t}(an),fn=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(e){e[e.TRAIL_N=0]="TRAIL_N",e[e.TRAIL_R=1]="TRAIL_R",e[e.TSA_N=2]="TSA_N",e[e.TSA_R=3]="TSA_R",e[e.STSA_N=4]="STSA_N",e[e.STSA_R=5]="STSA_R",e[e.RADL_N=6]="RADL_N",e[e.RADL_R=7]="RADL_R",e[e.RASL_N=8]="RASL_N",e[e.RASL_R=9]="RASL_R",e[e.VCL_N10=10]="VCL_N10",e[e.VCL_R11=11]="VCL_R11",e[e.VCL_N12=12]="VCL_N12",e[e.VCL_R13=13]="VCL_R13",e[e.VCL_N14=14]="VCL_N14",e[e.VCL_R15=15]="VCL_R15",e[e.BLA_W_LP=16]="BLA_W_LP",e[e.BLA_W_RADL=17]="BLA_W_RADL",e[e.BLA_N_LP=18]="BLA_N_LP",e[e.IDR_W_RADL=19]="IDR_W_RADL",e[e.IDR_N_LP=20]="IDR_N_LP",e[e.CRA=21]="CRA",e[e.VPS=32]="VPS",e[e.SPS=33]="SPS",e[e.PPS=34]="PPS",e[e.ACCESS_UNIT_DELIMITER=35]="ACCESS_UNIT_DELIMITER",e[e.EOS=36]="EOS",e[e.EOB=37]="EOB",e[e.FILLER_DATA=38]="FILLER_DATA",e[e.SEI=39]="SEI",e[e.SEI_SUFFIX=40]="SEI_SUFFIX",e[e.INVALID=64]="INVALID"}(ln||(ln={}));var dn,hn=function(e){function t(t){var r=e.call(this)||this,n=new nn(t.read(2),16);return r.forbiddenZeroBit=n.read(1),r.nalType=n.read(6),r.nhLayerId=n.read(6),r.nhTimeId=n.read(3),r}return fn(t,e),t.extractNALType=function(e,t){return void 0===t&&(t=0),(126&e[t])>>1},t.isNonRefNALType=function(e){switch(e){case ln.TRAIL_N:case ln.STSA_N:case ln.RADL_N:case ln.RASL_N:case ln.VCL_N10:case ln.VCL_N12:case ln.VCL_N14:return!0;default:return!1}},t.isNonRef=function(e){return this.isNonRefNALType(this.extractNALType(e))},t.isSlice=function(e){var t=this.extractNALType(e);return t>=ln.TRAIL_N&&t<=ln.CRA},t.littleEndian=function(){var e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0]},t.parseHVCVideoData=function(e,t){for(var r=e.byteLength,n=new DataView(e.buffer,e.byteOffset,e.byteLength),o=[],i=0,a=0+t,s=this.littleEndian,u=!1;i<r;){if(i+4>=r){console.warn("parseHVCVideoData Malformed Nalu near timestamp "+a+", offset = "+i+", dataSize = "+r);break}var c=n.getUint32(i,!s);if(c>r-4)return void console.warn("parseHVCVideoData Malformed Nalus near timestamp "+a+", NaluSize > DataSize!");var l=n.getUint8(i+4)>>1&63;l>=16&&l<=23&&(u=!0);var p=0+i+4,f=p+c,d={type:l,data:e.subarray(p,f)};o.push(d),i+=4+c}return{keyframe:u,units:o}},t}(an),vn=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(e){e[e.VVC_TRAIL_NUT=0]="VVC_TRAIL_NUT",e[e.VVC_STSA_NUT=1]="VVC_STSA_NUT",e[e.VVC_RADL_NUT=2]="VVC_RADL_NUT",e[e.VVC_RASL_NUT=3]="VVC_RASL_NUT",e[e.VVC_RSV_VCL_4=4]="VVC_RSV_VCL_4",e[e.VVC_RSV_VCL_5=5]="VVC_RSV_VCL_5",e[e.VVC_RSV_VCL_6=6]="VVC_RSV_VCL_6",e[e.VVC_IDR_W_RADL=7]="VVC_IDR_W_RADL",e[e.VVC_IDR_N_LP=8]="VVC_IDR_N_LP",e[e.VVC_CRA_NUT=9]="VVC_CRA_NUT",e[e.VVC_GDR_NUT=10]="VVC_GDR_NUT",e[e.VVC_RSV_IRAP_11=11]="VVC_RSV_IRAP_11",e[e.VVC_OPI_NUT=12]="VVC_OPI_NUT",e[e.VVC_DCI_NUT=13]="VVC_DCI_NUT",e[e.VVC_VPS_NUT=14]="VVC_VPS_NUT",e[e.VVC_SPS_NUT=15]="VVC_SPS_NUT",e[e.VVC_PPS_NUT=16]="VVC_PPS_NUT",e[e.VVC_PREFIX_APS_NUT=17]="VVC_PREFIX_APS_NUT",e[e.VVC_SUFFIX_APS_NUT=18]="VVC_SUFFIX_APS_NUT",e[e.VVC_PH_NUT=19]="VVC_PH_NUT",e[e.VVC_AUD_NUT=20]="VVC_AUD_NUT",e[e.VVC_EOS_NUT=21]="VVC_EOS_NUT",e[e.VVC_EOB_NUT=22]="VVC_EOB_NUT",e[e.VVC_PREFIX_SEI_NUT=23]="VVC_PREFIX_SEI_NUT",e[e.VVC_SUFFIX_SEI_NUT=24]="VVC_SUFFIX_SEI_NUT",e[e.VVC_FD_NUT=25]="VVC_FD_NUT",e[e.VVC_RSV_NVCL_26=26]="VVC_RSV_NVCL_26",e[e.VVC_RSV_NVCL_27=27]="VVC_RSV_NVCL_27",e[e.VVC_UNSPEC_28=28]="VVC_UNSPEC_28",e[e.VVC_UNSPEC_29=29]="VVC_UNSPEC_29",e[e.VVC_UNSPEC_30=30]="VVC_UNSPEC_30",e[e.VVC_UNSPEC_31=31]="VVC_UNSPEC_31"}(dn||(dn={}));var yn=function(e){function t(t){var r=e.call(this)||this,n=new nn(t.read(2),16);return r.forbiddenZeroBit=n.read(1),r.nalType=n.read(6),r.nhLayerId=n.read(6),r.nhTimeId=n.read(3),r}return vn(t,e),t.parseNaluHeader=function(e){return{nuh_layer_id:63&e[0],nal_unit_type:e[1]>>3&31,nuh_temporal_id_plus1:7&e[1]}},t.extractNALType=function(e){return this.parseNaluHeader(e).nal_unit_type},t.isNonRefNALType=function(e){switch(e){case dn.VVC_IDR_W_RADL:case dn.VVC_IDR_N_LP:return!0;default:return!1}},t.isNonRef=function(e){return this.isNonRefNALType(this.extractNALType(e))},t.isSlice=function(e){var t=this.extractNALType(e);return t<=dn.VVC_RASL_NUT||t>=dn.VVC_IDR_W_RADL&&t<=dn.VVC_GDR_NUT},t.littleEndian=function(){var e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0]},t.parseHVCVideoData=function(e,t){for(var r=e.byteLength,n=new DataView(e.buffer,e.byteOffset,e.byteLength),o=[],i=0,a=0+t,s=this.littleEndian,u=!1;i<r;){if(i+4>=r){console.warn("parseHVCVideoData Malformed Nalu near timestamp "+a+", offset = "+i+", dataSize = "+r);break}var c=n.getUint32(i,!s);if(c>r-4)return void console.warn("parseHVCVideoData Malformed Nalus near timestamp "+a+", NaluSize > DataSize!");var l=n.getUint8(i+4)>>1&63;l>=16&&l<=23&&(u=!0);var p=0+i+4,f=p+c,d={type:l,data:e.subarray(p,f)};o.push(d),i+=4+c}return{keyframe:u,units:o}},t}(an),_n=r(307),mn=r.n(_n);function gn(e,t){var r=!1;return Object.keys(t).forEach((function(n){mn()(e[n],t[n])||(e[n]=t[n],r=!0)})),r}var bn,En,Tn,wn,Sn,On,An,Pn,Rn=new Hr("demuxer"),xn=function(){function e(e){this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}return e.prototype.loadWord=function(){var e=this.data,t=this.bytesAvailable,r=e.byteLength-t,n=new Uint8Array(4),o=Math.min(4,t);if(0===o)throw new Error("no bytes available");n.set(e.subarray(r,r+o)),this.word=new DataView(n.buffer).getUint32(0),this.bitsAvailable=8*o,this.bytesAvailable-=o},e.prototype.skipBits=function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,e-=(t=e>>3)<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},e.prototype.readBits=function(e){var t=Math.min(this.bitsAvailable,e),r=this.word>>>32-t;return e>32&&Rn.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),(t=e-t)>0&&this.bitsAvailable?r<<t|this.readBits(t):r},e.prototype.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},e.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},e.prototype.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},e.prototype.readUByte=function(){return this.readBits(8)},e.prototype.readUShort=function(){return this.readBits(16)},e.prototype.readUInt=function(){return this.readBits(32)},e.prototype.skipScalingList=function(e){var t,r=8,n=8;for(t=0;t<e;t++)0!==n&&(n=(r+this.readEG()+256)%256),r=0===n?r:n},e}(),Cn=[100,110,122,244,44,83,86,118,128,138,144],Nn=[[0,1],[1,1],[12,11],[10,11],[16,11],[40,33],[24,11],[20,11],[32,11],[80,33],[18,11],[15,11],[64,33],[160,99],[4,3],[3,2],[2,1]],Ln=function(){function e(t){this.generalProfileSpace=0,this.generalTierFlag=0,this.generalProfileIdc=0,this.generalProfileCompatibility=0,this.crop=0,this.cropLeft=0,this.cropRight=0,this.cropTop=0,this.cropBottom=0,this.pixelRatio=[],this.codec="";var r,n,o=new xn(t);if(this.generalProfileIdc=o.readUByte(),this.generalProfileCompatibility=o.readUByte(),this.generalLevelIdc=o.readUByte(),this.spsId=o.readUEG(),this.codec=e.generateCodec(this),Cn.indexOf(this.generalProfileIdc)>-1){if(this.chromaFormatIdc=o.readUEG(),3===this.chromaFormatIdc&&o.skipBits(1),o.skipUEG(),o.skipUEG(),o.skipBits(1),o.readBits(1))for(r=0,n=3!==this.chromaFormatIdc?8:12;r<n;r++)o.readBits(1)&&(r<6?o.skipScalingList(16):o.skipScalingList(64))}else this.chromaFormatIdc=1;o.skipUEG();var i=o.readUEG();if(0===i)o.skipUEG();else if(1===i)for(o.skipBits(1),o.skipEG(),o.skipEG(),r=0,n=o.readUEG();r<n;r++)o.skipEG();o.skipUEG(),o.skipBits(1);var a=o.readUEG()+1,s=o.readUEG()+1,u=o.readBits(1);if(u||o.skipBits(1),this.height=s*(2-u),o.skipBits(1),this.crop=o.readBits(1),this.crop){var c=1<<(1===this.chromaFormatIdc||2===this.chromaFormatIdc?1:0),l=2-u<<(1===this.chromaFormatIdc?1:0);this.cropLeft=o.readUEG()*c,this.cropRight=o.readUEG()*c,this.cropTop=o.readUEG()*l,this.cropBottom=o.readUEG()*l}if(this.width=16*a-(this.cropRight+this.cropLeft),this.height=16*s-(this.cropTop+this.cropBottom),o.readBits(1)&&o.readBits(1)){var p=o.readUByte();255===p?(this.pixelRatio[0]=o.readUByte()<<8|o.readUByte(),this.pixelRatio[1]=o.readUByte()<<8|o.readUByte()):p<Nn.length&&(this.pixelRatio=Nn[p])}}return e.generateCodec=function(e){return"avc1."+[e.generalProfileIdc,e.generalProfileCompatibility,e.generalLevelIdc].map((function(e){return(t=e.toString(16)).length<2?"0"+t:t;var t})).join("")},e}(),Dn=[1,2,2,1],kn=[1,2,1,1],In=function(){function e(t){var r=this;this.generalProfileSpace=0,this.generalTierFlag=0,this.generalProfileIdc=0,this.generalProfileCompatibilityFlags=[],this.generalConstraintIndicatorFlags=[],this.subLayerProfilePresentFlags=[],this.subLayerLevelPresentFlags=[],this.separateColourPlaneFlag=0,this.pixelRatio=[],this.codec="",this.checkProfileIdc=function(e){return r.generalProfileIdc===e||r.generalProfileCompatibilityFlags[e]};var n,o=new xn(t);for(this.vpsId=o.readBits(4),this.maxSubLayersMinus1=o.readBits(3),this.temporalIdNestingFlag=o.readBits(1),this.generalProfileSpace=o.readBits(2),this.generalTierFlag=o.readBits(1),this.generalProfileIdc=o.readBits(5),n=0;n<32;n++)this.generalProfileCompatibilityFlags[n]=o.readBits(1),0===this.generalProfileIdc&&n>0&&this.generalProfileCompatibilityFlags[n]&&(this.generalProfileIdc=n);for(n=0;n<6;n++)this.generalConstraintIndicatorFlags.push(o.readUByte());for(this.generalLevelIdc=o.readUByte(),n=0;n<this.maxSubLayersMinus1;n++)this.subLayerProfilePresentFlags[n]=o.readBits(1),this.subLayerLevelPresentFlags[n]=o.readBits(1);for(this.maxSubLayersMinus1>0&&o.skipBits(2*(8-this.maxSubLayersMinus1)),n=0;n<this.maxSubLayersMinus1;n++)this.subLayerProfilePresentFlags[n]&&o.skipBits(48),this.subLayerLevelPresentFlags[n]&&o.readUByte();if(this.spsId=o.readUEG(),this.codec=e.generateCodec(this),this.chromaFormatIdc=o.readUEG(),3===this.chromaFormatIdc&&(this.separateColourPlaneFlag=o.readBits(1)),this.separateColourPlaneFlag&&(this.chromaFormatIdc=0),this.width=o.readUEG(),this.height=o.readUEG(),o.readBits(1)){var i=Dn[this.chromaFormatIdc],a=kn[this.chromaFormatIdc],s=o.readUEG()*i,u=o.readUEG()*i,c=o.readUEG()*a,l=o.readUEG()*a;this.width-=s+u,this.height-=c+l}}return e.generateCodec=function(e){var t=["hvc1"],r=e.generalProfileSpace;t.push((r>0&&r<4?String.fromCharCode(64+r):"")+e.generalProfileIdc.toString()),t.push(e.generalProfileCompatibilityFlags.reverse().reduce((function(e,t){return e<<1|t}),0).toString(16)),t.push((e.generalTierFlag?"H":"L")+e.generalLevelIdc);for(var n=!1,o=[],i=5;i>=0;i--){var a=e.generalConstraintIndicatorFlags[i];(a||n)&&(o.unshift(a.toString(16)),n=!0)}return t.concat(o).join(".")},e}();!function(e){e[e.NONE=-16]="NONE",e[e.DEFAULT=0]="DEFAULT",e[e.NONREF=8]="NONREF",e[e.BIDIR=16]="BIDIR",e[e.NONINTRA=24]="NONINTRA",e[e.NONKEY=32]="NONKEY",e[e.ALL=48]="ALL"}(bn||(bn={})),function(e){e[e.ABORTED=1]="ABORTED",e[e.NETWORK=2]="NETWORK",e[e.DECODE=3]="DECODE",e[e.SRC_NOT_SUPPORTED=4]="SRC_NOT_SUPPORTED",e[e.PARSER=1001]="PARSER",e[e.WEBGL_NOT_SUPPORTED=10005]="WEBGL_NOT_SUPPORTED",e[e.COROUTINE=20001]="COROUTINE",e[e.BUFFERING=20003]="BUFFERING",e[e.RENDERER=20005]="RENDERER"}(En||(En={})),function(e){e[e.HAVE_NOTHING=0]="HAVE_NOTHING",e[e.HAVE_METADATA=1]="HAVE_METADATA",e[e.HAVE_CURRENT_DATA=2]="HAVE_CURRENT_DATA",e[e.HAVE_FUTURE_DATA=3]="HAVE_FUTURE_DATA",e[e.HAVE_ENOUGH_DATA=4]="HAVE_ENOUGH_DATA"}(Tn||(Tn={})),function(e){e[e.NETWORK_EMPTY=0]="NETWORK_EMPTY",e[e.NETWORK_IDLE=1]="NETWORK_IDLE",e[e.NETWORK_LOADING=2]="NETWORK_LOADING",e[e.NETWORK_NO_SOURCE=3]="NETWORK_NO_SOURCE"}(wn||(wn={})),function(e){e.VIDE="vide",e.SOUN="soun"}(On||(On={})),function(e){e[e.FLV=0]="FLV",e[e.MP4=1]="MP4",e[e.HLS=2]="HLS",e[e.MPEGTS=3]="MPEGTS",e[e.UNKNOWN=4]="UNKNOWN"}(An||(An={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.VIDEO=1]="VIDEO",e[e.AUDIO=2]="AUDIO"}(Pn||(Pn={}));var Un,Mn=((Sn={})[On.VIDE]=Pn.VIDEO,Sn[On.SOUN]=Pn.AUDIO,Sn);!function(e){e[e.DEGRADATION_PRIORITY_MASK=65535]="DEGRADATION_PRIORITY_MASK",e[e.IS_NON_SYNC=65536]="IS_NON_SYNC",e[e.PADDING_MASK=917504]="PADDING_MASK",e[e.REDUNDANCY_MASK=3145728]="REDUNDANCY_MASK",e[e.DEPENDED_MASK=12582912]="DEPENDED_MASK",e[e.DEPENDS_MASK=50331648]="DEPENDS_MASK",e[e.DEPENDS_NO=33554432]="DEPENDS_NO",e[e.DEPENDS_YES=16777216]="DEPENDS_YES"}(Un||(Un={}));var jn=function(e,t){var r=e.offset;this.start=t,this.size=e.read(4),this.type=String.fromCharCode(e.read(1),e.read(1),e.read(1),e.read(1)).trim(),1===this.size&&(this.size=e.read(8)),this.length=e.offset-r},Fn=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vn=function(){return Vn=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Vn.apply(this,arguments)},Bn=new Date("1904-01-01T00:00:00Z").getTime(),Wn=function(){function e(e,t){this.children=[],this.isContainer=!1,this.toStandardTime=function(e){return e?Bn+1e3*e:e},this.header=e}return e.prototype.append=function(e){this.children.push(e)},e.mapBoxToJSON=function(t){return Vn({box:t},t.children.reduce((function(t,r){var n=r.header.type,o=t[n],i=e.mapBoxToJSON(r);return o?Array.isArray(o)?o.push(i):t[n]=[o,i]:t[n]=i,t}),{}))},e}(),Gn=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.version=r.read(1),n.flag=r.read(3),n}return Fn(t,e),t}(Wn),Hn=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),zn=function(e){function t(t,r){var n=e.call(this,t,r)||this;n.sps=[],n.pps=[],n.configVersion=r.read(1),n.generalProfileIdc=r.read(1),n.generalProfileCompatibility=r.read(1),n.generalLevelIdc=r.read(1),n.lengthSizeMinusOne=3&r.read(1),n.numOfSequenceParameterSets=31&r.read(1);var o,i=0,a=[];for(i=0;i<n.numOfSequenceParameterSets;i++){for(o=r.read(2),a=[];o--;)a.push(r.read(1));n.sps.push(new Uint8Array(a))}for(n.numOfPictureParameterSets=31&r.read(1),i=0;i<n.numOfPictureParameterSets;i++){for(o=r.read(2),a=[];o--;)a.push(r.read(1));n.pps.push(new Uint8Array(a))}return n.codec=Ln.generateCodec(n),n}return Hn(t,e),t}(Wn),Xn=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yn=function(e){function t(t,r){var n,o=e.call(this,t,r)||this;o.nalus=[],o.vps=[],o.sps=[],o.pps=[],o.sei=[],o.configVersion=r.read(1),n=new nn(r.read(1),8),o.generalProfileSpace=n.read(2),o.generalTierFlag=n.read(1),o.generalProfileIdc=n.read(5),n=new nn(r.read(4),32),o.generalProfileCompatibilityFlags=Array.from(new Array(32)).map((function(){return n.read(1)})),o.generalConstraintIndicatorFlags=Array.from(new Array(6)).map((function(){return r.read(1)})),o.generalLevelIdc=r.read(1),o.minSpatialSegmentationIdc=4095&r.read(2),o.parallelismType=3&r.read(1),o.chromaFormatIdc=3&r.read(1),o.bitDepthLumaMinus8=7&r.read(1),o.bitDepthChromaMinus8=7&r.read(1),o.avgFrameRate=r.read(2),n=new nn(r.read(1),8),o.constantFrameRate=n.read(2),o.numTemporalLayers=n.read(3),o.temporalIdNested=n.read(1),o.lengthSizeMinusOne=n.read(2),o.nalus=[];for(var i=r.read(1),a=0;a<i;a++){var s=[],u=(n=new nn(r.read(1),8)).read(1);n.read(1);for(var c=n.read(6),l=r.read(2),p=0;p<l;p++)s.push(new Uint8Array(r.read(2)).map((function(){return r.read(1)})));o.nalus.push({completeness:u,type:c,data:s}),c===ln.VPS?s.forEach((function(e){return o.vps.push(e)})):c===ln.SPS?s.forEach((function(e){return o.sps.push(e)})):c===ln.PPS?s.forEach((function(e){return o.pps.push(e)})):c===ln.SEI&&s.forEach((function(e){return o.sei.push(e)}))}return o.codec=In.generateCodec(o),o}return Xn(t,e),t}(Wn),qn=function(e){for(var t=e.byteLength,r=[],n=1;n<t-2;)0===e[n]&&0===e[n+1]&&3===e[n+2]?(n+=2,r.push(n)):n++;if(0===r.length)return e;var o=t-r.length,i=new Uint8Array(o),a=0;for(n=0;n<o;a++,n++)a===r[0]&&(a++,r.shift()),i[n]=e[a];return i},Kn=function(){var e=this;this._eventMap={},this.listeners=function(t){return e._eventMap[t]||[]},this.emit=function(t,r){var n=e._eventMap[t];return!!Array.isArray(n)&&(n.forEach((function(e){return e(r)})),!0)},this.off=function(t,r){var n=e._eventMap[t];return Array.isArray(n)&&(e._eventMap[t]=n.filter((function(e){return e!==r}))),e},this.removeAllListeners=function(t){return void 0===t?e._eventMap={}:e._eventMap[t]&&(e._eventMap[t]=[]),e},this.on=function(t,r){return e._eventMap[t]?e._eventMap[t].push(r):e._eventMap[t]=[r],e},this.once=function(t,r){var n=function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];e.off(t,n),r.apply(e,o)};return e.on(t,n),e},this.proxy=function(t,r){r.forEach((function(r){e.on(r,(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.unshift(r),t.emit.apply(t,e)}))}))},this.proxyOnce=function(t,r){r.forEach((function(r){e.once(r,(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.unshift(r),t.emit.apply(t,e)}))}))}};const Zn=Kn;var $n,Qn=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(e){e[e.IDLE=0]="IDLE",e[e.LOADING=1]="LOADING",e[e.SUSPENGING=2]="SUSPENGING",e[e.ERROR=3]="ERROR"}($n||($n={}));var Jn=function(e){function t(t){return e.call(this,t)||this}return Qn(t,e),t}(Error),eo=function(e){function t(t){void 0===t&&(t={});var r=e.call(this)||this;return r.timeout=15e3,r.total=1/0,r.offset=0,r.status=$n.IDLE,r.url="",r._handleError=function(e){"AbortError"!==e.name&&(r._changeStatus($n.ERROR),r.emit("error",{code:En.NETWORK,message:e.message,origin:e}))},r.timeout=t.timeout||r.timeout,r}return Qn(t,e),Object.defineProperty(t.prototype,"eof",{get:function(){return this.offset===this.total},enumerable:!1,configurable:!0}),t.prototype._changeStatus=function(e){this.status!==e&&(Rn.log("loader status changed: ".concat($n[this.status]," -> ").concat($n[e])),this.status=e)},t.prototype.jump=function(e){this.offset=e},t.prototype.load=function(e,t,r){return this.reset(),this.url=e,this.loadRange(t,r)},t.prototype.resume=function(){return this.loadRange(this.offset)},t.prototype.suspend=function(){var e=this.status;this._abort(),e===$n.LOADING&&(this._changeStatus($n.SUSPENGING),this.emit("suspend",void 0))},t.prototype.abort=function(){var e=this.status;this._abort(),e!==$n.SUSPENGING&&e!==$n.LOADING||this.emit("abort",void 0)},t.prototype.reset=function(){this.abort(),this.offset=0,this.total=1/0,this.url=""},t.prototype.destroy=function(){this.removeAllListeners(),this.reset()},t}(Zn),to={isIos:!1,isDingtalk:!1,isQQBrowser:!1},ro=(window.navigator.userAgent||"").toLowerCase();/(iPhone\sOS)\s([\d_]+)/i.test(ro)&&(to.isIos=!0),ro.indexOf("dingtalk")>-1?to.isDingtalk=!0:ro.indexOf("qqbrowser")>-1&&(to.isQQBrowser=!0);var no,oo=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),io=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.controller=null,t.timer=-1,t._abort=function(){clearTimeout(t.timer),t.controller&&!t.controller.signal.aborted&&(t.controller.abort(),t.controller=null),t._changeStatus($n.IDLE)},t.triggerTimeout=function(){t._abort(),t._handleError(new Jn("加载超时，请重试"))},t}return oo(t,e),t.isSupported=function(){return to.isIos&&(to.isDingtalk||to.isQQBrowser)?(console.log("ios","isDingtalk",to.isDingtalk,"isQQBrowser",to.isQQBrowser),!1):"undefined"!=typeof AbortController&&"undefined"!=typeof ReadableStream},t.prototype.loadRange=function(e,t){var r=this;if(void 0===e&&(e=0),void 0===t&&(t=1/0),!this.url||e>=this.total)return Promise.resolve(!1);if(this.status===$n.LOADING||this.status===$n.ERROR)return Promise.resolve(!1);Rn.info("执行load, ".concat(this.total," from=").concat(e," to=").concat(t," url=").concat(this.url)),this.abort();var n=new Headers,o=e>0||t<1/0;return o&&(t=Math.min(this.total-1,t),n.set("Range","bytes=".concat(e,"-").concat(t===1/0?"":t))),this._changeStatus($n.LOADING),this.controller=new AbortController,this.emit("loadstart",void 0),this.timer=setTimeout(this.triggerTimeout,this.timeout),fetch(this.url,{method:"GET",headers:n,signal:this.controller.signal}).then((function(t){if(clearTimeout(r.timer),t.status>=200&&t.status<300){if(r.offset=e,o){var n=t.headers.get("Content-Range")||"";r.total=Number(n.split("/")[1])||r.total}else r.total=Number(t.headers.get("Content-Length"))||r.total;if(t.body){var i=t.body.getReader(),a=function(){return i.read().then((function(e){return e.done?(r.total=r.total||r.offset,r.controller=null,r._changeStatus($n.IDLE),r.emit("loadend",void 0),!0):(r.offset+=e.value.byteLength,r.emit("progress",{offset:r.offset-e.value.byteLength,data:e.value}),a())}))};return a()}if(t.arrayBuffer)return t.arrayBuffer().then((function(e){return r.offset+=e.byteLength,r.emit("progress",{offset:r.offset-e.byteLength,data:new Uint8Array(e)}),r.controller=null,r._changeStatus($n.IDLE),r.emit("loadend",void 0),!0}))}var s=new Jn("媒体流数据不存在: ".concat(r.url));throw s.response=t,s})).catch((function(e){return clearTimeout(r.timer),r._handleError(e),!1}))},t}(eo),ao=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),so=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.xhr=null,t._timer=-1,t._resolve=function(e){},t.triggerTimeout=function(){t._abort(),t._handleError(new Error("加载超时，请重试"))},t}return ao(t,e),t.prototype._abort=function(){var e=this.xhr;e&&(e.onerror=null,e.onprogress=null,e.onloadend=null,e.onreadystatechange=null,e.abort(),this.xhr=null,this._resolve(!1)),this._changeStatus($n.IDLE)},t.prototype.loadRange=function(e,t){var r=this;return void 0===e&&(e=0),void 0===t&&(t=1/0),!this.url||e>=this.total||this.status===$n.LOADING||this.status===$n.ERROR?Promise.resolve(!1):(this.abort(),new Promise((function(n,o){r.xhr=new XMLHttpRequest,r._resolve=n;var i=r.xhr,a=e>0||t<1/0;i.open("GET",r.url),a&&i.setRequestHeader("Range","bytes=".concat(e,"-").concat(t===1/0?"":t)),i.onreadystatechange=function(){if(i.readyState===i.HEADERS_RECEIVED&&i.status>=200&&i.status<300)if(a){var e=i.getResponseHeader("Content-Range")||"";r.total=Number(e.split("/")[1])||r.total}else r.total=Number(i.getResponseHeader("Content-Length"))||r.total;i.readyState>=i.HEADERS_RECEIVED&&clearTimeout(r._timer)},r.offset=e;var s=0,u=function(e){var t,n=i.responseText,o=n.length,u=s,c=r.offset,l=o-u;l>0&&(r.offset+=l),!a&&e&&r.total===1/0&&(r.total=r.offset),l>0&&(s=o,r.emit("progress",{offset:c,data:(t=n.substring(u,o),new Uint8Array(t.length).map((function(e,r){return t.charCodeAt(r)})))}))};i.timeout=r.timeout,i.onprogress=function(){u(!1)},i.onloadend=function(){u(!0),r.xhr=null,r._changeStatus($n.IDLE),r.emit("loadend",void 0),n(!0)},i.onerror=function(e){r.xhr=null;var t=new Error(e.constructor.name);r._handleError(t),o(t)},i.overrideMimeType("text/plain; charset=x-user-defined"),r._changeStatus($n.LOADING),r.emit("loadstart",void 0),r._timer=setTimeout(r.triggerTimeout,r.timeout),i.send()})))},t}(eo),uo=io.isSupported()?io:so,co=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),lo=function(e){function t(t){var r=e.call(this)||this;return r.skipFrame=bn.DEFAULT,r.metadata=null,r.options=t,r.onProgress=r.onProgress.bind(r),r.onLoadEnd=r.onLoadEnd.bind(r),r.originLoader=new uo(r.options),r.customLoader=t.loader,r.loader.on("progress",r.onProgress),r.loader.on("loadend",r.onLoadEnd),r.skipFrame=t.skipFrame||bn.DEFAULT,r}return co(t,e),Object.defineProperty(t.prototype,"loader",{get:function(){return this.customLoader||this.originLoader},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return this.loader.url},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this.loader.status},enumerable:!1,configurable:!0}),t.probe=function(e){throw new Error("parser should implements static probe")},t.prototype.onProgress=function(e){},t.prototype.onLoadEnd=function(){},t.prototype.load=function(e){return this.reset(),this.loader.load(e)},t.prototype.suspend=function(){return this.loader.suspend()},t.prototype.resume=function(){return this.loader.resume()},t.prototype.reset=function(){this.loader.reset(),this.metadata=null},t.prototype.destroy=function(){this.reset(),this.loader.off("progress",this.onProgress),this.loader.off("loadend",this.onLoadEnd),this.originLoader.destroy(),this.removeAllListeners()},t}(Zn),po=function(){function e(e){this.signature=String.fromCharCode(e.read(1),e.read(1),e.read(1)),this.version=e.read(1);var t=e.read(1);this.size=e.read(4);var r=new nn(t,8);r.read(5),this.hasAudio=!!r.read(1),r.read(1),this.hasVideo=!!r.read(1)}return e.BUFFER_LENGTH=9,e}();!function(e){e[e.AUDIO=8]="AUDIO",e[e.VIDEO=9]="VIDEO",e[e.SCRIPT=18]="SCRIPT"}(no||(no={}));var fo,ho=function(){function e(e){this.type=e.read(1),this.size=e.read(3),this.dts=e.read(3),this.dts|=e.read(1)<<24,e.skip(3)}return e.BUFFER_LENGTH=11,e}();!function(e){e[e.PCM=0]="PCM",e[e.ADPCM=1]="ADPCM",e[e.MP3=2]="MP3",e[e.PCM_LE=3]="PCM_LE",e[e.NELLYMOSER_16KHZ_MONO=4]="NELLYMOSER_16KHZ_MONO",e[e.NELLYMOSER_8KHZ_MONO=5]="NELLYMOSER_8KHZ_MONO",e[e.NELLYMOSER=6]="NELLYMOSER",e[e.PCM_ALAW=7]="PCM_ALAW",e[e.PCM_MULAW=8]="PCM_MULAW",e[e.AAC=10]="AAC",e[e.SPEEX=11]="SPEEX"}(fo||(fo={}));var vo,yo,_o=[5512,11025,22050,44100],mo=[8,16];!function(e){e[e.MONO=0]="MONO",e[e.STEREO=1]="STEREO"}(vo||(vo={})),function(e){e[e.ADTS_HEADER=0]="ADTS_HEADER",e[e.RAW=1]="RAW"}(yo||(yo={}));var go,bo=function(){function e(e){var t=new nn(e.read(1),8);this.codecId=t.read(4),this.sampleRate=_o[t.read(2)],this.sampleSize=mo[t.read(1)],this.soundType=t.read(1),this.packetType=e.read(1),this.data=e.readToUint8()}return e.readAudioSpecificConfig=function(e){var t=new nn(e.read(2),16),r=t.read(5),n=t.read(4),o=t.read(4);return{audioObjectType:r,sampleRate:Qr[n],samplingFrequencyIndex:n,channelCount:o}},e}();function Eo(e){var t=e.read(2);return Array.from(Array(t)).map((function(){var t=e.read(1);return t>0?String.fromCharCode(t):""})).join("")}function To(e){var t=Eo(e),r=wo(e);return{key:t,value:r.value,objectEnd:r.objectEnd}}function wo(e){var t={value:null,objectEnd:!1},r=e.read(1);switch(r){case go.NUMBER:t.value=e.readFloat(8);break;case go.BOOLEAN:t.value=!!e.read(1);break;case go.LONG_STRING:case go.STRING:t.value=Eo(e);break;case go.OBJECT_START:t.value=function(e){for(var t={};e.unreadLength>0;){var r=To(e);if(r.objectEnd)break;t[r.key]=r.value}return t}(e);break;case go.ECMA_ARRAY:t.value=function(e){for(var t=e.read(4),r={};t-- >0;){var n=To(e);r[n.key]=n.value}return r}(e);break;case go.OBJECT_END:t.objectEnd=!0;break;case go.STRICT_ARRAY:t.value=function(e){for(var t=e.read(4),r=[];t-- >0;){var n=wo(e);r.push(n.value)}return r}(e);break;case go.DATE:t.value=new Date(e.readFloat(8)+60*e.readInt(2)+1e3);break;default:console.warn("unknown AMF value type",r)}return t}!function(e){e[e.NUMBER=0]="NUMBER",e[e.BOOLEAN=1]="BOOLEAN",e[e.STRING=2]="STRING",e[e.OBJECT_START=3]="OBJECT_START",e[e.NULL=5]="NULL",e[e.UNDEFINED=6]="UNDEFINED",e[e.REFERENCE=7]="REFERENCE",e[e.ECMA_ARRAY=8]="ECMA_ARRAY",e[e.OBJECT_END=9]="OBJECT_END",e[e.STRICT_ARRAY=10]="STRICT_ARRAY",e[e.DATE=11]="DATE",e[e.LONG_STRING=12]="LONG_STRING"}(go||(go={}));var So,Oo,Ao,Po=function(e){this.name=wo(e).value,this.value=wo(e).value};!function(e){e[e.KEY=1]="KEY",e[e.INTER=2]="INTER",e[e.DISP_INTER=3]="DISP_INTER",e[e.GENERATED_KEY=4]="GENERATED_KEY",e[e.VIDEO_INFO_CMD=5]="VIDEO_INFO_CMD"}(So||(So={})),function(e){e[e.JPEG=1]="JPEG",e[e.H263=2]="H263",e[e.SCREEN=3]="SCREEN",e[e.VP6=4]="VP6",e[e.VP6A=5]="VP6A",e[e.SCREEN2=6]="SCREEN2",e[e.H264=7]="H264",e[e.REALH263=8]="REALH263",e[e.MPEG4=9]="MPEG4",e[e.H265=12]="H265"}(Oo||(Oo={})),function(e){e[e.AVC_SEQUENCE_HEADER=0]="AVC_SEQUENCE_HEADER",e[e.AVC_NALU=1]="AVC_NALU",e[e.AVC_END=2]="AVC_END"}(Ao||(Ao={}));var Ro,xo=function(e){var t=new nn(e.read(1),8);this.type=t.read(4),this.codecId=t.read(4),this.packetType=e.read(1),this.cts=e.read(3)+4286578688^4286578688,this.data=e.readToUint8()},Co=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),No=1e3,Lo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.header=null,t.flvMetadata=null,t.videoTrackMeta=null,t.audioTrackMeta=null,t.unhandleBuffer=null,t.cachePackets=[],t.videoLoaded=!1,t.baseVideoPTS=0,t.baseVideoDTS=0,t.audioLoaded=!1,t.baseAudioPTS=0,t.baseAudioDTS=0,t.isHVCC=!1,t.formatType=An.FLV,t}return Co(t,e),t.probe=function(e){return!(e.byteLength<9)&&"FLV"===new po(new $r(e.buffer,e.byteOffset,e.byteLength)).signature},t.prototype.parse=function(e,t){var r=[];if(!e.byteLength)return r;this.unhandleBuffer&&(e=$r.concat(this.unhandleBuffer,e),t-=this.unhandleBuffer.byteLength,this.unhandleBuffer=null);var n=new $r(e);for(!this.header&&n.unreadLength>=po.BUFFER_LENGTH&&(this.header=new po(n),!1===this.header.hasVideo&&(this.header.hasVideo=!0),n.skip(this.header.size-po.BUFFER_LENGTH));n.unreadLength>4+ho.BUFFER_LENGTH;){n.skip(4);var o=new ho(n);if(!(n.unreadLength>=o.size)){n.back(4+ho.BUFFER_LENGTH);break}var i=new $r(n.buffer,n.offset,o.size);switch(n.skip(o.size),o.type){case no.VIDEO:r=r.concat(this.parseVideoBody(o,i,n.offset+t));break;case no.AUDIO:r=r.concat(this.parseAudioBody(o,i,n.offset+t));break;case no.SCRIPT:this.parseScriptBody(o,i);break;default:return Rn.warn("unknown tag type",o.type),r}}return this.unhandleBuffer=n.unreadLength?n.readToBuffer():null,r},t.prototype.checkMetadata=function(){var e=this.flvMetadata,t=this.header;if(console.log("checkMetadata flvMetadata:",e,"header:",t,", this.metadata:",this.metadata),t&&!this.metadata){var r=[];if(t.hasVideo){if(!this.videoTrackMeta||!this.videoLoaded)return void console.log("checkMetadata hasVideo no this.videoTrackMeta",this.videoTrackMeta,", this.videoLoaded",this.videoLoaded);this.videoTrackMeta.baseDTS=this.baseVideoDTS,this.videoTrackMeta.basePTS=this.baseVideoPTS,this.videoTrackMeta.fps=null==e?void 0:e.framerate,r.push(this.videoTrackMeta)}if(t.hasAudio){if(!this.audioTrackMeta||!this.audioLoaded)return void console.log("checkMetadata hasAudio no this.audioTrackMeta",this.audioTrackMeta,", this.audioLoaded",this.audioLoaded);this.audioTrackMeta.baseDTS=this.baseAudioDTS,this.audioTrackMeta.basePTS=this.baseAudioPTS,r.push(this.audioTrackMeta)}var n=this.options,o=n.live,i=n.progressive;this.metadata={formatType:An.FLV,live:!!o,progressive:!o&&!!i,url:this.loader.url,basePTS:Math.min.apply(Math,r.map((function(e){return e.basePTS||0}))),baseDTS:Math.min.apply(Math,r.map((function(e){return e.baseDTS||0}))),timescale:No,duration:1e3*((null==e?void 0:e.duration)||1/0),tracks:r},console.log("checkMetadata loadedmetadata",this.metadata),this.emit("loadedmetadata",this.metadata)}},t.prototype.parseVideoBody=function(e,t,r){var n,o,i,a,s,u,c,l,p=this,f=new xo(t);this.emit("loadedtag",{header:e,body:f});var d=[],h=f.type===So.KEY,v=!1;if(!f.data.length)return Rn.warn("[videox] flv parse empty data",e,f),d;if(f.packetType===Ao.AVC_SEQUENCE_HEADER){var y=this.flvMetadata||{},_={type:Pn.VIDEO,id:2,baseDTS:0,basePTS:0,timescale:No,vps:[],sps:[],pps:[],sei:[],width:y.width||0,height:y.height||0,codec:"",pixelRatio:[],live:(null===(n=this.metadata)||void 0===n?void 0:n.live)||!1};if(f.codecId===Oo.H264){var m=new jn(new $r(new ArrayBuffer(8)),0),g=new $r(f.data.buffer,f.data.byteOffset,f.data.byteLength),b=new zn(m,g);_.pps=b.pps,_.sps=b.sps,_.codec=b.codec;var E=b.sps[0];if(E){var T=new Ln(E.subarray(1));_.width=T.width,_.height=T.height}}else if(f.codecId===Oo.H265&&(an.extractAnnexbNAL(f.data).forEach((function(e){var t=new $r(e.buffer,e.byteOffset,e.length),r=new hn(t);if(r.nalType<ln.ACCESS_UNIT_DELIMITER)if(r.nalType===ln.SPS){var n=new In(qn(t.readToUint8()));_.sps.push(e),_.codec=n.codec,console.log("thisvideoTrackMeta sps.codec=",n.codec),_.width=n.width,_.height=n.height}else r.nalType===ln.VPS?_.vps.push(e):r.nalType===ln.PPS&&_.pps.push(e)})),""===_.codec)){m=new jn(new $r(new ArrayBuffer(8)),0),g=new $r(f.data.buffer,f.data.byteOffset,f.data.byteLength);var w=new Yn(m,g);if(_.vps=w.vps,_.pps=w.pps,_.sps=w.sps,_.sei=w.sei,_.codec=w.codec,w.sps&&w.sps.length>0){T=new In(qn(w.sps[0]));_.width=T.width,_.height=T.height}this.isHVCC=!0}this.videoTrackMeta=_,console.log("parse AVC_SEQUENCE_HEADER thisvideoTrackMeta isHVCC:%o, %o",this.isHVCC,this.videoTrackMeta),this.checkMetadata()}else{var S=[];if(f.codecId!==Oo.H265||this.isHVCC){C=an.extractAVCCNAL(f.data,3);var O={type:Pn.VIDEO,id:2,baseDTS:0,basePTS:0,timescale:No,vps:[],sps:[],pps:[],sei:[],width:(null===(s=this.flvMetadata)||void 0===s?void 0:s.width)||0,height:(null===(u=this.flvMetadata)||void 0===u?void 0:u.height)||0,codec:"",pixelRatio:[],live:(null===(c=this.metadata)||void 0===c?void 0:c.live)||!1},A=[],P=[],R=[],x=[];C.forEach((function(e){var t=new $r(e.buffer,e.byteOffset,e.length),r=new hn(t);if(r.nalType>=16&&r.nalType<=23&&(h=!0),r.nalType<ln.ACCESS_UNIT_DELIMITER){if(r.nalType===ln.SPS){var n=new In(qn(t.readToUint8()));A.push(e),O.codec=n.codec,O.width=n.width,O.height=n.height}else r.nalType===ln.VPS?P.push(e):r.nalType===ln.PPS?R.push(e):r.nalType===ln.SEI?x.push(e):mr.isSafari?r.nalType===ln.TRAIL_R||r.nalType===ln.TRAIL_N||r.nalType===ln.IDR_W_RADL||r.nalType===ln.IDR_N_LP||r.nalType===ln.CRA?S.push(e):console.warn("skip this nalu nalType:",r.nalType):S.push(e);v=hn.isNonRefNALType(r.nalType)}})),P.length&&(O.vps=P),A.length&&(O.sps=A),R.length&&(O.pps=R),x.length&&(O.sei=x),A.length>0&&(this.videoTrackMeta?(this.videoTrackMeta.vps=[],this.videoTrackMeta.sps=[],this.videoTrackMeta.pps=[],this.videoTrackMeta.sei=[],P.forEach((function(e){var t;return null===(t=p.videoTrackMeta)||void 0===t?void 0:t.vps.push(e)})),A.forEach((function(e){var t;return null===(t=p.videoTrackMeta)||void 0===t?void 0:t.sps.push(e)})),R.forEach((function(e){var t;return null===(t=p.videoTrackMeta)||void 0===t?void 0:t.pps.push(e)})),x.forEach((function(e){var t;return null===(t=p.videoTrackMeta)||void 0===t?void 0:t.sei.push(e)}))):this.videoTrackMeta=O)}else{if(this.skipFrame===bn.NONREF&&hn.isNonRefNALType(hn.extractNALType(f.data,4)))return console.warn("skipFrame isNonRefNALType"),[];var C,N={type:Pn.VIDEO,id:2,baseDTS:0,basePTS:0,timescale:No,vps:[],sps:[],pps:[],sei:[],width:(null===(o=this.flvMetadata)||void 0===o?void 0:o.width)||0,height:(null===(i=this.flvMetadata)||void 0===i?void 0:i.height)||0,codec:"",pixelRatio:[],live:(null===(a=this.metadata)||void 0===a?void 0:a.live)||!1},L=[],D=[],k=[],I=[];(C=an.extractAnnexbNAL(f.data)).forEach((function(e){var t=new $r(e.buffer,e.byteOffset,e.length),r=new hn(t);if(r.nalType>=16&&r.nalType<=23&&(h=!0),r.nalType<ln.ACCESS_UNIT_DELIMITER)if(r.nalType===ln.SPS){var n=new In(qn(t.readToUint8()));L.push(e),N.codec=n.codec,N.width=n.width,N.height=n.height}else r.nalType===ln.VPS?D.push(e):r.nalType===ln.PPS?k.push(e):r.nalType===ln.SEI&&I.push(e);v=hn.isNonRefNALType(r.nalType),S.push(e)})),D.length&&(N.vps=D),L.length&&(N.sps=L),k.length&&(N.pps=k),I.length&&(N.sei=I),L.length&&(this.videoTrackMeta?(this.videoTrackMeta.vps=[],this.videoTrackMeta.sps=[],this.videoTrackMeta.pps=[],D.forEach((function(e){var t;return null===(t=p.videoTrackMeta)||void 0===t?void 0:t.vps.push(e)})),L.forEach((function(e){var t;return null===(t=p.videoTrackMeta)||void 0===t?void 0:t.sps.push(e)})),k.forEach((function(e){var t;return null===(t=p.videoTrackMeta)||void 0===t?void 0:t.pps.push(e)})),I.forEach((function(e){var t;return null===(t=p.videoTrackMeta)||void 0===t?void 0:t.sei.push(e)}))):this.videoTrackMeta=N)}if(!this.videoLoaded&&this.videoTrackMeta){if(!h)return[];this.videoLoaded=!0,this.baseVideoDTS=e.dts,this.baseVideoPTS=f.cts+e.dts,this.checkMetadata()}if(this.videoTrackMeta&&h&&(this.videoTrackMeta.pps.forEach((function(e){return S.unshift(e)})),this.videoTrackMeta.sps.forEach((function(e){return S.unshift(e)})),this.videoTrackMeta.vps.forEach((function(e){return S.unshift(e)})),this.videoTrackMeta.sei.forEach((function(e){return S.unshift(e)}))),S.length){var U={trackId:2,codec:(null===(l=this.videoTrackMeta)||void 0===l?void 0:l.codec)||"",trackType:Pn.VIDEO,isSync:h||f.type===So.KEY,isNonRef:v,data:S,dts:e.dts,pts:e.dts+f.cts,offset:r,size:S.reduce((function(e,t){return e+t.byteLength}),0)};d.push(U)}}return d},t.prototype.parseAudioBody=function(e,t,r){var n,o=new bo(t);this.emit("loadedtag",{header:e,body:o});var i=[];if(o.packetType===yo.ADTS_HEADER){var a=new $r(o.data.buffer,o.data.byteOffset,o.data.byteLength),s=bo.readAudioSpecificConfig(a);this.audioTrackMeta={id:1,baseDTS:0,basePTS:0,type:Pn.AUDIO,codec:"mp4a.40."+s.audioObjectType,timescale:No,audioObjectType:s.audioObjectType,sampleRate:s.sampleRate,samplingFrequencyIndex:s.samplingFrequencyIndex,sampleSize:o.sampleSize,channelCount:s.channelCount},this.checkMetadata()}else this.audioLoaded||(this.audioLoaded=!0,this.baseAudioDTS=e.dts,this.baseAudioPTS=e.dts,this.checkMetadata()),i.push({codec:(null===(n=this.audioTrackMeta)||void 0===n?void 0:n.codec)||"",trackId:1,trackType:Pn.AUDIO,isSync:!0,isNonRef:!1,data:[o.data],dts:e.dts,pts:e.dts,offset:r,size:o.data.byteLength});return i},t.prototype.parseScriptBody=function(e,t){var r=new Po(t);this.emit("loadedtag",{header:e,body:r});var n=r.value;n&&"onMetaData"===r.name&&(this.flvMetadata=n,Rn.info("flv script tag loaded, flv metadata:",this.flvMetadata))},t.prototype.onProgress=function(e){var t=e.data,r=e.offset;if(t.byteLength){var n=this.parse(t.buffer,r);if(n.length){var o=void 0;this.cachePackets.length?(o=this.cachePackets.concat(n),this.cachePackets=[]):o=n,this.metadata&&this.loader.status!==$n.SUSPENGING?this.emit("loadeddata",{packets:o}):this.cachePackets=o}}},t.prototype.onLoadEnd=function(){this.loader.eof&&this.emit("end",void 0)},t.prototype.seek=function(){},t.prototype.reset=function(){e.prototype.reset.call(this),this.cachePackets=[],this.videoLoaded=!1,this.audioLoaded=!1,this.baseVideoDTS=0,this.baseVideoPTS=0,this.baseAudioDTS=0,this.baseAudioPTS=0,this.header=null,this.unhandleBuffer=null,this.flvMetadata=null,this.videoTrackMeta=null,this.audioTrackMeta=null},t}(lo),Do=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ko=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isContainer=!0,t}return Do(t,e),t}(Wn),Io=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Uo=function(e){function t(t,r){var n=e.call(this,t,r)||this;r.skip(4),r.skip(2),n.bitReferenceId=r.read(2),n.codeStreamVersion=r.read(4),r.skip(4),r.skip(8),n.width=r.read(2),n.heigth=r.read(2),n.horizontalResolution=r.read(4),n.verticalResolution=r.read(4),r.skip(4),n.frameCount=r.read(2);var o=Math.min(r.read(1),32);return n.compressorName=Array.from(new Array(o)).map((function(){return String.fromCharCode(r.read(1))})).join(""),r.skip(32-(o+1)),n.depth=r.read(2),r.skip(2),n}return Io(t,e),t}(ko),Mo=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),jo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mo(t,e),t}(Uo),Fo=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vo=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.bufferSizeDB=r.read(4),n.maxBitrate=r.read(4),n.avgBitrate=r.read(4),n}return Fo(t,e),t}(Wn),Bo=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wo=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.version=r.read(1),n.flag=r.read(3),n.entryCount=r.read(4),n}return Bo(t,e),t}(ko),Go=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ho=function(e){function t(t,r){var n=e.call(this,t,r)||this;n.entries=[],n.version=r.read(1),n.flag=r.read(3),n.entryCount=r.read(4);for(var o=0;o<n.entryCount;o++){var i=1===n.version;n.entries.push({segmentDuration:r.read(i?8:4),mediaTime:r.read(i?8:4),mediaRateInteger:r.read(2),mediaRateFraction:r.read(2)})}return n}return Go(t,e),t}(Wn),zo=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(e){e[e.OD=1]="OD",e[e.IOD=2]="IOD",e[e.ESD=3]="ESD",e[e.DCD=4]="DCD",e[e.DSD=5]="DSD",e[e.SLCD=6]="SLCD"}(Ro||(Ro={}));var Xo,Yo=function(){function e(t){this.tag=t.read(1),this.size=e.readSize(t)}return e.readSize=function(e){for(var t,r=0,n=4;n--&&(r=r<<7|127&(t=e.read(1)),128&t););return r},e.extractDescriptors=function(t){for(var r,n,o,i=[];t.unreadLength;){if(r=new e(t),o=new $r(t.buffer,t.offset,r.size),t.skip(r.size),r.size<=0)return i;switch(r.tag){case Ro.ESD:n=new Ko(r,o);break;case Ro.DCD:n=new Zo(r,o);break;case Ro.DSD:n=new $o(r,o);break;case Ro.SLCD:n=new Qo(r,o);break;default:n=null}n&&o.unreadLength&&(n.children=e.extractDescriptors(o)),i.push(n)}return i},e}(),qo=function(){function e(e){this.children=[],this.probe=e}return e.findDescriptor=function(t,r){var n;return t.some((function(t){return!!(n=t.probe.tag===r?t:e.findDescriptor(t.children,r))})),n},e}(),Ko=function(e){function t(t,r){var n=e.call(this,t)||this;return n.streamDependenceFlag=0,n.URLFlag=0,n.OCRStreamFlag=0,n.esId=r.read(2),n.esFlag=r.read(1),128&n.esFlag&&(n.streamDependenceFlag=r.read(2)),64&n.esFlag&&(n.URLFlag=r.read(1),r.skip(n.URLFlag)),32&n.esFlag&&(n.OCRStreamFlag=r.read(2)),n}return zo(t,e),t}(qo),Zo=function(e){function t(t,r){var n=e.call(this,t)||this;return n.mepg4Audio=r.read(1),n.audioStream=r.read(1),n.bufferSize=r.read(3),n.maxBitrate=r.read(4),n.avgBitrate=r.read(4),n}return zo(t,e),t}(qo),$o=function(e){function t(t,r){var n=e.call(this,t)||this,o=new nn(r.read(2),16);return n.audioObjectType=o.read(5),n.samplingFrequencyIndex=o.read(4),n.channel=o.read(4),n.frameLengthFlag=o.read(1),n.dependsOnCoreCoder=o.read(1),n.extesionFlag=o.read(1),n}return zo(t,e),t}(qo),Qo=function(e){function t(t,r){var n=e.call(this,t)||this;return n.esId=r.read(2),n}return zo(t,e),t}(qo),Jo=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ei=function(e){function t(t,r){var n=e.call(this,t,r)||this;n.descriptors=[],n.audioObjectType=0,n.samplingFrequencyIndex=0,n.descriptors=Yo.extractDescriptors(r);var o=qo.findDescriptor(n.descriptors,Ro.DCD),i=qo.findDescriptor(n.descriptors,Ro.DSD);return i&&(n.audioObjectType=i.audioObjectType,n.samplingFrequencyIndex=i.samplingFrequencyIndex),n.codec=o&&i?"mp4a."+o.mepg4Audio.toString(16)+"."+i.audioObjectType.toString(16):"mp4a",n}return Jo(t,e),t}(Gn),ti=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ri=function(e){function t(t,r){var n=e.call(this,t,r)||this;for(n.compatibleBrands=[],n.majorBrand=String.fromCharCode(r.read(1),r.read(1),r.read(1),r.read(1)),n.minorVersion=r.read(4);r.unreadLength>=4;)n.compatibleBrands.push(String.fromCharCode(r.read(1),r.read(1),r.read(1),r.read(1)));return n}return ti(t,e),t}(Wn),ni=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),oi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ni(t,e),t}(Uo),ii=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ai=function(e){function t(t,r){var n,o=e.call(this,t,r)||this;o.generalTierFlag=0,o.generalProfileIdc=0,o.generalLevelIdc=0,o.bitDepthLumaMinus8=0,o.bitDepthChromaMinus8=0,o.avgFrameRate=0,o.nalus=[],o.vps=[],o.sps=[],o.pps=[],o.sei=[],o.codecTag="vvc1",r.skip(5);var i=(n=new nn(r.read(2),16)).read(9);console.log("ols_idx",i);var a=n.read(3);console.log("num_sublayers",a);var s=n.read(2),u=n.read(2);console.log("constant_frame_rate:",s),console.log("chroma_format_idc:",u),o.constantFrameRate=s,o.chromaFormatIdc=u,(n=new nn(r.read(1),8)).skip(5);var c=n.read(2);if(o.lengthSizeMinusOne=c,n.read(1)){(n=new nn(r.read(2),16)).skip(2);var l=n.read(6),p=n.read(7),f=n.read(1);o.generalTierFlag=f,o.generalProfileIdc=p;var d=r.read(1);o.generalLevelIdc=d;var h=(n=new nn(r.read(1),8)).read(1),v=n.read(1);console.log("ptl_frame_only_constraint_flag:",h),console.log("ptl_multilayer_enabled_flag:",v);var y=0,_=new Uint8Array(l);if(l){for(y=0;y<l-1;y++){var m=n.read(6),g=(n=new nn(r.read(1),8)).read(2);_[y]=m<<2|g}_[l-1]=n.read(6)}else n.read(6);var b=0;if(a>1){n=new nn(r.read(1),8);var E=0;for(b=a-2;b>=0;--b){E|=n.read(1)<<b}for(b=a;b<=8&&a>1;++b)n.read(1);var T=[];for(b=a-2;b>=0;--b)E&1<<b&&(T[b]=r.read(1))}var w=r.read(1),S=[];if(w)for(y=0;y<w;y++)S.push(r.readInt(1));var O=r.read(2),A=r.read(2),P=r.read(2);console.log("max_picture_width:",O),console.log("max_picture_height:",A),o.avgFrameRate=P}var R=[],x=r.read(1),C=0,N=0;for(C=0;C<x;C++){R.push([]);var L=(n=new nn(r.read(1),8)).read(1);n.skip(2);var D=n.read(5),k=[],I=1;for(13!=D&&12!=D&&(I=r.read(2)),N=0;N<I;N++)k.push(new Uint8Array(r.read(2)).map((function(){return r.read(1)})));R.push({completeness:L,nalu_type:D,data:k}),D===dn.VVC_VPS_NUT?k.forEach((function(e){return o.vps.push(e)})):D===dn.VVC_SPS_NUT?k.forEach((function(e){return o.sps.push(e)})):D===dn.VVC_PPS_NUT&&k.forEach((function(e){return o.pps.push(e)}))}return o.configVersion=0,o.codec="vvc1.1.L48.CA",o}return ii(t,e),t}(Wn),si=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ui=function(e){function t(t,r){var n=e.call(this,t,r)||this;for(n.name="",n.version=r.read(1),n.flag=r.read(3),n.preDefined=String.fromCharCode(r.read(1),r.read(1),r.read(1),r.read(1)),n.handleType=String.fromCharCode(r.read(1),r.read(1),r.read(1),r.read(1)),r.skip(12);r.unreadLength>0;)n.name+=String.fromCharCode(r.read(1));return n}return si(t,e),t}(Wn),ci=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),li=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.data=r.readToUint8(t.size-t.length),n}return ci(t,e),t}(Wn),pi=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),fi=function(e){function t(t,r){var n=e.call(this,t,r)||this;n.version=r.read(1),n.flag=r.read(3);var o=1===n.version;n.createTime=n.toStandardTime(r.read(o?8:4)),n.modifyTime=n.toStandardTime(r.read(o?8:4)),n.timeScale=r.read(4),n.duration=r.read(o?8:4);var i=r.read(2),a=function(e){return 96+(31&e)};return n.language=String.fromCharCode(a(i>>10),a(i>>5),a(i)),n.quality=Number(r.read(1)+"."+r.read(1)),n}return pi(t,e),t}(Wn),di=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),hi=function(e){function t(t,r){var n=e.call(this,t,r)||this;return r.skip(6),n.dataReferenceIndex=r.read(2),r.skip(8),n.channelCount=r.read(2),n.sampleSize=r.read(2),r.skip(4),n.sampleRate=r.read(4)>>>16,n}return di(t,e),t}(ko),vi=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),yi=function(e){function t(t,r){var n=e.call(this,t,r)||this;n.matrix=[],n.version=r.read(1),n.flag=r.read(3),n.createTime=n.toStandardTime(r.read(4)),n.modifyTime=n.toStandardTime(r.read(4)),n.timeScale=r.read(4),n.duration=r.read(4),n.rate=Number(r.read(2)+"."+r.read(2)),n.volume=Number(r.read(1)+"."+r.read(1)),r.skip(10);for(var o=0;o<9;o++)n.matrix.push(Number(r.read(2)+"."+r.read(2)));return r.skip(24),n.nextTrackId=r.read(4),n}return vi(t,e),t}(Wn),_i=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),mi=function(e){function t(t,r){var n=e.call(this,t,r)||this;for(n.data=[];r.unreadLength>0;)n.data.push(r.read(1));return n}return _i(t,e),t}(Wn),gi=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),bi=function(e){function t(t,r){var n=e.call(this,t,r)||this;n.matrix=[],n.version=r.read(1),n.flag=r.read(3),n.createTime=n.toStandardTime(r.read(4)),n.modifyTime=n.toStandardTime(r.read(4)),n.trackId=r.read(4),r.skip(4),n.duration=r.read(4),r.skip(8),n.layer=r.read(2),n.alternateGroup=r.read(2),n.volume=Number(r.read(1)+"."+r.read(1)),r.skip(2);for(var o=0;o<9;o++)n.matrix.push(Number(r.read(2)+"."+r.read(2)));return n.width=Number(r.read(2)+"."+r.read(2)),n.height=Number(r.read(2)+"."+r.read(2)),n}return gi(t,e),t}(Wn),Ei=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ti=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.version=r.read(1),n.flag=r.read(3),n}return Ei(t,e),t}(Wn),wi=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Si=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.version=r.read(1),n.flag=r.read(3),n.graphicsMode=r.read(2),n.opcolor=[r.read(2),r.read(2),r.read(2)],n}return wi(t,e),t}(Wn),Oi=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ai=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Oi(t,e),t}(ko),Pi=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ri=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Pi(t,e),t}(ko),xi=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ci=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xi(t,e),t}(Gn),Ni=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Li=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ni(t,e),t}(ko),Di=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ki=function(e){function t(t,r){var n=e.call(this,t,r)||this;n.isLeadings=[],n.sampleDependsOns=[],n.sampleIsDependedOns=[],n.sampleHasRedundancys=[];for(var o=0,i=void 0;o<r.unreadLength;o++)i=new nn(r.read(1),8),n.isLeadings[o]=i.read(2),n.sampleDependsOns[o]=i.read(2),n.sampleIsDependedOns[o]=i.read(2),n.sampleHasRedundancys[o]=i.read(2);return n}return Di(t,e),t}(Gn),Ii=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ui=function(e){function t(t,r){var n=e.call(this,t,r)||this;n.references=[],n.trackId=r.read(4),n.timescale=r.read(4),0===n.version?(n.pts=r.read(4),n.offset=r.read(4)):(n.pts=r.read(8),n.offset=r.read(8)),r.skip(2),n.references=[];for(var o=r.read(2),i=0;i<o;i++){var a=new nn(r.read(4),32),s=r.read(4),u=new nn(r.read(4),32);n.references.push({type:a.read(1),size:a.read(31),duration:s,startWithSap:u.read(1),sapType:u.read(3),sapDeltaTime:u.read(28)})}return n}return Ii(t,e),t}(Gn),Mi=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ji=function(e){function t(t,r){var n=e.call(this,t,r)||this;return 1===n.version?n.baseMediaDecodeTime=r.read(8):n.baseMediaDecodeTime=r.read(4),n}return Mi(t,e),t}(Gn),Fi=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(e){e[e.BASE_DATA_OFFSET=1]="BASE_DATA_OFFSET",e[e.SAMPLE_DESC=2]="SAMPLE_DESC",e[e.SAMPLE_DUR=8]="SAMPLE_DUR",e[e.SAMPLE_SIZE=16]="SAMPLE_SIZE",e[e.SAMPLE_FLAG=32]="SAMPLE_FLAG",e[e.DUR_EMPTY=65536]="DUR_EMPTY",e[e.DEFAULT_BASE_IS_MOOF=131072]="DEFAULT_BASE_IS_MOOF"}(Xo||(Xo={}));var Vi,Bi=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.baseDataOffset=0,n.defaultSampleDescriptionIndex=0,n.defaultSampleDuration=0,n.defaultSampleSize=0,n.defaultSampleFlag=0,n.trackId=r.read(4),n.flag&Xo.BASE_DATA_OFFSET&&(n.baseDataOffset=r.read(8)),n.flag&Xo.SAMPLE_DESC&&(n.defaultSampleDescriptionIndex=r.read(4)),n.flag&Xo.SAMPLE_DUR&&(n.defaultSampleDuration=r.read(4)),n.flag&Xo.SAMPLE_SIZE&&(n.defaultSampleSize=r.read(4)),n.flag&Xo.SAMPLE_FLAG&&(n.defaultSampleFlag=r.read(4)),n}return Fi(t,e),t}(Gn),Wi=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Gi=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.trackId=r.read(4),n.defaultSampleDescriptionIndex=r.read(4),n.defaultSampleDuration=r.read(4),n.defaultSampleSize=r.read(4),n.defaultSampleFlag=r.read(4),n}return Wi(t,e),t}(Gn),Hi=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(e){e[e.DATA_OFFSET=1]="DATA_OFFSET",e[e.FIRST_FLAG=4]="FIRST_FLAG",e[e.DURATION=256]="DURATION",e[e.SIZE=512]="SIZE",e[e.FLAG=1024]="FLAG",e[e.CTS_OFFSET=2048]="CTS_OFFSET"}(Vi||(Vi={}));var zi,Xi=function(e){function t(t,r){var n=e.call(this,t,r)||this;n.sampleDurations=[],n.sampleSizes=[],n.sampleFlags=[],n.sampleCTSs=[],n.sampleCount=r.read(4),n.flag&Vi.DATA_OFFSET?n.dataOffset=r.readInt(4):n.dataOffset=0,n.flag&Vi.FIRST_FLAG?n.firstSampleFlag=r.read(4):n.firstSampleFlag=0;for(var o=0;o<n.sampleCount;o++)n.flag&Vi.DURATION&&(n.sampleDurations[o]=r.read(4)),n.flag&Vi.SIZE&&(n.sampleSizes[o]=r.read(4)),n.flag&Vi.FLAG&&(n.sampleFlags[o]=r.read(4)),n.flag&Vi.CTS_OFFSET&&(0===n.version?n.sampleCTSs[o]=r.read(4):n.sampleCTSs[o]=r.readInt(4));return n}return Hi(t,e),t}(Gn),Yi=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),qi=function(e){function t(t,r){var n=e.call(this,t,r)||this;n.sampleCounts=[],n.sampleOffsets=[],n.version=r.read(1),n.flag=r.read(3),n.entryCount=r.read(4);for(var o=0;o<n.entryCount;o++)n.sampleCounts.push(r.read(4)),n.sampleOffsets.push(r.readInt(4));return n}return Yi(t,e),t}(Wn),Ki=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Zi=function(e){function t(t,r){var n=e.call(this,t,r)||this;n.chunkOffsets=[],n.version=r.read(1),n.flag=r.read(3);for(var o=r.read(4),i=0;i<o;i++)n.chunkOffsets.push(r.read(4));return n}return Ki(t,e),t}(Wn),$i=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Qi=function(e){function t(t,r){var n=e.call(this,t,r)||this;n.chunkOffsets=[],n.version=r.read(1),n.flag=r.read(3);for(var o=r.read(4),i=0;i<o;i++)n.chunkOffsets.push(r.read(8));return n}return $i(t,e),t}(Wn),Ji=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ea=function(e){function t(t,r){var n=e.call(this,t,r)||this;n.entries=[],n.version=r.read(1),n.flag=r.read(3);for(var o=r.read(4),i=0;i<o;i++)n.entries.push({firstChunk:r.read(4),samplePerChunk:r.read(4),sampleDescriptionIndex:r.read(4)});return n}return Ji(t,e),t}(Wn),ta=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ra=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.version=r.read(1),n.flag=r.read(3),n.entryCount=r.read(4),n}return ta(t,e),t}(ko),na=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),oa=function(e){function t(t,r){var n=e.call(this,t,r)||this;n.sampleNumbers=[],n.version=r.read(1),n.flag=r.read(3);for(var o=r.read(4),i=0;i<o;i++)n.sampleNumbers.push(r.read(4));return n}return na(t,e),t}(ko),ia=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),aa=function(e){function t(t,r){var n=e.call(this,t,r)||this;n.isContainer=!0,n.sampleSizes=[],n.version=r.read(1),n.flag=r.read(3),n.sampleSize=r.read(4);for(var o=r.read(4),i=0;i<o;i++)0===n.sampleSize?n.sampleSizes.push(r.read(4)):n.sampleSizes.push(n.sampleSize);return n}return ia(t,e),t}(Wn),sa=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ua=function(e){function t(t,r){var n=e.call(this,t,r)||this;n.sampleCounts=[],n.sampleDurations=[],n.version=r.read(1),n.flag=r.read(3);for(var o=r.read(4),i=0;i<o;i++)n.sampleCounts[i]=r.read(4),n.sampleDurations[i]=r.read(4);return n}return sa(t,e),t}(Wn),ca=function(){function e(e){this.tracks=[],this.options=e}return e.prototype.addTrack=function(e){this.tracks.push(e)},e.prototype.getTracks=function(){return this.tracks},e.prototype.getTrackById=function(e){return this.tracks.find((function(t){return t.options.id===e}))},e}(),la=function(){return la=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},la.apply(this,arguments)},pa=function(){function e(e){this.samples=[],this.nextSampleIndex=0,this.duration=0,this.options=e}return e.prototype.getSamples=function(){return this.samples},e.prototype.getNextSampleOffset=function(){var e=this.samples[this.nextSampleIndex];return e?e.offset:0},e.prototype.addSample=function(e){this.samples.push(e),this.duration+=e.duration},e.prototype.processNextSample=function(e,t){void 0===t&&(t=0);var r=this.samples[this.nextSampleIndex];if(r)return this.processSample(e,t,r)},e.prototype.processSample=function(e,t,r){void 0===t&&(t=0);var n=t+e.byteLength,o=r.offset-t;if(o>=0&&r.offset+r.size<=n)return this.nextSampleIndex++,la(la({},r),{data:e.subarray(o,o+r.size)})},e.prototype.processSamples=function(e,t){void 0===t&&(t=0);for(var r=this.samples,n=[],o=this.nextSampleIndex,i=r.length;o<i;o++){var a=this.processSample(e,t,r[o]);if(!a)break;n.push(a)}return n},e.prototype.seek=function(e){for(var t,r=e*this.options.timeScale,n=-1,o=-1,i=0,a=this.samples.length;i<a;i++)if((t=this.samples[i]).isSync&&(o=i),t.dts+t.cts>=r){n=o;break}if(n>-1)return this.nextSampleIndex=n,this.samples[n]},e}(),fa=function(){function e(){}return e.prototype.createMedia=function(e){return this._parseMoovJSON(e)},e.prototype._parseMoovJSON=function(e){var t=this,r=e.mvhd.box,n=new ca({duration:r.duration,timeScale:r.timeScale,rate:r.rate,modifyTime:r.modifyTime,createTime:r.createTime});return e.trak&&[].concat(e.trak).forEach((function(r){var o,i=r.tkhd,a=r.mdia,s=a.mdhd,u=a.hdlr,c=a.minf.stbl,l=i.box,p=u.box,f=s.box,d=Mn[p.handleType],h=t._buildSamples(c,d),v={id:l.trackId,name:p.name,handleType:p.handleType,type:d,createTime:l.createTime,modifyTime:l.modifyTime,layer:l.layer,volume:l.volume,matrix:l.matrix,duration:l.duration,width:l.width,height:l.height,timeScale:f.timeScale,language:f.language,quality:f.quality,defaultSampleDescriptionIndex:1,defaultSampleDuration:0,defaultSampleSize:0,defaultSampleFlag:0},y=null===(o=e.mvex)||void 0===o?void 0:o.trex;y&&[].concat(y).forEach((function(e){var t=e.box;v.defaultSampleDescriptionIndex=t.defaultSampleDescriptionIndex,v.defaultSampleDuration=t.defaultSampleDuration,v.defaultSampleSize=t.defaultSampleSize,v.defaultSampleFlag=t.defaultSampleFlag}));var _=new pa(v);h.forEach((function(e){return _.addSample(e)})),n.addTrack(_)})),n},e.prototype._buildSamples=function(e,t){var r=e.stts,n=e.stss,o=e.ctts,i=e.stsc,a=e.stsz||e.stz2;if(!a)return[];var s,u,c,l,p,f=e.stco||e.co64,d=i.box,h=null==n?void 0:n.box,v=r.box,y=null==o?void 0:o.box,_=-1,m=-1,g=-1,b=-1,E=0,T=[],w=a.box.sampleSizes;return w.forEach((function(e,r){var n={},o=d.entries;if(n.size=e,n.trackType=t,0===r?(u=1,s=0,n.chunkIndex=u,n.chunkRunIndex=s,p=o[s].samplePerChunk,l=0,c=s+1<o.length?o[s+1].firstChunk-1:1/0):r<p?(n.chunkIndex=u,n.chunkRunIndex=s):(u++,n.chunkIndex=u,l=0,u>c&&(s++,c=s+1<o.length?o[s+1].firstChunk-1:1/0),n.chunkRunIndex=s,p+=o[s].samplePerChunk),n.descriptionIndex=o[s].sampleDescriptionIndex-1,n.offset=f.box.chunkOffsets[n.chunkIndex-1]+l,l+=n.size,r>_&&(m++,_=Math.max(_,0),_+=v.sampleCounts[m]),r>0){var i=T[r-1];i.duration=v.sampleDurations[m],n.dts=T[r-1].dts+i.duration}else n.dts=0;y?(r>=g&&(b++,g=Math.max(g,0),g+=y.sampleCounts[b]),n.cts=y.sampleOffsets[b]):n.cts=0,h?r===h.sampleNumbers[E]-1?(n.isSync=!0,E++):n.isSync=!1:n.isSync=!0,n.isLast=r===w.length-1,T.push(n)})),T},e}(),da=function(e){return Array.isArray(e)?e:e?[e]:[]},ha=function(){function e(){var e=this;this.options=null,this._getTrakById=function(t){var r;return null===(r=e.options)||void 0===r?void 0:r.media.getTracks().find((function(e){return e.options.id===t}))}}return e.prototype.init=function(e){this.options=e},e.prototype.parse=function(e){var t=this;da(e.traf).forEach((function(r){return t._buildSamples(r,e.box)}))},e.prototype._buildSamples=function(e,t){var r=e.tfhd.box,n=this._getTrakById(r.trackId);if(n){var o,i,a,s,u=n.options,c=e.tfdt.box,l=r.flag;o=l&Xo.SAMPLE_DESC?r.defaultSampleDescriptionIndex:u.defaultSampleDescriptionIndex,i=l&Xo.SAMPLE_DUR?r.defaultSampleDuration:u.defaultSampleDuration,a=l&Xo.SAMPLE_SIZE?r.defaultSampleSize:u.defaultSampleSize,s=l&Xo.SAMPLE_FLAG?r.defaultSampleFlag:u.defaultSampleFlag;for(var p=da(e.trun),f=u.id,d=u.type,h=l&Xo.BASE_DATA_OFFSET?r.baseDataOffset:l&Xo.DEFAULT_BASE_IS_MOOF?t.header.start:0,v=0,y=0;y<p.length;y++)for(var _=p[y].box,m=_.flag,g=_.dataOffset+h,b=0;b<_.sampleCount;b++){var E={};E.trackId=f,E.trackType=d,E.descriptionIndex=o,m&Vi.SIZE?E.size=_.sampleSizes[b]:E.size=a,m&Vi.DURATION?E.duration=_.sampleDurations[b]:E.duration=i,E.dts=v>0?v:c?c.baseMediaDecodeTime:0,v=E.dts+E.duration,m&Vi.CTS_OFFSET?E.cts=_.sampleCTSs[b]:E.cts=0;var T=s;m&Vi.FLAG?T=_.sampleFlags[b]:0===b&&m&Vi.FIRST_FLAG&&(T=_.firstSampleFlag),E.offset=g,E.flag=T,E.isSync=!(T&(Un.IS_NON_SYNC|Un.DEPENDS_YES)),E.isLeading=T>>26&3,E.dependsOn=T>>24&3,E.isDependedOn=T>>22&3,E.hasRedundancy=T>>20&3,E.degradationPriority=65535&T,g+=E.size,E.isLast=y===p.length-1&&b===_.sampleCount-1,n.addSample(E)}}},e.prototype.destroy=function(){this.options=null},e}(),va=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ya=function(t){function r(e){void 0===e&&(e={});var r=t.call(this,e)||this;return r.media=null,r.unhandleBuffer=null,r.formatType=An.MP4,r.boxes=[],r._handleBoxLoad=function(e){var t,n,o=e.header.type;if("vvcC"===o)r.vvcCBox=e;else if("vvc1"===o)r.vvcCBox&&(r.vvcCBox.codecTag=o);else if("hvcC"===o)r.hvcCBox=e;else if("hvc1"===o||"hev1"===o)r.hvcCBox&&(r.hvcCBox.codecTag=o);else if("avcC"===o)r.avcCBox=e;else if("esds"===o)r.esdsBox=e;else if("mp4a"===o)r.mp4aBox=e;else if("moov"===o){var i=Wn.mapBoxToJSON(e);r.media=r.moovParser.createMedia(i),r.moofParser.init({media:r.media});var a=r.mp4aBox||{},s=a.sampleRate,u=void 0===s?0:s,c=a.sampleSize,l=void 0===c?0:c,p=a.channelCount,f=void 0===p?0:p,d=r.esdsBox||{},h=d.audioObjectType,v=void 0===h?0:h,y=d.samplingFrequencyIndex,_=void 0===y?0:y,m=d.codec,g=void 0===m?"":m,b=[],E=[],T=[];r.hvcCBox?(E=r.hvcCBox.vps,T=r.hvcCBox.pps,b=r.hvcCBox.sps):r.vvcCBox?(T=r.vvcCBox.pps,b=r.vvcCBox.sps,b=r.vvcCBox.sps):r.avcCBox&&(T=r.avcCBox.pps,b=r.avcCBox.sps);var w,S=r.options,O=S.live,A=S.progressive,P=(null===(t=r.avcCBox)||void 0===t?void 0:t.codec)||"";r.vvcCBox?(P=r.vvcCBox.codec,w=r.vvcCBox?r.vvcCBox.codecTag:void 0):r.hvcCBox&&(P=r.hvcCBox?r.hvcCBox.codec:(null===(n=r.avcCBox)||void 0===n?void 0:n.codec)||"",w=r.hvcCBox?r.hvcCBox.codecTag:void 0),r.metadata={formatType:An.MP4,live:!!O,progressive:!O&&!!A,url:r.loader.url,basePTS:0,baseDTS:0,duration:r.media.options.duration,timescale:r.media.options.timeScale,tracks:r.media.getTracks().map((function(e){var t,n={};switch(n.id=e.options.id,n.type=e.options.type,n.timescale=e.options.timeScale,n.baseDTS=0,n.basePTS=0,n.type){case Pn.VIDEO:n.width=e.options.width,n.height=e.options.height,n.vps=E,n.sps=b,n.pps=T,n.rotate=function(e){if(e.length<5)return 0;var t=Math.hypot(e[0],e[3]),r=Math.hypot(e[1],e[4]);return 0===t||0===r?0:180*Math.atan2(e[1]/r,e[0]/t)/Math.PI}(e.options.matrix),n.pixelRatio=[],n.codec=P,n.codecTag=w,n.fps=r.computeFps(e,null===(t=r.media)||void 0===t?void 0:t.options);break;case Pn.AUDIO:n.audioObjectType=v,n.sampleRate=u,n.samplingFrequencyIndex=_,n.sampleSize=l,n.channelCount=f,n.codec=g;break;default:n.type=Pn.UNKNOWN}return n}))},Rn.info("loadedmetadata metadata:",r.metadata),r.emit("loadedmetadata",r.metadata)}else"moof"===o&&(Rn.info("检测到moof box被加载，当前素材为fMP4"),r.moofParser.parse(Wn.mapBoxToJSON(e)))},r.computeFps=function(e,t){return t?e.getSamples().length/(t.duration/t.timeScale):0},r.convertSampleToPacket=function(e){if(e.trackType===Pn.VIDEO&&(r.hvcCBox||r.avcCBox||r.vvcCBox)){var t=e.data,n=e.isSync,o=r.hvcCBox||r.avcCBox||r.vvcCBox,i=o.lengthSizeMinusOne,a=o.codec,s=!1;r.vvcCBox&&t.length>4&&0===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&(s=!0);var u=[];u=s?an.extractAnnexbNAL(t):an.extractAVCCNAL(t,i);var c=!1;return r.hvcCBox&&(c=u.every((function(e){return hn.isNonRef(e)}))),r.vvcCBox&&(c=u.every((function(e){yn.isNonRef(e)}))),n&&(r.hvcCBox?(r.hvcCBox.pps.forEach((function(e){return u.unshift(e)})),r.hvcCBox.sps.forEach((function(e){return u.unshift(e)})),r.hvcCBox.vps.forEach((function(e){return u.unshift(e)}))):r.vvcCBox?(r.vvcCBox.pps.forEach((function(e){return u.unshift(e)})),r.vvcCBox.sps.forEach((function(e){return u.unshift(e)})),r.vvcCBox.vps.forEach((function(e){return u.unshift(e)}))):r.avcCBox&&(r.avcCBox.pps.forEach((function(e){return u.unshift(e)})),r.avcCBox.sps.forEach((function(e){return u.unshift(e)})))),{codec:a,trackId:e.trackId,trackType:e.trackType,isLast:e.isLast,dts:e.dts,pts:e.cts+e.dts,isSync:e.isSync,isNonRef:c,data:u,size:u.reduce((function(e,t){return e+t.byteLength}),0),offset:e.offset}}if(e.trackType===Pn.AUDIO&&r.esdsBox)return{codec:r.esdsBox.codec,trackId:e.trackId,trackType:e.trackType,dts:e.dts,pts:e.cts+e.dts,isLast:e.isLast,isSync:!0,isNonRef:!1,data:[e.data],size:e.data.byteLength,offset:e.offset}},r.options=e,r.moovParser=new fa,r.moofParser=new ha,e.sub||r.on("loadedbox",r._handleBoxLoad),r}return va(r,t),r.probe=function(e){if(e.byteLength<8)return!1;return"ftyp"===[e[4],e[5],e[6],e[7]].map((function(e){return String.fromCharCode(e)})).join("")},r.prototype.processPackets=function(e,t){var r=this,n=[];if(this.media&&e.byteLength){this.media.getTracks().forEach((function(o){o.processSamples(e,t).forEach((function(e){var t=r.convertSampleToPacket(e);t&&n.push(t)}))}));var o=this.getMinNextSampleOffset()-t;this.unhandleBuffer=o>=e.byteLength?null:e.slice(o).buffer}return n},r.prototype.seek=function(e){var t,r=this.options.progressive;this.unhandleBuffer=null,r&&this.loader.suspend(),null===(t=this.media)||void 0===t||t.getTracks().map((function(t){return t.seek(e)})),r&&this.loader.loadRange(this.getMinNextSampleOffset())},r.prototype.onProgress=function(e){var t=e.data,r=e.offset;if(t.length&&(this.unhandleBuffer&&(t=$r.concatUint8(new Uint8Array(this.unhandleBuffer),t),r-=this.unhandleBuffer.byteLength,this.unhandleBuffer=null),this.metadata||this.parse(new $r(t.buffer,0),r),this.metadata)){var n=this.processPackets(t,r);n.length&&this.emit("loadeddata",{packets:n})}},r.prototype.onLoadEnd=function(){this.loader.eof&&this.emit("end",void 0)},r.prototype.getMinNextSampleOffset=function(){return this.media?Math.min.apply(Math,this.media.getTracks().map((function(e){return e.getNextSampleOffset()}))):0},r.prototype.parse=function(t,n){var o,i=this;void 0===n&&(n=0);for(var a=t.offset,s=0,u=function(){s=t.offset-a;var u=new jn(t,n+s);if(0===u.size){var l=new Error("box [".concat(u.type,"] size 为 0"));return Rn.error(l),c.emit("error",{code:En.PARSER,message:l.message,origin:l}),"break"}if(c.options.progressive&&"mdat"===u.type&&!c.metadata){var p=u.start+u.size;return c.loader.suspend(),c.unhandleBuffer=null,Rn.info("检测到mdat box在moov box之后，跳转moov起始偏移位"),c.loader.loadRange(p).then((function(e){e&&(i.unhandleBuffer=null,i.loader.jump(u.start),i.loader.status!==$n.SUSPENGING&&i.loader.loadRange(u.start,p))})),{value:void 0}}var f=u.size-u.length;if(!(t.unreadLength>=f))return t.back(u.length),"break";var d=e[u.type];if(d){var h=new $r(t.buffer,t.offset,f);if((o=new d(u,h)).isContainer){var v=new r({sub:!0});v.proxy(c,["loadedbox"]),v.parse(h,s+n+u.length),v.removeAllListeners(),v.boxes.forEach((function(e){o.append(e)}))}}else o=new Wn(u);t.skip(f),c.boxes.push(o),c.emit("loadedbox",o)},c=this;t.unreadLength>=8;){var l=u();if("object"==typeof l)return l.value;if("break"===l)break}t.unreadLength&&(this.unhandleBuffer=t.readToBuffer())},r.prototype.reset=function(){t.prototype.reset.call(this),this.boxes=[],this.unhandleBuffer=null,this.avcCBox=void 0,this.hvcCBox=void 0,this.mp4aBox=void 0,this.media=null,this.moofParser.destroy()},r}(lo);!function(e){e[e.H264=27]="H264",e[e.H265=36]="H265",e[e.AAC=15]="AAC"}(zi||(zi={}));var _a,ma={1:Pn.VIDEO,2:Pn.VIDEO,3:Pn.AUDIO,4:Pn.AUDIO,5:Pn.UNKNOWN,6:Pn.UNKNOWN,7:Pn.UNKNOWN,8:Pn.UNKNOWN,9:Pn.UNKNOWN,10:Pn.UNKNOWN,11:Pn.UNKNOWN,12:Pn.UNKNOWN,13:Pn.UNKNOWN,14:Pn.UNKNOWN,15:Pn.AUDIO,16:Pn.VIDEO,17:Pn.AUDIO,18:Pn.UNKNOWN,19:Pn.UNKNOWN,20:Pn.UNKNOWN,21:Pn.UNKNOWN,22:Pn.UNKNOWN,23:Pn.UNKNOWN,24:Pn.UNKNOWN,25:Pn.UNKNOWN,26:Pn.UNKNOWN,27:Pn.VIDEO,28:Pn.AUDIO,29:Pn.UNKNOWN,30:Pn.VIDEO,31:Pn.UNKNOWN,32:Pn.UNKNOWN,33:Pn.VIDEO,36:Pn.VIDEO,66:Pn.UNKNOWN,127:Pn.UNKNOWN,128:Pn.AUDIO,129:Pn.AUDIO,130:Pn.AUDIO,131:Pn.AUDIO,132:Pn.AUDIO,133:Pn.AUDIO,134:Pn.AUDIO,135:Pn.AUDIO,144:Pn.UNKNOWN,145:Pn.UNKNOWN,192:Pn.UNKNOWN,193:Pn.AUDIO,194:Pn.AUDIO,207:Pn.UNKNOWN,209:Pn.VIDEO,210:Pn.VIDEO,219:Pn.UNKNOWN,234:Pn.VIDEO};!function(e){e[e.NETWORK=0]="NETWORK",e[e.MAP_PID=1]="MAP_PID"}(_a||(_a={}));var ga,ba=function(e){this.programs=[],this.tableId=e.read(1);var t=new nn(e.read(2),16);this.sectionSyntaxIndicator=t.read(1),t.skip(1),t.skip(2),this.sectionLength=t.read(12),this.transportStreamId=e.read(2);var r=new nn(e.read(1),8);r.skip(2),this.versionNumber=r.read(5),this.currentNextIndicator=r.read(1),this.sectionNumber=e.read(1),this.lastSectionNumber=e.read(1);for(var n=0;n<this.sectionLength-12;n+=4)this.programs.push({number:e.read(2),pid:8191&e.read(2)});this.crc32=e.read(4)},Ea=function(e){this.streamId=e.read(1),this.pesPacketLength=e.read(2);var t=new nn(e.read(2),16);t.skip(2),this.pesScramblingControl=t.read(2),this.pesPriority=t.read(1),this.dataAlignmentIndicator=t.read(1),this.copyright=t.read(1),this.originalOrCopy=t.read(1),this.ptsDtsFlags=t.read(2),this.esCRFlag=t.read(1),this.esRateFlag=t.read(1),this.dsmTrickModeFlag=t.read(1),this.additionalCopyInfoFlag=t.read(1),this.pesCRCFlag=t.read(1),this.pesExtensionFlag=t.read(1),this.pesHeaderDataLength=e.read(1);var r=e.offset;2&this.ptsDtsFlags?(this.pts=(14&e.read(1))<<27|e.read(2)>>>1<<13|e.read(2)>>>3,this.pts*=4,e.back(1),this.pts+=(6&e.read(1))>>>1,1&this.ptsDtsFlags?(this.dts=(14&e.read(1))<<27|e.read(2)>>>1<<13|e.read(2)>>>3,this.dts*=4,e.back(1),this.dts+=(6&e.read(1))>>>1):this.dts=this.pts):(this.pts=0,this.dts=0);var n=this.pesHeaderDataLength-(e.offset-r);n>0&&e.skip(n),this.data=e.readToUint8()},Ta=function(e){this.streams=[],this.tableId=e.read(1);var t=new nn(e.read(2),16);this.sectionSyntaxIndicator=t.read(1),t.skip(1),t.skip(2),this.sectionLength=t.read(12),this.programNumber=e.read(2);var r=new nn(e.read(1),8);r.skip(2),this.versionNumber=r.read(5),this.currentNextIndicator=r.read(1),this.sectionNumber=e.read(1),this.lastSectionNumber=e.read(1),this.pcrPid=8191&e.read(2),this.programInfoLength=4095&e.read(2);for(var n=12+this.programInfoLength;n<=this.sectionLength-2;n+=5){var o={streamType:e.read(1),pid:8191&e.read(2),esInfoLength:4095&e.read(2)};this.streams.push(o),e.skip(o.esInfoLength),n+=o.esInfoLength}this.crc32=e.read(4)};!function(e){e[e.PAT=0]="PAT",e[e.CAT=1]="CAT",e[e.TSDT=2]="TSDT"}(ga||(ga={}));var wa,Sa=function(){function e(e){var t=new nn(e.read(4),32);if(this.syncByte=t.read(8),this.errorIndicator=t.read(1),this.payloadUnitStartIndicator=t.read(1),this.transportPriority=t.read(1),this.pid=t.read(13),this.transportScramblingControl=t.read(2),this.adaptationFlag=t.read(1),this.payloadFlag=t.read(1),this.continueCounter=t.read(4),this.adaptationFlag){var r=e.read(1);e.skip(r)}this.payloadUnitStartIndicator&&e.skip(1)}return e.SYNC_BYTE=71,e}(),Oa=r(378),Aa=r.n(Oa),Pa=(Object.freeze({formatType:An.UNKNOWN,live:!1,progressive:!1,url:"",basePTS:0,baseDTS:0,timescale:0,duration:0,tracks:[]}),Object.freeze({type:Pn.VIDEO,id:0,baseDTS:0,basePTS:0,timescale:1e3,codec:"",width:0,height:0,vps:[],pps:[],sps:[],sei:[],pixelRatio:[],fps:0,live:!1})),Ra=Object.freeze({type:Pn.AUDIO,id:1,baseDTS:0,basePTS:0,timescale:1e3,codec:"",audioObjectType:2,samplingFrequencyIndex:0,sampleRate:0,sampleSize:16,channelCount:0}),xa=function(){function e(){this.list=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.list.length},enumerable:!1,configurable:!0}),e.prototype.write=function(e){this.list.push(e)},e.prototype.read=function(){return this.list.shift()},e.prototype.readAll=function(){var e=this.list;return this.list=[],e},e.prototype.clear=function(){this.list=[]},e}(),Ca=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Na=188;!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.PAT=1]="PAT",e[e.PES=2]="PES",e[e.PMT=3]="PMT"}(wa||(wa={}));var La=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.patPrograms=[],t.pmtStreams=[],t.prevPesSegments=[],t.packetQueue=new xa,t.audioLoaded=!1,t.videoLoaded=!1,t.metadataChanged=!1,t.metadata=null,t.formatType=An.MPEGTS,t}return Ca(t,e),t.probe=function(e){if(e.byteLength<1)return!1;for(var t=0,r=e.byteLength;t<r;t+=Na)if(e[t]!==Sa.SYNC_BYTE)return!1;return!0},t.prototype.splitToTsPacket=function(e){var t=e;this.unhandleBuffer&&this.unhandleBuffer.byteLength&&(t=$r.concat(this.unhandleBuffer,t),this.unhandleBuffer=void 0);for(var r=new Uint8Array(t),n=r.byteLength,o=0;o+Na<=n;){if(r[o]!==Sa.SYNC_BYTE){var i=new Uint8Array(r.buffer,o).findIndex((function(e){return e===Sa.SYNC_BYTE}));if(console.warn("[videox] mpegts sync byte error",r[o],o,i),i>-1){o+=i;continue}break}this.parseTsPacket(r.subarray(o,o+Na)),o+=Na}o<n&&(this.unhandleBuffer=t.slice(o))},t.prototype.parseTsPacket=function(e){var t=$r.fromUint8(e),r=new Sa(t),n=null;if(r.pid===ga.PAT)n=new ba(t),this.patPrograms=n.programs,this.emitTSPacket(wa.PAT,r,n);else if(this.patPrograms.some((function(e){return e.pid===r.pid}))){n=new Ta(t);var o=mn()(this.pmtStreams,n.streams);o&&this.emitPackets(),this.metadataChanged=o,this.pmtStreams=n.streams,this.emitTSPacket(wa.PMT,r,n)}else{var i=this.pmtStreams.find((function(e){return e.pid===r.pid}));i?(r.payloadUnitStartIndicator&&this.parsePes(),this.prevPesSegments.push(t.readToUint8()),this.prevPesTSHeader=r,this.prevPmtStream=i):this.emitTSPacket(wa.UNKNOWN,r,n)}},t.prototype.parsePes=function(){var e=this.prevPmtStream;if(this.prevPesSegments.length&&this.prevPesTSHeader&&e){var t=$r.fromUint8($r.concatUint8s(this.prevPesSegments));if(this.prevPesSegments=[],1===t.read(2)){var r=new Ea(t);this.emitTSPacket(wa.PES,this.prevPesTSHeader,r),e.streamType===zi.H265||e.streamType===zi.H264?this.parseVideoPes(r,e):e.streamType===zi.AAC&&this.parseAudioPes(r,e)}}},t.prototype.parseVideoPes=function(e,t){var r=Math.round(e.dts/90),n=Math.round(e.pts/90),o=t.streamType===zi.H265,i={},a=!0,s=!1,u=[],c=[],l=[],p=[];if(an.extractAnnexbNAL(e.data).forEach((function(e){var t=$r.fromUint8(e);if(!(e.length<2))if(o){if((n=new hn(t)).nalType<ln.ACCESS_UNIT_DELIMITER){if(n.nalType>=ln.VPS)if(n.nalType===ln.SPS){s=!0;var r=new In(qn(t.readToUint8()));i.width=r.width,i.height=r.height,i.pixelRatio=r.pixelRatio,i.codec=r.codec,c.push(e)}else n.nalType===ln.VPS?l.push(e):n.nalType===ln.PPS&&p.push(e);mr.isSafari?n.nalType===ln.TRAIL_R||n.nalType===ln.TRAIL_N||n.nalType===ln.IDR_W_RADL||n.nalType===ln.IDR_N_LP||n.nalType===ln.CRA||n.nalType===ln.SPS||n.nalType===ln.VPS||n.nalType===ln.PPS||n.nalType===ln.SEI?u.push(e):console.warn("skip this nalu nalType:",n.nalType):u.push(e),a=hn.isNonRefNALType(n.nalType)&&a}}else{var n;if((n=new pn(t)).nalType<un.DIVIDER){if(n.nalType===un.SPS){s=!0;r=new Ln(qn(t.readToUint8()));i.width=r.width,i.height=r.height,i.pixelRatio=r.pixelRatio,i.codec=r.codec,c.push(e)}else n.nalType===un.PPS&&p.push(e);u.push(e)}a=!1}})),!this.videoLoaded){if(!s)return;this.videoLoaded=!0,i.baseDTS=r,i.basePTS=n}l.length&&(i.vps=l),c.length&&(i.sps=c),p.length&&(i.pps=p),this.videoMetadata?(this.metadataChanged=gn(this.videoMetadata,i),this.metadataChanged&&this.emit("updatedtrackmetadata",this.videoMetadata)):(this.videoMetadata=Aa()({},Pa,i),this.metadataChanged=!0),this.checkMetadataChanged(),this.packetQueue.write({trackId:t.pid,codec:this.videoMetadata.codec,trackType:Pn.VIDEO,isSync:s,isNonRef:a,data:u,dts:r,pts:n,size:u.reduce((function(e,t){return e+t.byteLength}),0)})},t.prototype.parseAudioPes=function(e,t){var r=this,n={},o=Math.round(e.dts/90),i=Math.round(e.pts/90);this.audioLoaded||(this.audioLoaded=!0,n.baseDTS=o,n.basePTS=i);var a=function(e){for(var t,r,n=[],o=0,i=e.byteLength;o+6<i;)en(e,o)?(t=tn(e,o),r=rn(e,o),n.push({audioObjectType:1+(e[2]>>>6),sampleRate:Qr[e[2]>>>2&15],samplingFrequencyIndex:e[2]>>>2&15,channelCount:(1&e[2])<<2|e[3]>>>6,numberOfRawDataBlocksInFrame:0,data:e.subarray(o+t,o+r)}),o+=r):o++;return n}(e.data);if(a.length){var s=a[0],u="mp4a.40."+s.audioObjectType;n.codec=u,n.audioObjectType=s.audioObjectType,n.sampleRate=s.sampleRate,n.channelCount=s.channelCount,this.audioMetadata?(this.metadataChanged=gn(this.audioMetadata,n),this.metadataChanged&&this.emit("updatedtrackmetadata",this.audioMetadata)):(this.audioMetadata=Aa()({},Ra,n),this.metadataChanged=!0),this.checkMetadataChanged();var c=Math.round(9216e4/s.sampleRate/90);a.forEach((function(e,n){r.packetQueue.write({trackId:t.pid,codec:u,trackType:Pn.AUDIO,isSync:!0,isNonRef:!0,data:[e.data],dts:c*n+o,pts:c*n+i,size:e.data.byteLength})}))}},t.prototype.checkMetadataChanged=function(){var e=this;if(this.pmtStreams.length&&this.metadataChanged){var t=[],r=this.pmtStreams.every((function(r){var n=ma[r.streamType];return n===Pn.VIDEO?(e.videoMetadata&&t.push(e.videoMetadata),!(!e.videoMetadata||!e.videoMetadata.codec)):n!==Pn.AUDIO||(e.audioMetadata&&t.push(e.audioMetadata),!(!e.audioMetadata||!e.audioMetadata.codec))}));if(r){var n={formatType:An.MPEGTS,live:!1,progressive:!!this.options.progressive,url:this.loader.url,basePTS:Math.min.apply(Math,t.map((function(e){return e.basePTS||0}))),baseDTS:Math.min.apply(Math,t.map((function(e){return e.baseDTS||0}))),timescale:1e3,duration:0,tracks:t};this.metadataChanged=!1,this.metadata?gn(this.metadata,n)&&this.emit("updatedmetadata",this.metadata):(this.metadata=n,this.emit("loadedmetadata",this.metadata))}}return this.metadataChanged},t.prototype.emitTSPacket=function(e,t,r){Rn.debug("loadedtspacket","type:",wa[e],"header:",t,"payload:",r),this.emit("loadedtspacket",{type:e,header:t,payload:r})},t.prototype.emitPackets=function(){if(this.metadata&&this.loader.status!==$n.SUSPENGING&&!this.metadataChanged&&this.packetQueue.size>0){var e=this.packetQueue.readAll();this.emit("loadeddata",{packets:e})}},t.prototype.continuousLoad=function(e){return this.loader.load(e)},t.prototype.parse=function(e){this.splitToTsPacket(e),this.emitPackets()},t.prototype.onProgress=function(e){e.data.byteLength&&this.parse(e.data.buffer)},t.prototype.onLoadEnd=function(){this.parsePes(),this.emitPackets(),this.loader.eof&&this.emit("end",void 0)},t.prototype.resume=function(){return this.options.progressive?e.prototype.resume.call(this):Promise.resolve(!1)},t.prototype.flush=function(){this.unhandleBuffer=void 0,this.prevPesTSHeader=void 0,this.prevPmtStream=void 0,this.prevPesSegments=[]},t.prototype.seek=function(){this.reset(),this.loader.jump(0)},t.prototype.reset=function(){e.prototype.reset.call(this),this.flush(),this.audioLoaded=!1,this.videoLoaded=!1,this.packetQueue.clear(),this.patPrograms=[],this.pmtStreams=[],this.metadata=null,this.audioMetadata=void 0,this.videoMetadata=void 0,this.metadataChanged=!1},t}(lo),Da=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ka=function(){return ka=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ka.apply(this,arguments)},Ia={M3U:/^#EXTM3U/,INF:/^#EXTINF:?([0-9\.]*)?,?(.*)?(?:\n|\r\n)(.*)$/,X_TARGETDURATION:/^#EXT-X-TARGETDURATION:?([0-9.]*)?/,X_VERSION:/^#EXT-X-VERSION:?([0-9.]*)?/,X_MEDIA_SEQUENCE:/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/,X_DISCONTINUITY_SEQUENCE:/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/,X_PLAYLIST_TYPE:/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/,X_BYTERANGE:/^#EXT-X-BYTERANGE:?(.*)?$/,X_ALLOW_CACHE:/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/,X_MAP:/^#EXT-X-MAP:?(.*)$/,X_STREAM_INF:/^#EXT-X-STREAM-INF:?(.*)$/,X_MEDIA:/^#EXT-X-MEDIA:?(.*)$/,X_ENDLIST:/^#EXT-X-ENDLIST/,X_DISCONTINUITY:/^#EXT-X-DISCONTINUITY/,X_PROGRAM_DATE_TIME:/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/,X_KEY:/^#EXT-X-KEY:?(.*)$/,X_START:/^#EXT-X-START:?(.*)$/,X_CUE_OUT_CONT:/^#EXT-X-CUE-OUT-CONT:?(.*)?$/,X_CUE_OUT:/^#EXT-X-CUE-OUT:?(.*)?$/,X_CUE_IN:/^#EXT-X-CUE-IN:?(.*)?$/,X_SKIP:/^#EXT-X-SKIP:(.*)$/,X_PART:/^#EXT-X-PART:(.*)$/,X_SERVER_CONTROL:/^#EXT-X-SERVER-CONTROL:(.*)$/,X_PART_INF:/^#EXT-X-PART-INF:(.*)$/,X_PRELOAD_HINT:/^#EXT-X-PRELOAD-HINT:(.*)$/,X_RENDITION_REPORT:/^#EXT-X-RENDITION-REPORT:(.*)$/},Ua=function(e){function t(t){var r=e.call(this,t)||this;return r.mpegtsParser=new La({progressive:!0,timeout:r.options.timeout}),r.currSegmentIndex=0,r.isLive=!1,r.shouldContinuousLoad=!0,r.ended=!1,r.prevManifestLoadedTime=0,r.fetchTimer=-1,r.discontinuity=!1,r.m3u8UpdateDuration=2,r.bufferSegments=[],r.cachePackets=[],r.formatType=An.HLS,r.segments=[],r.handleTSEnd=function(){r.currSegmentIndex>=r.segments.length-1&&r.emit("end",void 0)},r.handleTSLoadedMetadata=function(e){void 0===r.basePTS&&(r.basePTS=e.basePTS),void 0===r.baseDTS&&(r.baseDTS=e.baseDTS);var t=ka(ka({},e),{formatType:An.HLS,live:r.isLive,progressive:!0,basePTS:r.basePTS,baseDTS:r.baseDTS,duration:r.duration,url:r.loader.url,discontinuity:r.discontinuity});r.metadata?gn(r.metadata,t)&&r.emit("updatedmetadata",r.metadata):(r.metadata=t,r.emit("loadedmetadata",r.metadata))},r.handleTSLoadedData=function(e){var t,n=e.packets;if(n.length){if(null===(t=r.currentSegment)||void 0===t?void 0:t.discontinuity){var o=n.slice().sort((function(e,t){return e.pts-t.pts}));void 0===r.currSegmentStartPTS&&(r.currSegmentStartPTS=o[0].pts);var i=r.currSegmentStartPTS,a=Math.round(1e3*r.prevSegmentsTotalDuration)+(r.basePTS||0);o.forEach((function(e){var t=e.dts-e.pts;e.pts=a+e.pts-i,e.dts=e.pts+t}))}var s;r.cachePackets.length?(s=r.cachePackets.concat(n),r.cachePackets=[]):s=n,r.shouldContinuousLoad?r.emit("loadeddata",{packets:s}):r.cachePackets=s}},r.handleTSLoadEnd=function(){r.currSegmentIndex++,r.loadSegment()},r.mpegtsParser.on("loadedmetadata",r.handleTSLoadedMetadata),r.mpegtsParser.on("updatedmetadata",r.handleTSLoadedMetadata),r.mpegtsParser.on("loadeddata",r.handleTSLoadedData),r.mpegtsParser.on("end",r.handleTSEnd),r.mpegtsParser.loader.on("loadend",r.handleTSLoadEnd),r.mpegtsParser.loader.proxy(r,["error"]),r.mpegtsParser.proxy(r,["updatedtrackmetadata"]),r}return Da(t,e),t.probe=function(e){if(e.byteLength>=7){var t=[];return e.forEach((function(e){return t.push(String.fromCharCode(e))})),Ia.M3U.test(t.join(""))}return!1},Object.defineProperty(t.prototype,"status",{get:function(){return this.loader.eof?this.mpegtsParser.status===$n.IDLE?this.shouldContinuousLoad?$n.LOADING:$n.SUSPENGING:this.mpegtsParser.status:this.loader.status},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this.isLive?1/0:Math.round(1e3*this.segments.reduce((function(e,t){return e+t.duration}),0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentSegment",{get:function(){return this.segments[this.currSegmentIndex]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"prevSegmentsTotalDuration",{get:function(){return this.segments.slice(0,this.currSegmentIndex).reduce((function(e,t){return e+t.duration}),0)},enumerable:!1,configurable:!0}),t.prototype.insertSegment=function(e){var t=!this.segments.some((function(t){return t.uri===e.uri}));return t&&this.segments.push(e),t},t.prototype.onProgress=function(e){this.bufferSegments.push(e)},t.prototype.onLoadEnd=function(){var e=this;if(this.loader.eof){var t=$r.concatUint8s(this.bufferSegments.map((function(e){return e.data})));if(this.bufferSegments=[],t.byteLength){var r,n=(new TextDecoder).decode(t).split(/\n#/).map((function(e){return"#"+e.trim()})),o=0,i=!1,a=!1;n.forEach((function(t){var n=t.match(Ia.INF);if(n){var s={sequence:o,duration:parseFloat(n[1]),uri:new URL(n[3],e.url).href,discontinuity:a};e.insertSegment(s),e.emit("loadedsegment",s)}else(r=t.match(Ia.X_MEDIA_SEQUENCE))?o=Number(r[1]):Ia.X_ENDLIST.test(t)?i=!0:Ia.X_DISCONTINUITY.test(t)&&(a=!0)})),this.discontinuity=a,this.isLive=!i,this.segments.length||this.emit("error",{code:En.PARSER,message:"M3U8文件无TS数据"}),this.prevManifestLoadedTime=Date.now(),this.loadSegment()}Rn.info("hls manifest loaded, all segments length:",this.segments.length)}},t.prototype.loadSegment=function(){var e=this;if(!this.shouldContinuousLoad)return Promise.resolve(!1);var t=this.segments[this.currSegmentIndex];if(this.isLive&&!t){var r=1e3*this.m3u8UpdateDuration-(Date.now()-this.prevManifestLoadedTime);return r<=0?this.loader.load(this.loader.url):new Promise((function(t){clearTimeout(e.fetchTimer),e.fetchTimer=setTimeout((function(){t(e.loader.load(e.loader.url))}),r)}))}return t?(this.cachePackets=[],this.m3u8UpdateDuration=t.duration||2,this.currSegmentStartPTS=void 0,this.mpegtsParser.continuousLoad(t.uri)):(this.ended=!0,Promise.resolve(!1))},t.prototype.suspend=function(){clearTimeout(this.fetchTimer),this.shouldContinuousLoad=!1},t.prototype.resume=function(){if(this.cachePackets.length){var t=this.cachePackets;return this.cachePackets=[],this.emit("loadeddata",{packets:t}),Promise.resolve(!1)}return this.shouldContinuousLoad||this.ended?Promise.resolve(!1):(this.shouldContinuousLoad=!0,this.loader.eof?this.mpegtsParser.loader.status===$n.LOADING||this.mpegtsParser.loader.status===$n.ERROR?Promise.resolve(!0):this.loadSegment():e.prototype.resume.call(this))},t.prototype.seek=function(e){this.ended=!1;var t=0,r=this.segments.findIndex((function(r){return t+=r.duration,e<t}));this.currSegmentIndex=r>-1?r:this.segments.length-1,this.cachePackets=[],this.bufferSegments=[],this.mpegtsParser.suspend(),this.mpegtsParser.flush(),this.shouldContinuousLoad=!0,this.loadSegment()},t.prototype.reset=function(){clearTimeout(this.fetchTimer),e.prototype.reset.call(this),this.discontinuity=!1,this.cachePackets=[],this.bufferSegments=[],this.shouldContinuousLoad=!0,this.mpegtsParser.reset(),this.segments=[],this.currSegmentIndex=0,this.isLive=!1,this.ended=!1},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.mpegtsParser.loader.removeAllListeners(),this.mpegtsParser.destroy()},t}(lo),Ma=r(801),ja=r.n(Ma),Fa=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Va=function(){return Va=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Va.apply(this,arguments)},Ba=["loadedmetadata","updatedmetadata","updatedtrackmetadata","loadeddata","error","end"],Wa=[ya,Ua,Lo,La],Ga=function(e){function t(t){void 0===t&&(t={});var r=e.call(this)||this;return r.loader=new uo,r.parserClasses=Wa,r.logger=Rn,r.handleFirstLoadData=function(e){if(e){var t=r.parserClasses.find((function(t){return t.probe(e.data)}));if(t){var n=r.activeParser.formatType;r.activeParser.destroy(),r.activeParser=r.createParser(t),Rn.info("切换parser, ".concat(An[n]," -> ").concat(An[r.activeParser.formatType])),r.emit("parserchange",void 0),r.activeParser.onProgress(e)}else{var o="未找到对应的Parser, Byte数据: "+e.data.slice(0,20).join(",");Rn.error(o),r.emit("error",{code:En.PARSER,message:o})}}},r.options=t,r.loader=r.createLoader(),r.activeParser=r.createParser(r.parserClasses[0]),r.logger.info("demuxer options",t),r}return Fa(t,e),t.prototype.createLoader=function(){var e=new uo(this.options);return e.proxy(this,["progress","error"]),e.proxyOnce(this,["loadstart","loadend"]),e.once("progress",this.handleFirstLoadData),e},t.prototype.createParser=function(e){var t=new e(Va(Va({},this.options),{loader:this.loader}));return t.proxy(this,Ba),t},Object.defineProperty(t.prototype,"skipFrame",{get:function(){return this.activeParser.skipFrame},set:function(e){Rn.info("设置skipFrame:",e),ja()(e)||(this.options.skipFrame=e,this.activeParser.skipFrame=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this.activeParser.status},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return this.loader.url},enumerable:!1,configurable:!0}),t.prototype.parse=function(e){Rn.info("执行parse"),this.loader.reset(),this.handleFirstLoadData({offset:0,data:e}),this.activeParser.onLoadEnd()},t.prototype.load=function(e){return Rn.info("执行load",e),this.loader.destroy(),this.loader=this.createLoader(),this.loader.load(e)},t.prototype.seek=function(e){return Rn.info("执行seek",e),this.activeParser.seek(e)},t.prototype.suspend=function(){return this.activeParser.suspend()},t.prototype.resume=function(){return this.activeParser.resume()},t.prototype.destroy=function(){Rn.info("执行destory"),this.loader.destroy(),this.activeParser.destroy(),this.removeAllListeners()},t}(Zn),Ha=function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},za=function(e){return e.split("").map((function(e){return e.charCodeAt(0)}))},Xa=function(){function e(){}return e.prototype.create=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=new Uint8Array(8),o=[n].concat(t.map((function(e){return new Uint8Array(e)}))),i=o.reduce((function(e,t){return e+t.byteLength}),0),a=new $r(n.buffer);return a.write(4,i),za(e).forEach((function(e){return a.write(1,e)})),$r.concatUint8s(o)},e.prototype.avc1=function(e){var t=e.pixelRatio,r=e.vps,n=new ArrayBuffer(78),o=new $r(n);o.write(4,0),o.write(2,0),o.write(2,1),o.write(4,0),o.write(4,0),o.write(4,0),o.write(4,0),o.write(2,e.width),o.write(2,e.height),o.write(4,4718592),o.write(4,4718592),o.write(4,0),o.write(2,1);var i="@ali/splayer";o.write(1,12),za(i).forEach((function(e){return o.write(1,e)})),o.skip(19),o.write(2,24),o.write(2,65535);var a=2===t.length?this.pasp(t[0],t[1]):[];return r.length?this.create("hvc1",n,this.hvcC(e),a):this.create("avc1",n,this.avcC(e),a)},e.prototype.avcC=function(e){var t=e.sps,r=e.pps,n=[],o=[];n.push(t.length),t.forEach((function(e){n.push(e.byteLength>>>8&255),n.push(255&e.byteLength),e.forEach((function(e){return n.push(e)}))})),o.push(r.length),r.forEach((function(e){o.push(e.byteLength>>>8&255),o.push(255&e.byteLength),e.forEach((function(e){return o.push(e)}))}));var i=new ArrayBuffer(5),a=new $r(i);return a.write(1,1),a.write(1,n[4]||0),a.write(1,n[5]||0),a.write(1,n[6]||0),a.write(1,255),this.create("avcC",i,n,o)},e.prototype.btrt=function(){var e=new ArrayBuffer(12),t=new $r(e);return t.write(4,1875072),t.write(4,3e6),t.write(4,3e6),this.create("btrt",e)},e.prototype.pasp=function(e,t){var r=new ArrayBuffer(8),n=new $r(r);return n.write(4,e),n.write(4,t),this.create("pasp",r)},e.prototype.dinf=function(){return this.create("dinf",this.dref())},e.prototype.dref=function(){var e=new ArrayBuffer(8),t=new $r(e);return t.write(4,0),t.write(4,1),this.create("dref",e,this.url())},e.prototype.esds=function(e){var t=e.audioObjectType,r=e.sampleRate,n=e.channelCount,o=new ArrayBuffer(33),i=new $r(o),a=t>=5;i.write(4,0),i.write(1,3),i.write(1,a?27:25),i.write(2,1),i.write(1,0),i.write(1,4),i.write(1,a?19:17),i.write(1,64),i.write(1,21),i.write(3,0),i.write(4,0),i.write(4,0),i.write(1,5),i.write(1,a?4:2);var s=Qr.findIndex((function(e){return r===e}));if(i.write(1,t<<3|(14&s)>>1),a){var u=s;i.write(1,(1&s)<<7|n<<3|(14&u)>>1),i.write(1,(1&u)<<7|8),i.write(1,0)}else i.write(1,(1&s)<<7|n<<3);return i.back(4),i.skip(4),i.write(1,6),i.write(1,1),i.write(1,2),this.create("esds",o)},e.prototype.ftyp=function(){var e=new ArrayBuffer(16),t=new $r(e);return za("isom").forEach((function(e){return t.write(1,e)})),t.write(4,1),za("isom").forEach((function(e){return t.write(1,e)})),za("avc1").forEach((function(e){return t.write(1,e)})),this.create("ftyp",e)},e.prototype.hdlr=function(e){var t=new ArrayBuffer(37),r=new $r(t);return r.skip(8),e===Pn.VIDEO?za("vide").forEach((function(e){return r.write(1,e)})):e===Pn.AUDIO&&za("soun").forEach((function(e){return r.write(1,e)})),r.skip(12),e===Pn.VIDEO?za("VideoHandler").forEach((function(e){return r.write(1,e)})):e===Pn.AUDIO&&za("SoundHandler").forEach((function(e){return r.write(1,e)})),r.write(1,0),this.create("hdlr",t)},e.prototype.hvcC=function(e){var t=e.vps,r=e.sps,n=e.pps,o=[],i=[{type:ln.VPS,data:t},{type:ln.SPS,data:r},{type:ln.PPS,data:n}];i.forEach((function(e){var t=e.type,r=e.data;o.push(128|t),o.push(r.length>>>8&255),o.push(255&r.length),r.forEach((function(e){o.push(e.byteLength>>>8&255),o.push(255&e.byteLength),e.forEach((function(e){return o.push(e)}))}))}));var a=new ArrayBuffer(23),s=new $r(a),u=r.length?r[0]:[];s.write(1,1);for(var c=1;c<12;c++)s.write(1,u[c]||0);return s.write(1,0),s.write(2,0),s.write(1,0),s.write(1,1),s.write(1,0),s.write(1,0),s.write(2,0),s.write(1,15),s.write(1,i.length),this.create("hvcC",a,o)},e.prototype.mdat=function(e){return this.create("mdat",e)},e.prototype.mdhd=function(e){var t=new ArrayBuffer(24),r=new $r(t);return r.write(4,0),r.write(4,0),r.write(4,0),r.write(4,e.timescale),r.write(4,0),r.write(2,21956),r.write(2,0),this.create("mdhd",t)},e.prototype.mdia=function(e){return this.create("mdia",this.mdhd(e),this.hdlr(e.type),this.minf(e))},e.prototype.mfhd=function(e){var t=new ArrayBuffer(8),r=new $r(t);return r.write(4,0),r.write(4,e),this.create("mfhd",t)},e.prototype.minf=function(e){var t=e.type===Pn.VIDEO?this.vmhd():this.smhd();return this.create("minf",t,this.dinf(),this.stbl(e))},e.prototype.moof=function(e,t,r){var n=this,o=this.mfhd(t),i=8+o.byteLength+60*e.tracks.length+16*r.length+8,a=e.tracks.map((function(e){var t=r.filter((function(t){return t.trackType===e.type})),o=n.traf(e,t,i);return i+=t.reduce((function(e,t){return e+t.size}),0),o}));return this.create.apply(this,Ha(["moof",o],a,!1))},e.prototype.moov=function(e){var t=this,r=e.tracks.map((function(e){return t.trak(e)}));return this.create.apply(this,Ha(Ha(["moov",this.mvhd(e)],r,!1),[this.mvex(e)],!1))},e.prototype.mp4a=function(e){var t=new ArrayBuffer(28),r=new $r(t);return r.write(4,0),r.write(2,0),r.write(2,1),r.write(4,0),r.write(4,0),r.write(2,e.channelCount),r.write(2,e.sampleSize),r.write(4,0),r.write(4,e.sampleRate<<16),this.create("mp4a",t,this.esds(e))},e.prototype.mvex=function(e){var t=this;return this.create.apply(this,Ha(["mvex"],e.tracks.map((function(e){return t.trex(e)})),!1))},e.prototype.mvhd=function(e){var t=new ArrayBuffer(100),r=new $r(t);r.write(4,0),r.write(4,0),r.write(4,0),r.write(4,e.timescale),r.write(4,e.duration),r.write(2,1),r.skip(2),r.write(1,1),r.skip(1),r.skip(10);return[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0].forEach((function(e){return r.write(1,e)})),r.skip(24),r.write(4,4294967295),this.create("mvhd",t)},e.prototype.sdtp=function(e){var t=e.length,r=new ArrayBuffer(4+t),n=new $r(r);n.write(4,0);for(var o=0;o<t;o++){var i=e[o];n.write(1,i.flag)}return this.create("sdtp",r)},e.prototype.smhd=function(){var e=new ArrayBuffer(8),t=new $r(e);return t.write(4,0),t.write(4,0),this.create("smhd",e)},e.prototype.stbl=function(e){return this.create("stbl",this.stsd(e),this.stts(),this.stsc(),this.stsz(),this.stco())},e.prototype.stco=function(){var e=new ArrayBuffer(8),t=new $r(e);return t.write(4,0),t.write(4,0),this.create("stco",e)},e.prototype.stsc=function(){var e=new ArrayBuffer(8),t=new $r(e);return t.write(4,0),t.write(4,0),this.create("stsc",e)},e.prototype.stsd=function(e){var t=new ArrayBuffer(8),r=new $r(t);return r.write(4,0),r.write(4,1),e.type===Pn.VIDEO?this.create("stsd",t,this.avc1(e)):e.type===Pn.AUDIO?this.create("stsd",t,this.mp4a(e)):this.create("stsd",t)},e.prototype.stsz=function(){var e=new ArrayBuffer(12),t=new $r(e);return t.write(4,0),t.write(4,0),t.write(4,0),this.create("stsz",e)},e.prototype.stts=function(){var e=new ArrayBuffer(8),t=new $r(e);return t.write(4,0),t.write(4,0),this.create("stts",e)},e.prototype.tkhd=function(e){var t=new ArrayBuffer(84),r=new $r(t);r.write(4,7),r.write(4,0),r.write(4,0),r.write(4,e.id),r.write(4,0),r.write(4,0),r.write(4,0),r.write(4,0),r.write(4,0),r.write(1,0),r.write(1,0),r.write(2,0);return[0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0].forEach((function(e){return r.write(1,e)})),r.write(2,e.width||0),r.write(2,0),r.write(2,e.height||0),r.write(2,0),this.create("tkhd",t)},e.prototype.tfdt=function(e){var t=new ArrayBuffer(8),r=new $r(t);return r.write(4,0),r.write(4,e),this.create("tfdt",t)},e.prototype.tfhd=function(e){var t=new ArrayBuffer(8),r=new $r(t);return r.write(4,0),r.write(4,e.id),this.create("tfhd",t)},e.prototype.traf=function(e,t,r){void 0===r&&(r=0);var n=t.length?t[0].dts:0;return this.create("traf",this.tfhd(e),this.tfdt(n),this.trun(t,r))},e.prototype.trak=function(e){return this.create("trak",this.tkhd(e),this.mdia(e))},e.prototype.trex=function(e){var t=new ArrayBuffer(24),r=new $r(t);return r.write(4,0),r.write(4,e.id),r.write(4,1),r.write(4,0),r.write(4,0),r.write(4,65537),this.create("trex",t)},e.prototype.trun=function(e,t){var r=e.length,n=new ArrayBuffer(12+16*r),o=new $r(n);o.write(4,3841),o.write(4,e.length),o.write(4,t);for(var i=0;i<r;i++){var a=e[i];o.write(4,a.duration),o.write(4,a.size),o.write(4,a.flag),o.write(4,a.cts)}return this.create("trun",n)},e.prototype.vmhd=function(){var e=new ArrayBuffer(12),t=new $r(e);return t.write(4,1),t.write(2,0),t.write(2,0),t.write(2,0),t.write(2,0),this.create("vmhd",e)},e.prototype.url=function(){var e=new ArrayBuffer(4);return new $r(e).write(4,1),this.create("url ",e)},e}();const Ya=Xa;const qa=function(){function e(){}return e.createSilentFrame=function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return new Uint8Array},e.FRAME_DURATION=1024,e}();var Ka=function(){function e(){this.logger=new Hr("remux"),this.generator=new Ya,this.config={formatType:An.MP4,live:!1,progressive:!1,url:"",basePTS:0,baseDTS:0,timescale:0,duration:0,tracks:[]},this.sequenceNumber=0,this.offset=0,this.videoInited=!1,this.audioInited=!1,this.lastPacketMap=new Map}return e.prototype.updateConfig=function(e){Object.assign(this.config,e)},e.prototype.createInitSegment=function(){var e=$r.concatUint8(this.generator.ftyp(),this.generator.moov(this.config));return this.offset=e.byteLength,e},e.prototype.createSegment=function(e){var t=this;if(!e.length)return new Uint8Array;var r=[];this.config.tracks.forEach((function(n){var o=e.filter((function(e){return e.trackType===n.type}));if(o.length){var i=null;n.type===Pn.VIDEO?i=t.recaculateVideoSamples(o,n):n.type===Pn.AUDIO&&(i=t.recaculateAudioSamples(o,n)),i&&(r.push(t.generator.moof(t.config,++t.sequenceNumber,i)),r.push(t.generator.mdat($r.concatUint8s(i.map((function(e){return e.data}))))))}}));var n=$r.concatUint8s(r);return this.offset+=n.byteLength,n},e.prototype.createSlientFrames=function(e,t,r,n){var o=[];if(r>1.5*n){this.logger.warn("remux audio found pts hole at pts:",e,"timestamp:",(e-this.config.basePTS)/t.timescale,"gap duration:",r,"sample duration:",n);for(var i=qa.createSilentFrame(t.codec,t.channelCount),a=Math.ceil(r/n),s=0;s<a;s++)o.push({flag:Un.DEPENDS_NO,trackType:Pn.AUDIO,dts:e+n*s,cts:0,duration:n,size:i.byteLength,data:i,isSync:!0});o.length&&(o[o.length-1].duration=r-(a-1)*n)}return o},e.prototype.recaculateAudioSamples=function(e,t){var r=[];this.prevAudioPacket&&(e.unshift(this.prevAudioPacket),this.prevAudioPacket=void 0);var n,o,i=Math.round(qa.FRAME_DURATION/t.sampleRate*t.timescale);if(!this.audioInited&&e.length){this.audioInited=!0;var a=e[0].pts-this.config.basePTS;this.createSlientFrames(this.config.basePTS,t,a,i).forEach((function(e){r.push(e)}))}for(var s=0,u=0,c=0,l=e.length;s<l;s++){if(n=e[s],o=e[s+1]){if((c=o.dts-n.dts)<0){if(!((u=e.findIndex((function(e){return n.dts<e.dts})))>s+1))break;c=e[u].dts-n.dts,s=u-1,this.logger.warn("remux audio found pts overlap at pts:",n.pts,"timestamp:",(n.pts-(this.config.basePTS||0))/t.timescale,"gap duration:",c,"sample duration:",i)}}else{if(!n.isLast||!r.length){this.prevAudioPacket=n;break}c=r[r.length-1].duration}if(c>0){var p=this.createSlientFrames(n.pts+i,t,c-i,i);p.length&&(c=i);var f=$r.concatUint8s(n.data);r.push({flag:Un.DEPENDS_NO,trackType:Pn.AUDIO,size:f.byteLength,dts:n.dts,cts:n.pts-n.dts,duration:c,data:f,isSync:!0}),p.forEach((function(e){r.push(e)}))}}return r.length&&this.recaculateSample(r[0],this.config.baseDTS),r},e.prototype.recaculateVideoSamples=function(e,t){if(this.prevVideoPacket&&(e.unshift(this.prevVideoPacket),this.prevVideoPacket=void 0),!this.videoInited){this.videoInited=!0;var r=Math.min.apply(Math,e.map((function(e){return e.pts}))),n=e.find((function(e){return e.pts===r}));n.pts=this.config.basePTS}for(var o,i,a,s,u=[],c=function(r,n,c,p){if(o=e[r],i=e[r+1]){if((c=i.dts-o.dts)<0){for(i.dts=o.dts,n=r+1;n<p-1;n++)e[n].dts>e[n+1].dts&&(e[n+1].dts=e[n].dts);l.logger.warn("remux video found pts overlap at pts:",o.pts,"timestamp:",(o.pts-l.config.basePTS)/t.timescale,"gap packet number:",n-r,"gap duration:",c),c=0}}else{if(!o.isLast||!u.length)return l.prevVideoPacket=o,a=n,s=c,"break";c=u[u.length-1].duration}if(c>=0){var f=[];o.data.forEach((function(e){f.push(pn.createAVCCStartCode(e.length),e)}));var d=$r.concatUint8s(f);u.push({flag:o.isSync?Un.DEPENDS_NO:Un.IS_NON_SYNC|Un.DEPENDS_YES,trackType:Pn.VIDEO,size:d.byteLength,dts:o.dts,cts:o.pts-o.dts,duration:c,data:d,isSync:o.isSync})}a=n,s=c},l=this,p=0,f=0,d=0,h=e.length;p<h;p++){var v=c(p,f,d,h);if(f=a,d=s,"break"===v)break}return u.length&&this.recaculateSample(u[0],this.config.baseDTS),u},e.prototype.recaculateSample=function(e,t){var r=e.dts-t;return e.dts=r,e},e.prototype.flush=function(){this.prevAudioPacket=void 0,this.prevVideoPacket=void 0},e}(),Za=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),$a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Za(t,e),t.prototype.end=function(){this.emit("end",void 0)},t.prototype.pipe=function(e,t){return t?this.on("data",(function(r){return e.write(t(r))})):this.on("data",(function(t){return e.write(t)})),this.on("end",(function(){return e.end()})),e},t}(Zn),Qa=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ja=function(){return Ja=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ja.apply(this,arguments)},es=function(e){function t(){var t=e.call(this)||this;return t.remuxerMap=new Map,t.pendingPacketsMap=new Map,t.metadata={},t.remuxerMap.set(Pn.VIDEO,new Ka),t.remuxerMap.set(Pn.AUDIO,new Ka),t}return Qa(t,e),t.prototype.remux=function(e,t){var r=this.remuxerMap.get(e);r&&t.length&&this.emit("data",{type:e,buffer:r.createSegment(t).buffer,eos:!!t[t.length-1].isLast})},t.prototype.eos=function(){var e=this;this.pendingPacketsMap.forEach((function(t,r){e.pendingPacketsMap.delete(r),e.remux(r,t)}))},t.prototype.writeMetadata=function(e){var t=this;this.metadata=e,e.tracks.forEach((function(e){return t.writeTrackMetadata(e)}))},t.prototype.writeTrackMetadata=function(e){this.eos();var t=this.remuxerMap.get(e.type);t&&(t.updateConfig(Ja(Ja({},this.metadata),{tracks:[e]})),this.emit("data",{type:e.type,buffer:t.createInitSegment().buffer,eos:!1}))},t.prototype.write=function(e){var t=this,r=e.packets,n=this.pendingPacketsMap;r.forEach((function(e){var r=n.get(e.trackType);r?(r.push(e),r.length>=10&&(n.set(e.trackType,[]),t.remux(e.trackType,r))):n.set(e.trackType,[e])}))},t.prototype.flush=function(){this.remuxerMap.forEach((function(e){return e.flush()})),this.pendingPacketsMap.clear()},t.prototype.end=function(){this.eos(),e.prototype.end.call(this)},t}($a),ts=function(){function e(){var e=this;this._eventMap={},this.listeners=function(t){return e._eventMap[t]||[]},this.emit=function(t,r){var n=e._eventMap[t],o=e._makeCustomEvent(t,r);if(Array.isArray(n)){try{n.forEach((function(e){return e._customEvent?e(o):e(r)}))}catch(e){console.error("Event handler error:",t,e)}return!0}return!1},this.off=function(t,r){var n=e._eventMap[t];return Array.isArray(n)&&(e._eventMap[t]=n.filter((function(e){return e!==r}))),e},this.removeAllListeners=function(t){return void 0===t?e._eventMap={}:e._eventMap[t]&&(e._eventMap[t]=[]),e},this.on=function(t,r){return e._eventMap[t]?e._eventMap[t].push(r):e._eventMap[t]=[r],e},this._on=function(t,r){return r._customEvent=!0,e._eventMap[t]?e._eventMap[t].push(r):e._eventMap[t]=[r],e},this.once=function(t,r){var n=function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];e.off(t,n),r.apply(e,o)};return e.on(t,n),e},this.proxy=function(t,r){r.forEach((function(r){e.on(r,(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.unshift(r),t.emit.apply(t,e)}))}))},this.proxyOnce=function(t,r){r.forEach((function(r){e.once(r,(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.unshift(r),t.emit.apply(t,e)}))}))}}return e.prototype._makeCustomEvent=function(e,t){var r;return"function"==typeof Event?r=new CustomEvent(e,{detail:t}):((r=document.createEvent("Event")).initEvent(e,!1,!1),r.detail=r.detail||{detail:t}),r},e}();const rs=ts;var ns,os,is,as,ss=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),us=function(e){function t(t){var r,n,o,i=e.call(this)||this;return i.skipFrame=bn.NONE,i.autoplay=!1,i.loop=!1,i.metadata={},i.duration=0,i.status=Dt.READY,i.isReady=!1,i._noticeUpdate=function(){i.emit("update",void 0)},i.options=t,r=i,n=["duration","status","isReady"],o=i._noticeUpdate,n.forEach((function(e){var t=r[e];Object.defineProperty(r,e,{set:function(r){t!==r&&o(e,t=r,r)},get:function(){return t}})})),i}return ss(t,e),t.prototype.setDuration=function(e){this.duration=e},t.prototype.setAutoplay=function(e){this.autoplay=e},t.prototype.setLoop=function(e){this.loop=e},t.prototype.reset=function(){this.metadata={},this.duration=0,this.status=Dt.READY,this.isReady=!1,this.flush()},t}(rs),cs=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ls=function(e){function t(t){var r=e.call(this,t)||this;r.type=kt.Native,r.handleLoadStart=function(){r.emit("loadstart",void 0)},r.handleSeeking=function(){r.emit("seeking",void 0)},r.handleSeeked=function(){r.emit("seeked",void 0)},r.handleCanPlay=function(){r.emit("canplay",void 0)},r.handleError=function(){var e=r.el.error;e&&r.emit("error",{code:e.code,message:e.message,origin:e})},r.handleProgress=function(){r.emit("progress",void 0)},r.handlePlaying=function(){r.status!==Dt.PLAYING&&(r.status=Dt.PLAYING,r.emit("playing",void 0))},r.handleEnded=function(){r.status=Dt.ENDED,r.emit("ended",void 0)},r.handlePlay=function(){r.emit("play",void 0)},r.handlePause=function(){r.status=Dt.PAUSED,r.emit("pause",void 0)},r.handleWaiting=function(){r.status=Dt.WAITING,r.emit("waiting",void 0)},r.handleTimeUpdate=function(){mr.isMobile&&mr.isSafari&&r.status===Dt.WAITING&&r.handlePlaying(),r.emit("timeupdate",void 0)},r.handleRateChange=function(){r.emit("ratechange",void 0)},r.handleVolumeChange=function(){r.emit("volumechange",void 0),r._noticeUpdate()},r.handleLoadedMetadata=function(){r.isReady=!0,r.duration=r.el.duration,r.emit("loadedmetadata",void 0),r._noticeUpdate()},r.handleLoadedData=function(){r.el.playbackRate=r.options.playbackRate||1,r.emit("loadeddata",void 0)},r.options=t,r.el=document.createElement("video"),r.el.addEventListener("loadstart",r.handleLoadStart),r.el.addEventListener("seeking",r.handleSeeking),r.el.addEventListener("seeked",r.handleSeeked),r.el.addEventListener("canplay",r.handleCanPlay),r.el.addEventListener("loadeddata",r.handleLoadedData),r.el.addEventListener("progress",r.handleProgress),r.el.addEventListener("loadedmetadata",r.handleLoadedMetadata),r.el.addEventListener("playing",r.handlePlaying),r.el.addEventListener("play",r.handlePlay),r.el.addEventListener("ended",r.handleEnded),r.el.addEventListener("pause",r.handlePause),r.el.addEventListener("waiting",r.handleWaiting),r.el.addEventListener("timeupdate",r.handleTimeUpdate),r.el.addEventListener("volumechange",r.handleVolumeChange),r.el.addEventListener("ratechange",r.handleRateChange),r.el.addEventListener("error",r.handleError),r.el.style.width="100%",r.el.style.height="100%",r.options.objectFit&&(r.el.style.objectFit=r.options.objectFit),Object.assign(r.el,{playsInline:!0,controls:!1,crossOrigin:"anonymous"});var n={renderer:"standard","webkit-playsinline":"webkit-playsinline","x5-video-player-type":"h5-page"};return Object.keys(n).forEach((function(e){r.el.setAttribute(e,n[e])})),r}return cs(t,e),Object.defineProperty(t.prototype,"buffered",{get:function(){return this.el.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"paused",{get:function(){return this.el.paused},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"muted",{get:function(){return this.el.muted},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"volume",{get:function(){return this.el.volume},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentTime",{get:function(){return this.el.currentTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playbackRate",{get:function(){return this.el.playbackRate},enumerable:!1,configurable:!0}),t.prototype.setPlaybackRate=function(e){e!==this.el.playbackRate&&(this.options.playbackRate=e,this.el.playbackRate=e)},t.prototype.load=function(e){this.metadata=e,this.el.src=e.url,this.el.load(),this.options.demuxer.suspend()},t.prototype.attach=function(e){e.appendChild(this.el)},t.prototype.toggle=function(){return this.status===Dt.ENDED?(this.seek(0),this.play()):this.el.paused?this.play():this.pause()},t.prototype.play=function(){return this.el.play()},t.prototype.pause=function(){return Promise.resolve(this.el.pause())},t.prototype.seek=function(e){this.el.currentTime=e,this.status===Dt.ENDED&&(this.status=Dt.PAUSED)},t.prototype.flush=function(){this.el.removeAttribute("src")},t.prototype.setPoster=function(e){this.el.poster=e},t.prototype.setAutoplay=function(t){this.el.autoplay=t,e.prototype.setAutoplay.call(this,t)},t.prototype.setLoop=function(t){this.el.loop=t,e.prototype.setLoop.call(this,t)},t.prototype.setMuted=function(e){this.el.muted=e},t.prototype.setVolume=function(e){this.el.volume=e},t.prototype.destroy=function(){var e;this.reset(),this.removeAllListeners(),this.el.poster="",this.el.removeEventListener("loadstart",this.handleLoadStart),this.el.removeEventListener("seeking",this.handleSeeking),this.el.removeEventListener("seeked",this.handleSeeked),this.el.removeEventListener("canplay",this.handleCanPlay),this.el.removeEventListener("progress",this.handleProgress),this.el.removeEventListener("loadeddata",this.handleLoadedData),this.el.removeEventListener("loadedmetadata",this.handleLoadedMetadata),this.el.removeEventListener("playing",this.handlePlaying),this.el.removeEventListener("play",this.handlePlay),this.el.removeEventListener("ended",this.handleEnded),this.el.removeEventListener("pause",this.handlePause),this.el.removeEventListener("waiting",this.handleWaiting),this.el.removeEventListener("timeupdate",this.handleTimeUpdate),this.el.removeEventListener("volumechange",this.handleVolumeChange),this.el.removeEventListener("ratechange",this.handleRateChange),this.el.removeEventListener("error",this.handleError),null===(e=this.el.parentNode)||void 0===e||e.removeChild(this.el)},Object.defineProperty(t.prototype,"textureElement",{get:function(){return{type:"video",el:this.el}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"audioElement",{get:function(){return{type:"media",el:this.el}},enumerable:!1,configurable:!0}),t.type=kt.Native,t}(us),ps=r(729),fs=r.n(ps),ds=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),hs=function(e){function t(t,r){var n=e.call(this)||this;return n.pendingBufferSegments=[],n.pendingRemoveRanges=[],n.handleSourceBufferUpdateEnd=function(){n.pendingRemoveRanges.length?n.doRemoveRange():(n.checkBufferNeedRemove(),n.doAppendBuffer()),n.emit("updateend")},n.checkBufferNeedRemove=function(){for(var e=n.node,t=e.currentTime,r=e.ariaLive,o=n.pendingRemoveRanges,i=r===String(!0),a=i?10:1800,s=i?5:1200,u=0,c=0,l=n.sb.buffered.length;u<l;u++)t-(c=n.sb.buffered.start(u))>a&&o.push({start:c,end:t-s})},n.node=r,n.sb=t,t.addEventListener("updateend",n.handleSourceBufferUpdateEnd),n}return ds(t,e),t.prototype.doRemoveRange=function(){if(!this.sb.updating){var e=this.pendingRemoveRanges.shift();e&&this.sb.remove(e.start,e.end)}},t.prototype.doAppendBuffer=function(){if(!this.sb.updating){var e=this.pendingBufferSegments.shift();e&&this.sb.appendBuffer(e.buffer)}},Object.defineProperty(t.prototype,"size",{get:function(){return this.pendingBufferSegments.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updating",{get:function(){return this.sb.updating},enumerable:!1,configurable:!0}),t.prototype.seek=function(e){for(var t=this.sb.buffered,r=this.pendingRemoveRanges,n=0,o=0,i=0,a=t.length;i<a;i++)n=t.start(i),o=t.end(i),e<n&&r.push({start:n,end:o})},t.prototype.appendSegment=function(e){this.pendingBufferSegments.push(e),this.doAppendBuffer()},t.prototype.destroy=function(){this.pendingBufferSegments=[],this.pendingRemoveRanges=[],this.removeAllListeners(),this.sb.removeEventListener("updateend",this.handleSourceBufferUpdateEnd);try{this.sb.abort()}catch(e){}},t}(fs()),vs=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ys=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},_s=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},ms=function(e){function t(t){var r=e.call(this,t)||this;return r.type=kt.MSE,r.logger=new Hr("mse-renderer"),r.pendingTrackConfigs=[],r.cacheSegments=[],r.remuxerStream=new es,r.pendingEOS=!1,r.sbpMap=new Map,r.findNearestBufferedTimestamp=function(){for(var e=r.el,t=e.buffered,n=e.currentTime,o=0,i=void 0;o<t.length;o++)if(n<(i=t.start(o)))return i;return-1},r.handleLoadedPackets=function(e){r.remuxerStream.write(e)},r.handleRemuxEnd=function(){return ys(r,void 0,void 0,(function(){return _s(this,(function(e){return this.pendingEOS=!0,[2]}))}))},r.handleEnd=function(){r.remuxerStream.end()},r.handleUpdatedTrackMetadata=function(e){r.remuxerStream.writeTrackMetadata(e)},r.handleRemuxData=function(e){if(r.cacheSegments.length){var t=[];r.cacheSegments.forEach((function(e){var n=r.sbpMap.get(e.type);n?n.appendSegment(e):t.push(e)})),r.cacheSegments=t}var n=r.sbpMap.get(e.type);n?n.appendSegment(e):r.cacheSegments.push(e)},r.handleMSETimeUpdate=function(){r.checkSuspendOrResume()},r.handleBuffering=function(){if(r.status===Dt.WAITING||r.status===Dt.READY){var e=r.findNearestBufferedTimestamp();e>0&&(r.el.currentTime=e)}},r.closeMediaSource=function(){"open"===r.ms.readyState&&(r.ms.endOfStream(),r.logger.info("endOfStream"))},r.handleMSEWaiting=function(){r.checkSuspendOrResume(),r.logger.info("waiting")},r.handleSourceOpen=function(){r.logger.info("mse sourceopen"),r.pendingTrackConfigs.forEach((function(e){return r.createTrack(e.type,e.mimeType)})),r.pendingTrackConfigs=[]},r.handleSourceClose=function(){r.logger.info("mse sourceclose"),r.destroy()},r.handleProcessUpdateEnd=function(){r.logger.debug("source buffer updateend"),r.checkSuspendOrResume(),r.checkEOS()},r.checkEOS=function(){r.pendingEOS&&Array.from(r.sbpMap.values()).every((function(e){return!e.updating&&0===e.size}))&&(r.logger.info("close mse"),r.closeMediaSource())},r.checkSuspendOrResume=function(){var e=r.metadata,t=e.live,n=e.progressive;if(t||n){for(var o=t?10:60,i=r.el,a=i.currentTime,s=i.buffered,u=0,c=s.length;u<c;u++)if(a>=s.start(u)&&a+o<=s.end(u))return void((t&&r.paused||n)&&r.options.demuxer.suspend());r.options.demuxer.resume()}},r.handleMSESeeking=function(){r.cacheSegments=[],r.pendingEOS=!1;var e=r.el.currentTime;r.sbpMap.forEach((function(t){return t.seek(e)})),r.metadata.live||!r.metadata.progressive||r.isTimestampBuffered(e)||(r.logger.info("seek清除脏数据"),r.remuxerStream.flush(),r.options.demuxer.seek(e))},r.createTrack=function(e,t){if("open"===r.ms.readyState)try{var n=new hs(r.ms.addSourceBuffer(t),r.el);n.on("updateend",r.handleProcessUpdateEnd),r.sbpMap.set(e,n)}catch(e){r.logger.error("create source buffer fail",e)}else r.pendingTrackConfigs.push({type:e,mimeType:t})},r.options=t,r.ms=r.createMediaSource(),r.el.src=URL.createObjectURL(r.ms),r.el.addEventListener("seeking",r.handleMSESeeking),r.el.addEventListener("timeupdate",r.handleMSETimeUpdate),r.el.addEventListener("waiting",r.handleMSEWaiting),r.el.addEventListener("progress",r.handleBuffering),t.demuxer.on("loadeddata",r.handleLoadedPackets),t.demuxer.on("updatedtrackmetadata",r.handleUpdatedTrackMetadata),t.demuxer.on("end",r.handleEnd),r.remuxerStream.on("data",r.handleRemuxData),r.remuxerStream.on("end",r.handleRemuxEnd),r}return vs(t,e),t.prototype.createMediaSource=function(){var e=new MediaSource;return e.addEventListener("sourceopen",this.handleSourceOpen),e.addEventListener("sourceclose",this.handleSourceClose),e},t.prototype.isTimestampBuffered=function(e){for(var t=this.el.buffered,r=0,n=void 0,o=void 0;r<t.length;r++)if(n=t.start(r),o=t.end(r),e>=n&&e<o)return!0;return!1},t.prototype.load=function(e){var t=this;this.reset(),this.metadata=e,e.tracks.forEach((function(e){e.type===Pn.VIDEO?t.createTrack(e.type,"video/mp4;codecs="+e.codec):e.type===Pn.AUDIO&&t.createTrack(e.type,"audio/mp4;codecs="+e.codec)})),this.el.ariaLive=String(this.metadata.live),this.remuxerStream.writeMetadata(e),this.logger.info("load metadata",e)},t.prototype.reset=function(){var t=this;this.logger.info("reset"),this.cacheSegments=[],e.prototype.reset.call(this),this.remuxerStream.flush(),Array.from(this.sbpMap.values()).forEach((function(e){e.destroy();try{t.ms.removeSourceBuffer(e.sb)}catch(e){}})),this.sbpMap.clear(),this.pendingTrackConfigs=[],this.ms.removeEventListener("sourceopen",this.handleSourceOpen),this.ms.removeEventListener("sourceclose",this.handleSourceClose);try{this.closeMediaSource()}catch(e){this.logger.warn("endOfStream 异常",e.message)}this.ms=this.createMediaSource(),this.el.src=URL.createObjectURL(this.ms),this.pendingEOS=!1},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.el.removeEventListener("seeking",this.handleMSESeeking),this.el.removeEventListener("waiting",this.handleMSEWaiting),this.el.removeEventListener("timeupdate",this.handleMSETimeUpdate),this.el.removeEventListener("progress",this.handleBuffering),this.options.demuxer.off("loadeddata",this.handleLoadedPackets),this.options.demuxer.off("end",this.handleEnd),this.options.demuxer.off("updatedtrackmetadata",this.handleUpdatedTrackMetadata),this.remuxerStream.removeAllListeners()},t.type=kt.MSE,t}(ls),gs=r(477),bs=r.n(gs);function Es(){return bs()('/*! splayer - ver0.7.4 created:2024/2/6 15:52:55 */(()=>{"use strict";var t,e,n,r;!function(t){t[t.LOADED=0]="LOADED",t[t.OUTPUT=1]="OUTPUT",t[t.WAITING=2]="WAITING",t[t.FLUSHED=3]="FLUSHED",t[t.AFTER_EOS=4]="AFTER_EOS",t[t.AFTER_DECODE=5]="AFTER_DECODE",t[t.ERROR=6]="ERROR"}(t||(t={})),function(t){t[t.SETUP=0]="SETUP",t[t.DECODE=1]="DECODE",t[t.FLUSH=2]="FLUSH",t[t.EOS=3]="EOS"}(e||(e={})),function(t){t[t.H264=27]="H264",t[t.H265=173]="H265",t[t.H266=196]="H266",t[t.AAC=86018]="AAC"}(n||(n={})),function(t){t[t.FATAL=8]="FATAL",t[t.ERROR=16]="ERROR",t[t.WARNING=24]="WARNING",t[t.INFO=32]="INFO",t[t.VERBOSE=40]="VERBOSE",t[t.DEBUG=48]="DEBUG",t[t.TRACE=56]="TRACE"}(r||(r={}));var a=function(){return a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},a.apply(this,arguments)},o=function(t,e,n,r){return new(n||(n=Promise))((function(a,o){function c(t){try{s(r.next(t))}catch(t){o(t)}}function i(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,i)}s((r=r.apply(t,e||[])).next())}))},c=function(t,e){var n,r,a,o,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,i[0]&&(c=0)),c;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(a=c.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){c.label=i[1];break}if(6===i[0]&&c.label<a[1]){c.label=a[1],a=i;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(i);break}a[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},i=function(t){return URL.createObjectURL(new Blob([t],{type:"application/javascript"}))},s=function(t){return fetch(t).then((function(t){return t.text()}))},u=self,l=u,p=new(function(){function e(){var e=this;this.instance=null,this.DEFAULT_THREAD_NUM=6,this._handleVideoData=function(n,r,a,o,c,i,s,u,p,f,d){var h=e.instance.HEAPU8.subarray(n,n+r),E=new Uint8Array(h);l.postMessage({type:t.OUTPUT,value:{type:"video",data:E,strideY:a,strideCb:o,strideCr:c,width:i,height:s,chromaWidth:u,chromaHeight:p,pts:f,decode_time:d}},[E.buffer])},this._handleAudioData=function(n,r,a,o,c){var i=e.instance.HEAPU8.subarray(n,n+r),s=new Uint8Array(i);l.postMessage({type:t.OUTPUT,value:{type:"audio",data:s,pts:a,sampleRate:o,channels:c}},[s.buffer])}}return e.prototype._init=function(e){var n=this;u.importScripts(e.mainScriptUrl),fetch(e.wasmScriptUrl).then((function(t){return t.arrayBuffer()})).then((function(n){return u.WASMDecoder({print:function(t){console.info(t)},printErr:function(e){console.error(e),l.postMessage({type:t.ERROR,value:e})},wasmBinary:n,mainScriptUrlOrBlob:e.mainScriptUrl,locateFile:function(t){return t.indexOf("worker.js")>-1?e.workerScriptUrl:t.indexOf("wasm")>-1?e.wasmScriptUrl:void 0}})})).then((function(a){n.instance=a,a.init(e.logLevel||r.ERROR,e.codecId,n.DEFAULT_THREAD_NUM,n._handleVideoData,n._handleAudioData),l.postMessage({type:t.LOADED})})).catch((function(e){l.postMessage({type:t.ERROR,value:e.message})}))},e.prototype.setup=function(t){return o(this,void 0,void 0,(function(){var e,r,o,u,l;return c(this,(function(c){switch(c.label){case 0:return e=t.wasmDomain||"https://g.alicdn.com/apsara-media-components/amcom-splayer/0.7.4",r="",r=t.codecId===n.H266?"libali266d".concat(t.simd?"_simd":"").concat(t.threads?"_thread":""):t.codecId===n.AAC?"libspdecoder_aac":"libspdecoder".concat(t.simd?"_simd":"").concat(t.threads?"_thread":""),console.log("setup options fileName:",r),[4,s("".concat(e,"/").concat(r,".js"))];case 1:return o=c.sent(),u="",t.codecId!==n.H265&&t.codecId!==n.H266?[3,5]:t.threads?[4,s("".concat(e,"/").concat(r,".worker.js"))]:[3,3];case 2:return l=c.sent(),[3,4];case 3:l="",c.label=4;case 4:u=l,c.label=5;case 5:return this._init(a(a({},t),{mainScriptUrl:i(o),workerScriptUrl:i(u),wasmScriptUrl:"".concat(e,"/").concat(r,".wasm")})),[2]}}))}))},e.prototype.push=function(t){var e=this;t.forEach((function(t){return e.decode(t)}))},e.prototype.decode=function(e){var n,r=performance.now();null===(n=this.instance)||void 0===n||n.decode(e.data,e.pts,(function(){l.postMessage({type:t.AFTER_DECODE,value:{decodeTime:performance.now()-r,pts:e.pts}})}),e.codecId)},e.prototype.eos=function(){var e;null===(e=this.instance)||void 0===e||e.eos((function(){l.postMessage({type:t.AFTER_EOS})}))},e.prototype.flush=function(){var e;null===(e=this.instance)||void 0===e||e.flush((function(){l.postMessage({type:t.FLUSHED})}))},e}());self.onmessage=function(t){var n=t.data;switch(n.type){case e.SETUP:p.setup(n.options);break;case e.DECODE:p.push(n.data);break;case e.FLUSH:p.flush();break;case e.EOS:p.eos()}}})();',"Worker",void 0,void 0)}!function(e){e[e.LOADED=0]="LOADED",e[e.OUTPUT=1]="OUTPUT",e[e.WAITING=2]="WAITING",e[e.FLUSHED=3]="FLUSHED",e[e.AFTER_EOS=4]="AFTER_EOS",e[e.AFTER_DECODE=5]="AFTER_DECODE",e[e.ERROR=6]="ERROR"}(ns||(ns={})),function(e){e[e.SETUP=0]="SETUP",e[e.DECODE=1]="DECODE",e[e.FLUSH=2]="FLUSH",e[e.EOS=3]="EOS"}(os||(os={})),function(e){e[e.H264=27]="H264",e[e.H265=173]="H265",e[e.H266=196]="H266",e[e.AAC=86018]="AAC"}(is||(is={})),function(e){e[e.FATAL=8]="FATAL",e[e.ERROR=16]="ERROR",e[e.WARNING=24]="WARNING",e[e.INFO=32]="INFO",e[e.VERBOSE=40]="VERBOSE",e[e.DEBUG=48]="DEBUG",e[e.TRACE=56]="TRACE"}(as||(as={}));var Ts,ws=function(){},Ss=1,Os=function(){function e(){var e=this;this._resolve=ws,this.id=Ss++,this.locked=!1,this.lock=function(){return e.locked=!0,new Promise((function(t){e._resolve=t}))}}return e.prototype.unlock=function(e){this.locked=!1,this._resolve(e),this._resolve=ws},e.prototype.reset=function(){this._resolve=ws,this.locked=!1},e}(),As=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ps=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},Rs=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},xs=function(e){function t(){var t=e.call(this)||this;return t.options={},t.flushing=!1,t.setupMutex=new Os,t.eofMutex=new Os,t.flushMutex=new Os,t.decodeMutex=new Os,t.hasSetup=!1,t._handleWorkerError=function(e){t.emit("error",new Error(e.message))},t._handleWorkerMessage=function(e){var r=e.data,n=r.type,o=r.value;if(n===ns.OUTPUT){if(t.flushing)return;t.emit("data",o)}else n===ns.FLUSHED?(t.flushing=!1,t.flushMutex.unlock()):n===ns.LOADED?(t.hasSetup=!0,t.setupMutex.unlock(),t.emit("ready",void 0)):n===ns.AFTER_EOS?t.eofMutex.unlock():n===ns.AFTER_DECODE?(t.decodeMutex.unlock(),t.emit("decoded",void 0)):n===ns.ERROR&&t._handleWorkerError({message:o})},t.worker=t._createWorker(),t}return As(t,e),t.prototype._createWorker=function(){var e=new Es;return e.addEventListener("message",this._handleWorkerMessage),e.addEventListener("messageerror",this._handleWorkerError),e.addEventListener("error",this._handleWorkerError),e},t.prototype._destroyWorker=function(){this.worker.removeEventListener("message",this._handleWorkerMessage),this.worker.removeEventListener("messageerror",this._handleWorkerError),this.worker.removeEventListener("error",this._handleWorkerError),this.worker.terminate()},t.prototype.setup=function(e){return void 0===e&&(e={}),Ps(this,void 0,void 0,(function(){return Rs(this,(function(t){switch(t.label){case 0:return this.hasSetup?[4,this.eos()]:[3,2];case 1:t.sent(),this._destroyWorker(),this.worker=this._createWorker(),t.label=2;case 2:return this.options=Object.assign({threads:!1,simd:!1,codecId:is.H265},e),this.worker.postMessage({type:os.SETUP,options:this.options}),[2,this.setupMutex.lock()]}}))}))},t.prototype.decode=function(e){return this.worker.postMessage({type:os.DECODE,data:[e]},[e.data.buffer]),this.decodeMutex.lock()},t.prototype.eos=function(){return this.worker.postMessage({type:os.EOS}),this.eofMutex.lock()},t.prototype.flush=function(){return this.flushing=!0,this.worker.postMessage({type:os.FLUSH}),this.flushMutex.lock()},t.prototype.destroy=function(){this._destroyWorker(),this.removeAllListeners()},t}(rs),Cs=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(e){e[e.EMPTY=0]="EMPTY",e[e.LOW=1]="LOW",e[e.NORMAL=2]="NORMAL",e[e.HIGH=3]="HIGH",e[e.FULL=4]="FULL"}(Ts||(Ts={}));var Ns,Ls=function(e){function t(t){var r=e.call(this)||this;return r.queue=[],r.status=Ts.EMPTY,r.maxSize=t,r}return Cs(t,e),t.prototype._changeStatus=function(e){if(this.status!==e){var t=this.status;this.status=e,this.emit("statuschange",{currentStatus:e,previousStatus:t})}},t.prototype._cacaluteStatus=function(){var e=this.queue.length;e>=this.maxSize?this._changeStatus(Ts.FULL):e>=.7*this.maxSize?this._changeStatus(Ts.HIGH):e>=.3*this.maxSize?this._changeStatus(Ts.NORMAL):e>0?this._changeStatus(Ts.LOW):this._changeStatus(Ts.EMPTY)},Object.defineProperty(t.prototype,"size",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),t.prototype.clear=function(){this.queue=[],this._changeStatus(Ts.EMPTY)},t.prototype.writeList=function(e){var t=this;e.forEach((function(e){return t.queue.push(e)})),this.queue.length&&this._cacaluteStatus()},t.prototype.write=function(e){this.queue.push(e),this._cacaluteStatus()},t.prototype.readAll=function(){var e=this.queue;return this.clear(),e},t.prototype.first=function(){return this.queue[0]},t.prototype.last=function(){return this.queue[this.queue.length-1]},t.prototype.read=function(){var e=this.queue.shift();return this._cacaluteStatus(),e},t}(rs),Ds=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(e){e[e.EMPTY=0]="EMPTY",e[e.LOW=1]="LOW",e[e.NORMAL=2]="NORMAL",e[e.HIGH=3]="HIGH",e[e.FULL=4]="FULL"}(Ns||(Ns={}));var ks=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ds(t,e),t.prototype.end=function(){this.emit("end",void 0)},t.prototype.pipe=function(e,t){var r=this;return this.on("data",(function(n){e.write(t?t(n):n),!e.writable&&r.running&&r.suspend()})),e.on("writable",(function(){e.queue.status<Ts.NORMAL&&!r.running&&r.resume()})),this.on("end",(function(){return e.end()})),e},t}(rs),Is=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Us=function(e){function t(r){var n=e.call(this)||this;return n._frameCount=0,n._lastSampleTs=0,n._isLastRunning=!1,n._warningCount=0,n._timer=null,n.logger=new Hr("decode-monitor"),n._fps=r.fps,n._playbackRate=r.playbackRate,n._isRunning=r.isRunning,n._isEnded=r.isEnded,n._fps||(n._fps=t.DEFAULT_FPS),n.start(),n}return Is(t,e),Object.defineProperty(t.prototype,"fps",{get:function(){return this._fps||t.DEFAULT_FPS},set:function(e){this._fps=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playbackRate",{get:function(){return this._playbackRate||1},set:function(e){this._playbackRate=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRunning",{get:function(){return this._isRunning()},set:function(e){this._isRunning=function(){return e}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEnded",{get:function(){return this._isEnded()},enumerable:!1,configurable:!0}),t.prototype.updateFrameCount=function(){return this._frameCount++},t.prototype.start=function(){var e=this;this._reset(),this._timer=setInterval((function(){if(!e.isEnded){var r=e._shouldWarn();r.shouldWarn?e._warningCount++:e._warningCount=0,e._warningCount>=t.MAX_TOLERANCE_COUNT&&(console.warn("decoderoverload shouldWarn warningCount:",e._warningCount),e._warningCount=0,e.emit("decoderoverload",r))}}),t.TIMEOUT)},t.prototype.destroy=function(){this._reset(),this._fps=void 0,this._playbackRate=void 0,this._isLastRunning=!1,this._warningCount=0,this._isRunning=function(){return!1},this._isEnded=function(){return!1}},t.prototype._reset=function(){this._clearTimer(),this._frameCount=0,this._lastSampleTs=0},t.prototype._shouldWarn=function(){var e=this._sample(),r=e.decodedFrames,n=e.duration,o={shouldWarn:!1,decodedFps:-1,fps:this.fps,playbackrate:this.playbackRate},i=this._isLastRunning;if(this._isLastRunning=this.isRunning,!i)return this.logger.log("Last sample is incomplete, skip."),this._warningCount,o;if(!this.isRunning)return this.logger.log("Decoder is not running, skip."),o;var a=r/(n/t.SECOND_MS);if(0===a)return o;if(a+t.MAX_TOLERANCE_FRAME<this.fps*this.playbackRate){var s="decoded ".concat(a," frames/s，video fps：").concat(this.fps,", playbackRete: ").concat(this.playbackRate,", this may cause stall");return this.logger.warn(s),o.shouldWarn=!0,o.decodedFps=a,o}return o.decodedFps=a,o},t.prototype._sample=function(){var e=this._frameCount;this._frameCount=0;var t=performance.now(),r=t-this._lastSampleTs;return this._lastSampleTs=t,{decodedFrames:e,duration:r}},t.prototype._clearTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null)},t.TIMEOUT=1e3,t.SECOND_MS=1e3,t.MAX_TOLERANCE_COUNT=5,t.MAX_TOLERANCE_FRAME=3,t.DEFAULT_FPS=25,t}(rs);const Ms=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]));var js,Fs=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},Vs=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Promise.allSettled=Promise.allSettled||function(e){return Promise.all(e.map((function(e){return e.then((function(e){return{status:"fulfilled",value:e}})).catch((function(e){return{status:"rejected",reason:e}}))})))},function(e){e.Wasm="wasm",e.Canvas="canvas",e.AudioContext="audioContext",e.Worker="worker",e.WebGL="webgl",e.WasmThreads="wasmThreads",e.WasmThreadsNeed="wasmThreadsNeed",e.Simd="simd"}(js||(js={}));var Bs=function(){function e(){this.requireCapabilities=[js.Wasm,js.Canvas,js.AudioContext,js.Worker]}return e.prototype.checkSupport=function(){var t={};return t[js.Wasm]=e.supportWebAssembly(),t[js.Canvas]=e.supportCanvas(),t[js.AudioContext]=e.supportAudioContext(),t[js.Worker]=e.supportWorker(),{supported:this.requireCapabilities.every((function(e){return t[e]})),detail:t}},e.supportWebAssembly=function(){var e;return"WebAssembly"in window&&!!window.Blob&&!!(null===(e=window.URL)||void 0===e?void 0:e.createObjectURL)},e.supportCanvas=function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},e.supportAudioContext=function(){return!!(window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.msAudioContext)},e.supportWorker=function(){return"Worker"in window},e.supportWebGL=function(){return"WebGLRenderingContext"in window},e.supportWasmThreads=function(){return"SharedArrayBuffer"in window&&"Atomics"in window},e.supportSIMD=function(){return Fs(this,void 0,void 0,(function(){var e;return Vs(this,(function(t){switch(t.label){case 0:e=!1,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Ms()];case 2:return e=t.sent(),[3,4];case 3:return t.sent(),e=!1,[3,4];case 4:return[2,e]}}))}))},e.supportTypedArrays=function(){return"Uint32Array"in window},e.makeErrorMessage=function(e){var t;switch(e){case It.WASM_NOT_SUPPORTED:t=js.Wasm;break;case It.CANVAS_NOT_SUPPORTED:t=js.Canvas;break;case It.AUDIOCONTEXT_NOT_SUPPORTED:t=js.AudioContext;break;case It.WORKER_NOT_SUPPORTED:t=js.Worker;break;case It.WASM_THREADS_NOT_SUPPORTED:t=js.WasmThreads;break;case It.WASM_THREADS_NEED:t=js.WasmThreadsNeed;break;default:t=null}return"浏览器不支持 ".concat(t)},e.prototype.makeErrorCode=function(e){for(var t=null,r=Object.keys(e),n=0;n<r.length;n++){var o=r[n];if(!1===e[o]&&this.requireCapabilities.includes(o)){t=o;break}}switch(t){case js.Wasm:return It.WASM_NOT_SUPPORTED;case js.Canvas:return It.CANVAS_NOT_SUPPORTED;case js.AudioContext:return It.AUDIOCONTEXT_NOT_SUPPORTED;case js.Worker:return It.WORKER_NOT_SUPPORTED;default:return-1}},e}();const Ws=Bs;var Gs=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Hs=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},zs=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},Xs=function(e){function t(t){var r=e.call(this)||this;return r.logger=new Hr("decoder"),r.decoderIsReady=!1,r.isLive=!1,r.timer=-1,r.pendingEOS=!1,r.decoding=!1,r.ended=!1,r.running=!1,r.queue=new Ls(100),r.readable=!1,r._handleLoadTimeout=function(){r.activeCodecId!==is.AAC&&r._handleError(new Error("解码器 [".concat(is[r.activeCodecId],"] 加载超时")))},r._handleError=function(e){r.emit("error",{code:En.DECODE,message:e.message,origin:e})},r._handleReady=function(){r.logger.info("解码器 ".concat(is[r.activeCodecId]," 已加载")),clearTimeout(r.timer),r.decoderIsReady=!0,r.startDecode()},r._handleDecoded=function(){r.decoding=!1,r.startDecode()},r._handleData=function(e){r.emit("data",e),"video"===e.type&&r.decodeMonitor&&r.decodeMonitor.updateFrameCount()},r.timeline=t.timeline,r.activeCodecId=t.codecId,r.wasmDomain=t.wasmDomain,r.skipFrame=t.skipFrame,r.decoder=new xs,r.decoder.on("error",r._handleError),r.decoder.on("decoded",r._handleDecoded),r.decoder.on("data",r._handleData),r.decoder.on("ready",r._handleReady),r.timer=setTimeout(r._handleLoadTimeout,2e4),r.activeCodecId!==is.H265||r.skipFrame!==bn.DEFAULT&&r.skipFrame!==bn.NONE||(r.decodeMonitor=new Us({fps:t.fps,playbackRate:t.playbackRate,isRunning:function(){return r.running},isEnded:function(){return r.ended}}),r.decodeMonitor.proxy(r,["decoderoverload"])),r.activeCodecId!==is.H265&&r.activeCodecId!==is.H266||!t.simd?r.decoder.setup({threads:t.threads,codecId:r.activeCodecId,wasmDomain:t.wasmDomain,logLevel:r.decodeLogLevel}):Ws.supportSIMD().then((function(e){r.logger.info("Checking support SIMD Done. supported:",e),r.decoder.setup({threads:t.threads,simd:e,codecId:r.activeCodecId,wasmDomain:t.wasmDomain,logLevel:r.decodeLogLevel})})),r}return Gs(t,e),Object.defineProperty(t.prototype,"codecName",{get:function(){return is[this.activeCodecId]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"writable",{get:function(){return this.queue.status<Ts.FULL},enumerable:!1,configurable:!0}),t.prototype.isOutdatedPacket=function(e){return this.isLive&&e.codecId===is.H265&&e.isNonRef&&this.queue.size>100?(console.warn("isOutdatedPacket pkt.pts:%d, pktTime:%f, currentTime:%f audioCurrentTime:%f, queueSize:%d",e.pts,(e.pts-e.basePTS)/e.timescale,this.timeline.currentTime,this.timeline.audioCurrentTime,this.queue.size),!0):this.timeline.audioCurrentTime>0?e.isNonRef&&(e.pts-e.basePTS)/e.timescale<this.timeline.audioCurrentTime:e.isNonRef&&(e.pts-e.basePTS)/e.timescale<this.timeline.currentTime},t.prototype.startDecode=function(){var e=this;if(this.decoderIsReady&&this.running&&!this.decoding&&!this.ended){var t=this.queue.first();if(t){var r=t.codecId;if(r&&r!==this.activeCodecId)return this.decoderIsReady=!1,this.logger.info("检测到编码变更，切换解码器 ".concat(is[this.activeCodecId]," -> ").concat(is[r])),this.activeCodecId=r,this.decoder.setup({codecId:this.activeCodecId,wasmDomain:this.wasmDomain,logLevel:this.decodeLogLevel})}this.decoding=!0;var n=this.queue.read();n?this.isOutdatedPacket(n)?(console.warn("outdated packet",is[n.codecId],n.pts),this.decoding=!1,this.startDecode()):this.decoder.decode(n):(this.decoding=!1,this.running=!1,this.pendingEOS?(this.ended=!0,this.logger.log("eos",this.codecName),this.decoder.eos().then((function(){e.emit("end",void 0)}))):this.emit("drain",void 0))}this.writable&&this.emit("writable",void 0)},t.prototype.write=function(e){Array.isArray(e)?this.queue.writeList(e):this.queue.write(e),this.resume()},t.prototype.suspend=function(){this.running=!1},t.prototype.resume=function(){this.running=!0,this.decodeMonitor&&this.activeCodecId===is.H265&&(this.decodeMonitor.isRunning=!0),this.startDecode()},t.prototype.end=function(){this.logger.log("pending eos",this.codecName),this.pendingEOS=!0},t.prototype.flush=function(){return Hs(this,void 0,void 0,(function(){return zs(this,(function(e){return this.ended=!1,this.pendingEOS=!1,this.queue.clear(),this.decoderIsReady?(this.logger.log("flush",this.codecName),[2,this.decoder.flush()]):[2]}))}))},t.prototype.setPlaybackRate=function(e){this.decodeMonitor&&(this.decodeMonitor.playbackRate=e)},t.prototype.setFps=function(e){this.decodeMonitor&&(this.decodeMonitor.fps=e)},t.prototype.setIsLive=function(e){this.isLive=e},t.prototype.destroy=function(){var e;this.decoderIsReady=!1,this.running=!1,this.ended=!1,this.pendingEOS=!1,this.queue.clear(),this.queue.removeAllListeners(),clearTimeout(this.timer),this.decoder.destroy(),null===(e=this.decodeMonitor)||void 0===e||e.destroy(),this.removeAllListeners()},t}(ks),Ys=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},qs=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};if(mr.isMobile&&St){var Ks=function(){var e=document.createElement("audio");e.controls=!1,e.preload="auto",e.loop=!1,e.src="data:audio/mp3;base64,//MkxAAHiAICWABElBeKPL/RANb2w+yiT1g/gTok//lP/W/l3h8QO/OCdCqCW2Cw//MkxAQHkAIWUAhEmAQXWUOFW2dxPu//9mr60ElY5sseQ+xxesmHKtZr7bsqqX2L//MkxAgFwAYiQAhEAC2hq22d3///9FTV6tA36JdgBJoOGgc+7qvqej5Zu7/7uI9l//MkxBQHAAYi8AhEAO193vt9KGOq+6qcT7hhfN5FTInmwk8RkqKImTM55pRQHQSq//MkxBsGkgoIAABHhTACIJLf99nVI///yuW1uBqWfEu7CgNPWGpUadBmZ////4sL//MkxCMHMAH9iABEmAsKioqKigsLCwtVTEFNRTMuOTkuNVVVVVVVVVVVVVVVVVVV//MkxCkECAUYCAAAAFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",e.onended=function(){document.removeEventListener("touchstart",Ks)},e.play()};document.addEventListener("touchstart",Ks)}var Zs,$s=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Qs=function(e){function t(t){var r=e.call(this)||this;return r.basePTS=0,r.pendingEOS=!1,r.maxSize=100,r.queue=new Ls(100),r.running=!0,r.ended=!1,r.timescale=1,r.options=t,r.timeline=t.timeline,r}return $s(t,e),t.prototype.convertPTSToSeconds=function(e){return(e-this.basePTS)/this.timescale},t.prototype.convertSecondsToPTS=function(e){return e*this.timescale+this.basePTS},t.prototype.readCurrentNearestFrame=function(){var e=this.queue.read();return this.writable&&this.emit("writable",void 0),e},t.prototype.getCurrentNearestFrame=function(){return this.queue.first()},t.prototype.seek=function(e){this.flush(),this.emit("writable",void 0)},Object.defineProperty(t.prototype,"buffered",{get:function(){if(this.queue.size>1){var e=(this.queue.first().pts-this.basePTS)/this.timescale,t=(this.queue.last().pts-this.basePTS)/this.timescale;return{length:1,start:function(t){return e},end:function(e){return t}}}return{length:0,start:function(e){return 0},end:function(e){return 0}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"readable",{get:function(){return this.queue.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"writable",{get:function(){return this.queue.size<this.maxSize},enumerable:!1,configurable:!0}),t.prototype.canPlay=function(){return this.queue.size>=3},t.prototype.load=function(e){this.basePTS=e.basePTS,this.timescale=e.timescale},t.prototype.write=function(e){return this.convertPTSToSeconds(e.pts)<this.timeline.currentTime?(console.warn("write skip, because current frame.pts=%d < timeline.currentTime:%d",e.pts,this.timeline.currentTime),!1):(this.queue.write(e),!0)},t.prototype.suspend=function(){},t.prototype.resume=function(){},t.prototype.flush=function(){this.ended=!1,this.pendingEOS=!1,this.queue.clear()},t.prototype.end=function(){this.pendingEOS=!0},t.prototype.destroy=function(){this.pause(),this.removeAllListeners(),this.flush()},t}(ks),Js=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),eu=function(){return eu=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},eu.apply(this,arguments)},tu=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.logger=new Hr("audio-process"),t.bindedAudioBufferDuration=0,t.renderedFrames=[],t.baseCurrentTime=0,t._volume=1,t._handlers=[],t.seek=function(r){t.renderedFrames=[],t.timeline.audioCurrentTime=-1,e.prototype.seek.call(t,r)},t.play=function(){if(!t.ended){if(!t.renderedFrames.length)return t.emit("waiting",void 0);var e=new AudioContext,r=e.createGain();if(r.connect(e.destination),r.gain.value=t._volume,t.ctx=e,t.gainNode=r,t.baseCurrentTime=t.timeline.currentTime,t.bindedAudioBufferDuration=0,t.renderedFrames.forEach((function(n){t.bindFrameToContext(e,r,n)})),t._handlers.length>0){var n=e.createMediaStreamDestination();r.disconnect(),r.connect(n),t._handlers.forEach((function(e){e("add",n.stream)}))}}},t.pause=function(){t.ctx&&(t.baseCurrentTime=0,t.bindedAudioBufferDuration=0,"closed"!==t.ctx.state&&t.ctx.close(),t.ctx=void 0,t.gainNode=void 0),t._handlers.length>0&&t._handlers.forEach((function(e){e("remove")}))},t}return Js(t,e),t.prototype.bindFrameToContext=function(e,t,r){var n=this,o=e.createBufferSource(),i=this.baseCurrentTime,a=r.data,s=this.convertPTSToSeconds(r.pts);o.buffer=a,o.onended=function(){n.readCurrentNearestFrame();var e=n.renderedFrames.shift();if(e){var t=n.convertPTSToSeconds(e.pts);n.timeline.audioCurrentTime=t}o.onended=null,o.disconnect(),n.renderedFrames.length||(n.pendingEOS?(n.ended=!0,n.pause(),n.emit("ended",void 0)):(n.pause(),n.logger.warn("lack data at",n.timeline.currentTime),n.emit("waiting",void 0)))},o.playbackRate.value=this.timeline.playbackRate||1,s>=i?(o.connect(t),(0===this.bindedAudioBufferDuration||Math.abs(this.bindedAudioBufferDuration-(s-i))>.04)&&(this.bindedAudioBufferDuration=s-i),o.start(this.bindedAudioBufferDuration/this.timeline.playbackRate),this.bindedAudioBufferDuration+=a.duration):s<i&&s+a.duration>i&&(o.connect(t),o.start(0,(i-s)/this.timeline.playbackRate),this.bindedAudioBufferDuration=a.duration-(i-s))},Object.defineProperty(t.prototype,"volume",{get:function(){var e;return(null===(e=this.gainNode)||void 0===e?void 0:e.gain.value)||this._volume},set:function(e){this._volume=e,this.gainNode&&(this.gainNode.gain.value=e)},enumerable:!1,configurable:!0}),t.prototype.canPlay=function(){return this.renderedFrames.length>=3},t.prototype.write=function(t){var r=this,n=e.prototype.write.call(this,t);if(n){for(var o=t.channels,i=t.data,a=t.sampleRate,s=new Float32Array(i.buffer),u=s.length/o,c=new OfflineAudioContext(o,u,a),l=c.createBufferSource(),p=c.createBuffer(o,u,a),f=0,d=p.numberOfChannels;f<d;f++)p.getChannelData(f).set(s.slice(p.length*f,p.length*(f+1)));l.buffer=p,l.connect(c.destination),l.start(),c.startRendering().then((function(e){var n=eu(eu({},t),{data:e});r.renderedFrames.push(n),r.ctx&&r.gainNode&&r.bindFrameToContext(r.ctx,r.gainNode,n),3===r.renderedFrames.length&&r.emit("canplay",void 0),r.emit("progress",void 0)}))}return n},t.prototype.destroy=function(){e.prototype.destroy.call(this)},t.prototype.getAudioContextSteam=function(e){var t=this;return{onMediaStream:function(e){return t._handlers.push(e),function(){t._handlers=t._handlers.filter((function(t){return t!==e}))}},hasAudio:function(){return e}}},t}(Qs),ru=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),nu=function(e){function t(t){var r=e.call(this)||this;return r.options=t,r}return ru(t,e),t}(rs),ou=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),iu=function(e){function t(t){var r=e.call(this,t)||this;return r.logger=new Hr("yuv-canvas"),r.gl=null,r.program=null,r.yTexture=null,r.uTexture=null,r.vTexture=null,r.options=t,r._initContextGL(),r.gl&&(r._initProgram(r.gl),r.program&&(r._initBuffer(r.gl,r.program),r._initTextures(r.gl,r.program))),r}return ou(t,e),t.isWebGLAvailable=function(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(e){return!1}},t.prototype._initContextGL=function(){for(var e=this.options,t=e.el,r=e.contextOptions,n=["webgl","experimental-webgl","moz-webgl","webkit-3d"],o=0;!this.gl&&o<n.length;){var i=n[o];try{this.gl=t.getContext(i,r)}catch(e){}++o}this.gl||this.emit("error",{code:It.WEBGL_NOT_SUPPORTED,message:"浏览器不支持 WebGL"})},t.prototype._initProgram=function(e){var t=e.createShader(e.VERTEX_SHADER),r=e.createShader(e.FRAGMENT_SHADER),n=e.createProgram();t&&r&&n?(e.shaderSource(t,"\n    attribute vec4 vertexPos;\n    attribute vec2 texturePos;\n    varying vec2 textureCoord;\n\n    void main() {\n        gl_Position = vertexPos;\n        textureCoord = texturePos;\n    }\n"),e.compileShader(t),e.getShaderParameter(t,e.COMPILE_STATUS)||this.logger.error("yuvcanvas","Vertex shader failed to compile: ",e.getShaderInfoLog(t)),e.shaderSource(r,"\n    precision highp float;\n    varying highp vec2 textureCoord;\n    uniform sampler2D ySampler;\n    uniform sampler2D uSampler;\n    uniform sampler2D vSampler;\n    const mat4 YUV2RGB = mat4(\n        1.1643828125, 0, 1.59602734375, -.87078515625,\n        1.1643828125, -.39176171875, -.81296875, .52959375,\n        1.1643828125, 2.017234375, 0, -1.081390625,\n        0, 0, 0, 1\n    );\n\n    void main(void) {\n        highp float y = texture2D(ySampler,  textureCoord).r;\n        highp float u = texture2D(uSampler,  textureCoord).r;\n        highp float v = texture2D(vSampler,  textureCoord).r;\n        gl_FragColor = vec4(y, u, v, 1) * YUV2RGB;\n    }\n"),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)||this.logger.error("yuvcanvas","Fragment shader failed to compile: ",e.getShaderInfoLog(r)),e.attachShader(n,t),e.attachShader(n,r),e.linkProgram(n),e.getProgramParameter(n,e.LINK_STATUS)||this.logger.error("yuvcanvas","Program failed to compile: ",e.getProgramInfoLog(n)),e.pixelStorei(e.UNPACK_ALIGNMENT,1),e.useProgram(n),this.program=n):this.emit("error",{code:It.WEBGL_NOT_SUPPORTED,message:"浏览器不支持 WebGL shader"})},t.prototype._initBuffer=function(e,t){e.bindBuffer(e.ARRAY_BUFFER,e.createBuffer()),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,1,-1,1,1,-1,1,-1,-1,1,-1,-1]),e.STATIC_DRAW);var r=e.getAttribLocation(t,"vertexPos");e.enableVertexAttribArray(r),e.vertexAttribPointer(r,2,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,e.createBuffer()),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,0,0,0,1,1,1,1,0,0,0,1]),e.STATIC_DRAW);var n=e.getAttribLocation(t,"texturePos");e.enableVertexAttribArray(n),e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0)},t.prototype._initTextures=function(e,t){var r=this._createTexture(e),n=e.getUniformLocation(t,"ySampler");e.uniform1i(n,0),this.yTexture=r;var o=this._createTexture(e),i=e.getUniformLocation(t,"uSampler");e.uniform1i(i,1),this.uTexture=o;var a=this._createTexture(e),s=e.getUniformLocation(t,"vSampler");e.uniform1i(s,2),this.vTexture=a},t.prototype._createTexture=function(e){var t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindTexture(e.TEXTURE_2D,null),t},t.prototype.clear=function(){this.gl&&(this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT))},t.prototype.draw=function(e){this.gl&&this.drawWebGL(this.gl,e.data)},t.prototype.drawWebGL=function(e,t){var r=this,n=r.yTexture,o=r.uTexture,i=r.vTexture,a=r.options.el,s=a.width,u=a.height,c=s*u;e.viewport(0,0,s,u);var l=c,p=t.subarray(0,l);e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,e.LUMINANCE,s,u,0,e.LUMINANCE,e.UNSIGNED_BYTE,p);var f=c/4,d=t.subarray(l,l+f);e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,o),e.texImage2D(e.TEXTURE_2D,0,e.LUMINANCE,s/2,u/2,0,e.LUMINANCE,e.UNSIGNED_BYTE,d);var h=f,v=t.subarray(l+f,l+f+h);e.activeTexture(e.TEXTURE2),e.bindTexture(e.TEXTURE_2D,i),e.texImage2D(e.TEXTURE_2D,0,e.LUMINANCE,s/2,u/2,0,e.LUMINANCE,e.UNSIGNED_BYTE,v),e.drawArrays(e.TRIANGLES,0,6)},t}(nu),au=r(731),su=r.n(au),uu=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),cu=function(e){function t(t){var r=e.call(this,t)||this;r.logger=new Hr("software-yuv-canvas"),r._options=t;var n=r._options.el;return r._el=n,r._el||(r.logger.error("this canvas not support"),r.emit("error",{code:It.CANVAS_NOT_SUPPORTED,message:"this canvas not support"})),r._frameSink=su().attach(r.options.el,{webGL:!1}),r._frameSink||(r.logger.error("YUVCanvas attach failed"),r.emit("error",{code:It.SOFT_RENDER_INIT_FAILED,message:"YUVCanvas attach failed"})),r}return uu(t,e),t.prototype.makeYUVFrame=function(e){var t=e.width,r=e.height,n=e.chromaWidth,o=e.chromaHeight,i=r*t,a=e.data.subarray(0,i),s=i/4,u=e.data.subarray(i,i+s),c=s,l=e.data.subarray(i+s,i+s+c);return{format:{width:t,height:r,chromaWidth:n,chromaHeight:o,cropLeft:0,cropTop:0,cropWidth:this._el.width,cropHeight:this._el.height,displayWidth:this._el.width,displayHeight:this._el.height},y:{bytes:a,stride:t},u:{bytes:u,stride:t>>1},v:{bytes:l,stride:t>>1}}},t.prototype.draw=function(e){this._frameSink&&this._frameSink.drawFrame(this.makeYUVFrame(e))},t}(nu),lu=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),pu=function(e){function t(t){var r=e.call(this,t)||this;r.logger=new Hr("video-process"),r.containerRatio=1,r.timer=-1,r.stopRender=!1,r.firstFrameRendered=!1,r._format=An.MP4,r.isLive=!1,r.fps=25,r.cancelAnimation=function(){r.stopRender=!0,clearTimeout(r.timer)},r.startAnimation=function(){r.stopRender=!1,r.playWithElapsed()},r.triggerEnd=function(){r.ended=!0,r.cancelAnimation(),r.emit("ended",void 0)},r.playWithElapsed=function(){if(!r.stopRender&&!r.ended){var e=r.getCurrentNearestFrame();if(e){var t=r.convertPTSToSeconds(e.pts),n=t-r.timeline.currentTime;if(r.isLive&&r.timeline.audioCurrentTime>0)n=t-r.timeline.audioCurrentTime;var o=1e3/r.fps/r.timeline.playbackRate;if(n<-.16)r.readCurrentNearestFrame(),console.warn("delay < SYNC_VIDEO_AUDIO_DELAY_MIN delay:%f",n),clearTimeout(r.timer),r.timer=setTimeout(r.playWithElapsed,1);else if(n>.16){console.warn("delay > SYNC_VIDEO_AUDIO_DELAY_MAX delay render delay:",n);var i=1e3*n/r.timeline.playbackRate;i>o&&(i=o),clearTimeout(r.timer),r.timer=setTimeout(r.playWithElapsed,i)}else{r.readCurrentNearestFrame(),document.hidden||r._yuvCanvas&&r._yuvCanvas.draw(e);var a=r.getCurrentNearestFrame();if(a){var s=r.convertPTSToSeconds(a.pts),u=r.timeline.currentTime;r.timeline.audioCurrentTime>0&&(u=r.timeline.audioCurrentTime);var c=1e3*(s-u)/r.timeline.playbackRate;c>o&&(c=o),r.timer=setTimeout(r.playWithElapsed,c)}else r.pendingEOS?r.triggerEnd():r.timer=setTimeout(r.playWithElapsed,1e3/r.fps/r.timeline.playbackRate)}}else{if(r.pendingEOS)return r.triggerEnd();r.logger.warn("lack data at",r.timeline.currentTime),r.cancelAnimation(),r.emit("waiting",void 0)}}},r.el=document.createElement("canvas"),Object.assign(r.el.style,{verticalAlign:"middle",objectFit:t.objectFit||"contain"});var n={el:r.el,contextOptions:{preserveDrawingBuffer:!0}};return iu.isWebGLAvailable()?(r._yuvCanvas=new iu(n),console.log("use WebGLYUVCanvas")):(r._yuvCanvas=new cu(n),console.log("use SoftwareYUVCanvas")),r.fps=r.timeline.fps,r}return lu(t,e),t.prototype.pause=function(){this.cancelAnimation()},t.prototype.play=function(){this.cancelAnimation(),this.startAnimation()},t.prototype.seek=function(t){this.firstFrameRendered=!1,e.prototype.seek.call(this,t)},t.prototype.write=function(t){if(!this.isLive&&this.format===An.HLS&&!this.firstFrameRendered){var r=this.convertPTSToSeconds(t.pts)-this.timeline.currentTime;return r>-.16&&r<.16&&(this._yuvCanvas.draw(t),this.firstFrameRendered=!0),!1}if(this.isLive&&this.queue.size>this.maxSize)return console.warn("[render] queue is full[%d], skip this frame pts:%d",this.queue.size,t.pts),!1;var n=e.prototype.write.call(this,t);return this.firstFrameRendered||(this._yuvCanvas.draw(t),this.firstFrameRendered=!0),3===this.queue.size&&this.emit("canplay",void 0),this.emit("progress",void 0),n},t.prototype.attach=function(e){e.appendChild(this.el),this.containerRatio=e.offsetWidth/e.offsetHeight},t.prototype.load=function(t){e.prototype.load.call(this,t);var r=t.width,n=t.height,o=t.rotate,i=void 0===o?0:o,a=t.live;this.isLive=a,t.fps&&(this.fps=t.fps),this.el.width=r,this.el.height=n;var s=r/n>this.containerRatio;if(this.el.style.width="100%",this.el.style.height="100%",i%360){var u=i%360/180*Math.PI,c=Math.abs(r*Math.cos(u)+n*Math.sin(u)),l=Math.abs(n*Math.cos(u)+r*Math.sin(u)),p="contain"===this.options.objectFit?"scale(".concat(s?r/c:n/l,") "):"";this.el.style.transform="".concat(p," rotate(").concat(i,"deg)")}},t.prototype.destroy=function(){var t;e.prototype.destroy.call(this),null===(t=this.el.parentNode)||void 0===t||t.removeChild(this.el)},Object.defineProperty(t.prototype,"canvas",{get:function(){return this.el},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"format",{get:function(){return this._format},set:function(e){this._format=e},enumerable:!1,configurable:!0}),t}(Qs),fu=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),du=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},hu=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};!function(e){e[e.PAUSED=0]="PAUSED",e[e.PLAYING=1]="PLAYING",e[e.WAITING=2]="WAITING"}(Zs||(Zs={}));var vu=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.baseCurrentTime=0,t.timeUpdateTimer=-1,t._playbackRate=1,t._audioCurrentTime=-1,t._fps=25,t.status=Zs.PAUSED,t}return fu(t,e),t.prototype.setTimeUpdateTimer=function(){var e=this;this.timeUpdateTimer=setInterval((function(){e.emit("timeupdate",void 0)}),100)},t.prototype.clearTimeUpdateTimer=function(){clearInterval(this.timeUpdateTimer)},Object.defineProperty(t.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(e){var t=this.currentTime;this.currentTime=t,this._playbackRate=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fps",{get:function(){return this._fps},set:function(e){this._fps=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"waiting",{get:function(){return this.status===Zs.WAITING},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"paused",{get:function(){return this.status===Zs.PAUSED},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentTime",{get:function(){return this.ctx?this.ctx.currentTime*this._playbackRate+this.baseCurrentTime:this.baseCurrentTime},set:function(e){if(this.ctx){var t=this.ctx.state;this.ctx.close(),this.ctx=new AudioContext,"suspended"===t&&this.ctx.suspend()}this.baseCurrentTime=e,this.emit("timeupdate",void 0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"audioCurrentTime",{get:function(){return this._audioCurrentTime},set:function(e){this._audioCurrentTime=e},enumerable:!1,configurable:!0}),t.prototype.play=function(){var e;return du(this,void 0,void 0,(function(){return hu(this,(function(t){return"running"===(null===(e=this.ctx)||void 0===e?void 0:e.state)||(this.setTimeUpdateTimer(),this.status=Zs.PLAYING,this.ctx=new AudioContext,this.emit("play",void 0),this.emit("playing",void 0)),[2,this.ctx]}))}))},t.prototype.pause=function(){return du(this,void 0,void 0,(function(){var e,t=this;return hu(this,(function(r){return this.clearTimeUpdateTimer(),this.baseCurrentTime=this.currentTime,e=this.ctx?this.ctx.close():Promise.resolve(),this.ctx=void 0,[2,e.then((function(){t.status=Zs.PAUSED,t.emit("pause",void 0)}))]}))}))},t.prototype.suspend=function(){return du(this,void 0,void 0,(function(){var e=this;return hu(this,(function(t){return this.clearTimeUpdateTimer(),this.ctx?[2,this.ctx.suspend().then((function(){e.status=Zs.WAITING,e.emit("waiting",void 0)}))]:(this.status!==Zs.WAITING&&(this.status=Zs.WAITING,this.emit("waiting",void 0)),[2])}))}))},t.prototype.resume=function(){return du(this,void 0,void 0,(function(){var e,t=this;return hu(this,(function(r){return this.setTimeUpdateTimer(),(e=this.ctx)?[2,e.resume().then((function(){return t.status=Zs.PLAYING,t.emit("playing",void 0),e}))]:[2,this.play()]}))}))},t.prototype.reset=function(){this.baseCurrentTime=0,this.status=Zs.PAUSED,this.clearTimeUpdateTimer(),this.ctx&&(this.ctx.close(),this.ctx=void 0)},t}(rs),yu=function(){function e(){this.posterEl=document.createElement("img"),Object.assign(this.posterEl.style,{position:"absolute",width:"100%",height:"100%",objectFit:"contain",backgroundColor:"#000",zIndex:1})}return Object.defineProperty(e.prototype,"src",{set:function(e){this.posterEl.src=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visible",{set:function(e){this.posterEl.style.display=e?"":"none"},enumerable:!1,configurable:!0}),e.prototype.attach=function(e){e.appendChild(this.posterEl)},e.prototype.destroy=function(){var e;null===(e=this.posterEl.parentNode)||void 0===e||e.removeChild(this.posterEl)},e}(),_u=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),mu=function(){return mu=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},mu.apply(this,arguments)},gu=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},bu=function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},Eu=hn.createAnnexbStartCode();var Tu=function(e){function t(t){var r=e.call(this,t)||this;r._muted=!1,r._volume=1,r.logger=new Hr("wasm-renderer"),r.posterRenderer=new yu,r.seeking=!1,r.hasError=!1,r.handleProgress=er()((function(){r.emit("progress",void 0)}),500),r.type=kt.WASM,r.handleDemuxEnd=function(){r.audioDecodeStream.end(),r.videoDecodeStream.end()},r.handleError=function(e){r.hasError=!0,r.emit("error",e),r.options.demuxer.suspend()},r.handleStatusChange=function(e){!r.hasError&&!r.seeking&&e.previousStatus>=Ts.NORMAL&&e.currentStatus<Ts.NORMAL&&r.metadata.progressive&&r.options.demuxer.resume()},r.handleEnded=function(){r.logger.log("ended",r.availableProcesses.map((function(e){return e.logger.name+":"+e.ended}))),r.ended&&(r.loop?r.seek(0):r.pause().then((function(){r.emit("ended",void 0)})))},r.handleWaiting=function(){r.timeline.suspend().then((function(){r.availableProcesses.forEach((function(e){return e.pause()})),r.status=Dt.WAITING}))},r.handleCanplay=function(){r.logger.log("canplay",r.availableProcesses.map((function(e){return e.logger.name+":"+e.canPlay()})),r.timeline.status),r.availableProcesses.every((function(e){return e.canPlay()}))&&((r.timeline.waiting||r.timeline.paused)&&r.emit("canplay",void 0),r.timeline.waiting&&r.timeline.resume().then((function(){r.availableProcesses.forEach((function(e){return e.play()})),r.status=Dt.PLAYING})))},r.write=function(e){var t=e.packets;return gu(r,void 0,void 0,(function(){var e,r,n,o,i=this;return bu(this,(function(a){return t.length?(this.seeking&&(this.seeking=!1,this.emit("seeked",void 0)),e=this.metadata,r=e.tracks,n=e.basePTS,o=void 0===n?0:n,r&&(r.forEach((function(e){var r=i.currentTime,n=hr(t.filter((function(t){return t.trackType===e.type&&!(t.isNonRef&&(t.pts-o)/e.timescale<r)})),(function(e){return e.dts.toString()}));if(n.length)if(e.type===Pn.VIDEO){var a=i.skipFrame===bn.NONREF?n.filter((function(e){return!e.isNonRef})):n;if(!a.length)return;i.videoDecodeStream.write(a.map((function(t){var r,n=[];return t.data.forEach((function(e){return n.push(Eu,e)})),{isSync:t.isSync,isNonRef:t.isNonRef,basePTS:o,timescale:e.timescale,codecId:(r=t.codec,(/hvc1/.test(r)?is.H265:/avc1/.test(r)?is.H264:/mp4a/.test(r)?is.AAC:/vvc1/.test(r)?is.H266:void 0)||is.H265),pts:t.pts,dts:t.dts,data:$r.concatUint8s(n)}})))}else e.type===Pn.AUDIO&&i.audioDecodeStream.write(n.map((function(t){return{isNonRef:t.isNonRef,basePTS:o,timescale:e.timescale,codecId:is.AAC,pts:t.pts,data:Jr($r.concatUint8s(t.data),e)}})))})),!this.metadata.progressive||this.videoDecodeStream.writable||this.audioDecodeStream.writable||this.options.demuxer.suspend()),[2]):[2]}))}))};var n=t.demuxer,o=t.playbackRate,i=t.fps;return r.timeline=new vu,null!=o&&(r.timeline.playbackRate=o),null!=i&&(r.timeline.fps=i),r.timeline.proxy(r,["play","pause","waiting","playing","timeupdate"]),r.audioDecodeStream=new Xs({timeline:r.timeline,codecId:t.audioCodecId||is.AAC,wasmDomain:t.wasmDomain,skipFrame:t.skipFrame}),r.videoDecodeStream=new Xs({timeline:r.timeline,threads:t.threads,simd:t.simd,codecId:t.videoCodecId||is.H265,fps:t.fps,wasmDomain:t.wasmDomain,skipFrame:t.skipFrame}),r.videoDecodeStream.proxy(r,["decoderoverload"]),r.audioDecodeStream.queue.on("statuschange",r.handleStatusChange),r.videoDecodeStream.queue.on("statuschange",r.handleStatusChange),r.audioDecodeStream.on("error",r.handleError),r.videoDecodeStream.on("error",r.handleError),r.audioDecodeStream.on("end",(function(){r.audioProcess.end()})),r.videoDecodeStream.on("end",(function(){r.videoProcess.end()})),r.audioProcess=new tu({timeline:r.timeline}),r.videoProcess=new pu({timeline:r.timeline,objectFit:t.objectFit}),r.videoProcess.format=n.activeParser.formatType,r.audioDecodeStream.pipe(r.audioProcess),r.videoDecodeStream.pipe(r.videoProcess),r.audioProcess.on("progress",r.handleProgress),r.videoProcess.on("progress",r.handleProgress),r.audioProcess.on("waiting",r.handleWaiting),r.videoProcess.on("waiting",r.handleWaiting),r.audioProcess.on("ended",r.handleEnded),r.videoProcess.on("ended",r.handleEnded),r.audioProcess.on("canplay",r.handleCanplay),r.videoProcess.on("canplay",r.handleCanplay),r.audioProcess.on("error",r.handleError),r.videoProcess.on("error",r.handleError),n.on("loadeddata",r.write),n.on("end",r.handleDemuxEnd),r}return _u(t,e),Object.defineProperty(t.prototype,"availableProcesses",{get:function(){var e,t=this,r=[];return null===(e=this.metadata.tracks)||void 0===e||e.map((function(e){e.type===Pn.AUDIO?r.push(t.audioProcess):e.type===Pn.VIDEO&&r.push(t.videoProcess)})),r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"buffered",{get:function(){var e=this.availableProcesses.map((function(e){return e.buffered})),t=Math.min.apply(Math,e.map((function(e){return e.start(0)}))),r=Math.min.apply(Math,e.map((function(e){return e.end(0)})));return{length:1,start:function(e){return t},end:function(e){return r}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ended",{get:function(){return this.availableProcesses.every((function(e){return e.ended}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"paused",{get:function(){return this.timeline.paused},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentTime",{get:function(){return this.timeline.currentTime},enumerable:!1,configurable:!0}),t.prototype.setPoster=function(e){this.posterRenderer.src=e},t.prototype.setPlaybackRate=function(e){console.log("setPlaybackRate rate:",e),e!==this.timeline.playbackRate&&(this.timeline.playbackRate=e,this.videoDecodeStream.setPlaybackRate(e),this.status!==Dt.PLAYING&&this.status!==Dt.WAITING||(this.audioProcess.pause(),this.videoProcess.pause(),this.audioProcess.play(),this.videoProcess.play()),this.emit("ratechange",void 0))},Object.defineProperty(t.prototype,"playbackRate",{get:function(){return this.timeline.playbackRate},enumerable:!1,configurable:!0}),t.prototype.setMuted=function(e){e!==this._muted&&(this._muted=e,this.audioProcess.volume=e?0:this._volume,this.emit("volumechange",void 0),this._noticeUpdate())},Object.defineProperty(t.prototype,"muted",{get:function(){return this._muted},enumerable:!1,configurable:!0}),t.prototype.setVolume=function(e){e!==this.volume&&(this._volume=e,this.audioProcess.volume=e,this.emit("volumechange",void 0),this._noticeUpdate())},Object.defineProperty(t.prototype,"volume",{get:function(){return this._volume},enumerable:!1,configurable:!0}),t.prototype.attach=function(e){this.videoProcess.attach(e)},t.prototype.load=function(e){var t=this;this.reset(),this.duration=Math.round(e.duration/e.timescale),e.tracks.forEach((function(r){r.type===Pn.VIDEO?(t.videoProcess.load(mu(mu({},r),{basePTS:e.basePTS,live:e.live})),r.fps&&t.videoDecodeStream.setFps(r.fps)):r.type===Pn.AUDIO&&t.audioProcess.load(mu(mu({},r),{basePTS:e.basePTS}))})),this.metadata=e,this.videoDecodeStream.setIsLive(e.live),this.emit("loadedmetadata",void 0),this.emit("loadeddata",void 0),this.autoplay&&(to.isDingtalk?(setTimeout((function(){t.play()}),150),console.log("钉钉windows环境直接play")):Ys(void 0,void 0,void 0,(function(){return qs(this,(function(e){return[2,new Promise((function(e){setTimeout((function(){e(!1)}),150);var t=new At,r=t.createBuffer(1,1,22050),n=t.createBufferSource();n.buffer=r,n.connect(t.destination),n.onended=function(){e(!0)},n.start()})).catch((function(){return!1}))]}))})).then((function(e){console.log("检查环境是否允许 webaudio autoplay:",e),e&&t.play()}))),this._noticeUpdate()},t.prototype.seek=function(e){return gu(this,void 0,void 0,(function(){var t,r,n,o,i,a,s,u,c;return bu(this,(function(l){switch(l.label){case 0:return t=this.metadata,r=t.live,n=t.progressive,o=t.duration,i=void 0===o?1/0:o,a=t.timescale,s=void 0===a?1:a,r?(this.logger.warn("don't allow to seek in live mode"),[2]):(this.hasError=!1,this.seeking=!0,this.emit("seeking",void 0),u=Math.min(e,i/s||1/0),this.availableProcesses.forEach((function(e){return e.seek(u)})),n?(c=this.timeline.paused,this.options.demuxer.suspend(),[4,this.pause()]):[3,3]);case 1:return l.sent(),[4,this.flush()];case 2:return l.sent(),this.options.demuxer.seek(u),this.timeline.currentTime=u,c||this.play(),[3,4];case 3:this.timeline.currentTime=u,l.label=4;case 4:return this.status===Dt.ENDED&&(this.status=Dt.PAUSED),[2]}}))}))},t.prototype.play=function(){return gu(this,void 0,void 0,(function(){var e,t=this;return bu(this,(function(r){return this.posterRenderer.visible=!1,(this.currentTime>=this.duration&&this.duration>0||this.ended)&&(this.flush(),this.seek(0)),e=this.availableProcesses,!this.ended||e.length&&!e.some((function(e){return!e.canPlay()}))?[2,this.timeline.play().then((function(){t.availableProcesses.forEach((function(e){return e.play()})),t.status=Dt.PLAYING}))]:[2,this.timeline.suspend().then((function(){t.status=Dt.WAITING}))]}))}))},t.prototype.pause=function(){var e=this;return this.timeline.pause().then((function(){e.availableProcesses.forEach((function(e){return e.pause()})),e.status=Dt.PAUSED}))},t.prototype.toggle=function(){return this.paused?this.play():this.pause()},t.prototype.flush=function(){return gu(this,void 0,void 0,(function(){return bu(this,(function(e){switch(e.label){case 0:return[4,Promise.all([this.videoDecodeStream.flush(),this.audioDecodeStream.flush()])];case 1:return e.sent(),this.videoProcess.flush(),this.audioProcess.flush(),[2]}}))}))},t.prototype.reset=function(){this.audioProcess.pause(),this.videoProcess.pause(),this.seeking=!1,this.hasError=!1,this.timeline.reset(),this.posterRenderer.visible=!0,e.prototype.reset.call(this)},t.prototype.destroy=function(){this.options.demuxer.off("loadeddata",this.write),this.options.demuxer.off("end",this.handleDemuxEnd),this.posterRenderer.destroy(),this.timeline.removeAllListeners(),this.reset(),this.removeAllListeners(),this.videoDecodeStream.destroy(),this.audioDecodeStream.destroy(),this.videoProcess.destroy(),this.audioProcess.destroy()},Object.defineProperty(t.prototype,"textureElement",{get:function(){return{type:"canvas",el:this.videoProcess.canvas}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"audioElement",{get:function(){var e=this;return{type:"audioContextStream",el:this.audioProcess.getAudioContextSteam(new Promise((function(t){e.once("loadedmetadata",(function(){if(e.metadata.tracks){var r=e.metadata.tracks.find((function(e){return e.type===Pn.AUDIO}));t(!!r)}else t(!1)}))})))}},enumerable:!1,configurable:!0}),t.type=kt.WASM,t}(us),wu=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Su=function(){return Su=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Su.apply(this,arguments)},Ou=[{enable:!0,test:function(e){var t=(e.formatType===An.HLS||e.formatType===An.MPEGTS)&&mr.isSafari,r=e.formatType===An.MP4;return!(!t&&!r)&&e.tracks.some((function(e){var t;if(e.type===Pn.VIDEO&&dr(e.codecTag||e.codec))return!1;var n,o=pr(e.codec),i=!1;if(mr.isSafari&&e.type===Pn.VIDEO&&(n=e.codecTag||e.codec||"",/hvc/i.test(n))&&r)i=!0;else if(e.type===Pn.VIDEO&&fr(e.codecTag||e.codec||""))if(mr.isChrome){var a=null===(t=navigator.userAgent.match(/Chrome\/(\d+)/i))||void 0===t?void 0:t[1];void 0!==a&&parseInt(a,10)>=104&&(i=MediaSource.isTypeSupported("video/mp4;codecs=".concat(e.codec)))}else if(mr.isMQQBrowser&&!mr.isSafari){i="probably"===document.createElement("video").canPlayType("video/mp4;codecs=".concat(e.codec))}return i||o}))},Class:ls},{enable:Rt,test:function(e){if([An.HLS,An.MPEGTS].includes(e.formatType)&&mr.isMQQBrowser&&!mr.isSafari){var t="probably"===document.createElement("video").canPlayType("video/mp4;codecs="+e.tracks.map((function(e){return e.codec})).join(","));return t}return e.tracks.some((function(e){return/avc1/i.test(e.codec)}))||MediaSource.isTypeSupported("video/mp4;codecs="+e.tracks.map((function(e){return e.codec})).join(","))},Class:ms},{enable:Pt,test:function(e){return e.tracks.some((function(e){return/(avc1|hvc1|hev1|vvc1)/i.test(e.codec)}))},Class:Tu}],Au=(Ou[0],["progress","update","timeupdate","canplay","seeking","seeked","play","playing","pause","volumechange","ratechange","fullscreenchange","error","loadedmetadata","loadeddata","waiting","ended","decoderoverload"]),Pu=["loadstart","error"],Ru=hr(Au.concat(Pu,"beforerendererchange","loadedsupportinfo","decoderoverload"),(function(e){return e})),xu=function(e){function t(t){var r=e.call(this)||this;r.metadata=null,r._src="",r._nextSourceIndex=0,r.logger=new Hr("controller"),r.error=null,r.handleError=function(e){r.demuxer.suspend();var t=r.sourceSrc;if(t&&0===r.currentTime)return r._nextSourceIndex++,void(r.src=t);r.error=e,r.emit("update",void 0)},r.handleLoadedMetadata=function(e){r.emit("beforerendererchange",e),r.metadata=e;var t=r.activeRenderer.status;if(console.log("handleLoadedMetadata metadata:",e),void 0===r.assignRendererType){var n=r.isForceWASM?Ou.find((function(e){return e.enable&&e.Class===Tu})):Ou.find((function(t){return t.enable&&t.test(e)}));r.logger.log("[handleLoadedMetadata] rendererConfig:",n),r.resetActiveRenderer(n)}r.activeRenderer.load(e),t!==Dt.WAITING&&t!==Dt.PLAYING||r.activeRenderer.play(),r._probeResult&&r.emit("loadedsupportinfo",Su(Su({},r._probeResult),{renderer:r.activeRenderer.type}))},r.handleRendererVolumeChange=function(){r.options.volume=r.activeRenderer.volume,r.options.muted=r.activeRenderer.muted},r.options=t,r.demuxer=new Ga(t),r.demuxer.proxy(r,Pu),r.demuxer.on("loadedmetadata",r.handleLoadedMetadata);var n=Ou[0];if(r.assignRendererType=r.options.rendererType,void 0!==r.assignRendererType){var o=r.getRendererConfigByType();o&&(n=o)}return console.log("assignRendererType",r.assignRendererType," assignConfig",n,", options:",t),r.activeRenderer=r.createRendererInstance(n),r.runProbe()?(r.on("error",r.handleError),setTimeout((function(){var e=r.sourceSrc;e?(r._nextSourceIndex++,r.src=e):t.src&&(r.src=t.src)}),0),r):r}return wu(t,e),t.prototype.resetActiveRenderer=function(e){console.log("resetActiveRenderer config:",e),e?e.Class.type!==this.activeRenderer.type&&(e.Class.type===kt.Native&&this.demuxer.suspend(),this.activeRenderer.pause(),this.activeRenderer.destroy(),this.activeRenderer=this.createRendererInstance(e)):this.emit("error",{code:En.RENDERER,message:"No suitable renderer found"})},t.prototype.createRendererInstance=function(e){var t,r,n=this.options,o=n.container,i=n.volume,a=n.autoplay,s=n.loop,u=n.muted,c=n.poster,l=n.skipFrame,p=((null===(t=this.metadata)||void 0===t?void 0:t.tracks.find((function(e){return e.type===Pn.VIDEO})))||{}).fps,f=((null===(r=this.metadata)||void 0===r?void 0:r.tracks.find((function(e){return e.type===Pn.VIDEO})))||{}).codec,d=is.H265;dr(f)&&(d=is.H266);var h=new e.Class({demuxer:this.demuxer,threads:this.options.threads&&Ws.supportWasmThreads(),simd:this.options.simd,playbackRate:this.options.playbackRate,objectFit:this.options.objectFit,fps:p,wasmDomain:this.options.wasmDomain,videoCodecId:d,audioCodecId:is.AAC,skipFrame:l||bn.NONE});return lr(i)||h.setVolume(i),lr(a)||h.setAutoplay(a),lr(s)||h.setLoop(s),lr(u)||h.setMuted(u),lr(c)||h.setPoster(c),lr(l)||(h.skipFrame=l),h.on("volumechange",this.handleRendererVolumeChange),h.attach(o),h.proxy(this,Au),h},t.prototype.getRendererConfigByType=function(){var e=this;return Ou.find((function(t){return t.enable&&e.rendererType===t.Class.type}))},Object.defineProperty(t.prototype,"isForceWASM",{get:function(){return/mix/i.test(this.mimeType)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isForceNative",{get:function(){return e=this.mimeType,(/m3u8/i.test(e)&&mr.isSafari||function(e){return/mp4/i.test(e)}(this.mimeType))&&(pr(this.mimeType)||Ct);var e},enumerable:!1,configurable:!0}),t.prototype.createMp4Metadata=function(e){return{formatType:An.MP4,live:!1,progressive:!1,url:e,basePTS:0,baseDTS:0,timescale:1e3,duration:0,tracks:[]}},t.prototype.runProbe=function(){var e=this,t=new Ws,r=t.checkSupport();if(Promise.allSettled([Ws.supportSIMD(),Ws.supportWasmThreads()]).then((function(t){var n=t[0],o=t[1],i="fulfilled"===n.status?n.value:n.reason,a="fulfilled"===o.status?o.value:o.reason;r.detail.simd=i,r.detail.wasmThreads=a,e._probeResult=r})),r.supported)return!0;var n=t.makeErrorCode(r.detail),o={code:n,message:n?Ws.makeErrorMessage(n):""};return this.error=o,setTimeout((function(){e.emit("error",o)}),0),!1},Object.defineProperty(t.prototype,"buffered",{get:function(){return this.activeRenderer.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"progressive",{get:function(){return this.options.progressive},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"live",{get:function(){var e;return!!(null===(e=this.metadata)||void 0===e?void 0:e.live)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skipFrame",{get:function(){return this.demuxer.skipFrame},set:function(e){this.demuxer.skipFrame=e,this.activeRenderer.skipFrame=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoplay",{get:function(){return!!this.activeRenderer.autoplay},set:function(e){this.options.autoplay=e,this.activeRenderer.setAutoplay(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"muted",{get:function(){return this.activeRenderer.muted},set:function(e){this.activeRenderer.setMuted(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"preload",{get:function(){return this.options.preload||""},set:function(e){this.options.preload=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"paused",{get:function(){return this.activeRenderer.paused},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"loop",{get:function(){return!!this.activeRenderer.loop},set:function(e){this.options.loop=e,this.activeRenderer.setLoop(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playbackRate",{get:function(){return this.activeRenderer.playbackRate},set:function(e){this.options.playbackRate=e,this.activeRenderer.setPlaybackRate(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"audioTrack",{get:function(){var e;return null===(e=this.metadata)||void 0===e?void 0:e.tracks.find((function(e){return e.type===Pn.AUDIO}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"audioCodec",{get:function(){var e;return null===(e=this.audioTrack)||void 0===e?void 0:e.codec},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"videoCodec",{get:function(){var e;return(null===(e=this.videoTrack)||void 0===e?void 0:e.codec)||(pr(this.mimeType)?"avc1":fr(this.mimeType)?"hvc1":"")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"videoTrack",{get:function(){var e;return null===(e=this.metadata)||void 0===e?void 0:e.tracks.find((function(e){return e.type===Pn.VIDEO}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"videoWidth",{get:function(){var e;return null===(e=this.videoTrack)||void 0===e?void 0:e.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"videoHeight",{get:function(){var e;return null===(e=this.videoTrack)||void 0===e?void 0:e.height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this.activeRenderer.duration},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentTime",{get:function(){return this.activeRenderer.currentTime},set:function(e){this.error=null,this.logger.info("seek",e,"s"),this.activeRenderer.seek(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sourceSrc",{get:function(){var e,t=null===(e=this.options.sources)||void 0===e?void 0:e[this._nextSourceIndex];return"object"==typeof t?t.src:t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"src",{get:function(){return this._src},set:function(e){if(this.reset(),this._src=e,this.isForceNative)this.activeRenderer.proxy(this,["loadstart"]),this.activeRenderer.load(this.createMp4Metadata(e));else{var t=this.options,r=t.autoplay,n=t.preload;(r||"none"!==n)&&this.demuxer.load(e)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mimeType",{get:function(){return this.options.mimeType||""},set:function(e){this.options.mimeType=e,this.isForceNative&&(this.demuxer.suspend(),this.activeRenderer.destroy(),this.activeRenderer=this.createRendererInstance(Ou[0]))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rendererType",{get:function(){return this.options.rendererType},set:function(e){this.options.rendererType=e;var t=this.getRendererConfigByType();console.log("set rendererType options:",this.options),this.assignRendererType=null==t?void 0:t.Class.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"volume",{get:function(){return this.activeRenderer.volume},set:function(e){this.options.volume=e,this.activeRenderer.setVolume(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"poster",{get:function(){return this.options.poster||""},set:function(e){this.options.poster=e,this.activeRenderer.setPoster(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textureElement",{get:function(){return this.activeRenderer.textureElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"audioElement",{get:function(){return this.activeRenderer.audioElement},enumerable:!1,configurable:!0}),t.prototype.load=function(){var e=this._src;return this.reset(),this._src=e,this.isForceNative?(this.activeRenderer.load(this.createMp4Metadata(e)),Promise.resolve(!1)):this.demuxer.load(e)},t.prototype.play=function(){return(!this.isForceNative&&this._src&&!this.demuxer.url||this.live&&this.demuxer.status!==$n.LOADING)&&this.load(),this.activeRenderer.play()},t.prototype.pause=function(){return this.activeRenderer.pause()},t.prototype.toggle=function(){var e=this;return this.error?this.load().then((function(){return e.play()})):this.paused?this.play():this.pause()},t.prototype.reset=function(){this.error=null,this._src="",this.metadata=null,this.demuxer.load(""),this.activeRenderer.reset(),this.emit("update",void 0)},t.prototype.destroy=function(){this.reset(),this.demuxer.destroy(),this.activeRenderer.destroy(),this.removeAllListeners()},t}(rs),Cu=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Nu=function(e){function t(t){var r=e.call(this)||this;return r.name="@ali/splayer",r.version="0.7.4",r.container=t.container,r.controller=new xu(t),r.ui=new Kr({controller:r.controller,container:r.container}),t.controls&&r.ui.mount(),r.controller.proxy(r,Ru),Zr.reset(),r}return Cu(t,e),Object.defineProperty(t.prototype,"error",{get:function(){return this.controller.error},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"buffered",{get:function(){return this.controller.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"muted",{get:function(){return this.controller.muted},set:function(e){this.controller.muted=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"paused",{get:function(){return this.controller.paused},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playbackRate",{get:function(){return this.controller.playbackRate},set:function(e){this.controller.playbackRate=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"controls",{get:function(){return this.ui.mounted},set:function(e){e?this.ui.mount():this.ui.unmount()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"src",{get:function(){return this.controller.src},set:function(e){this.controller.src=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"volume",{get:function(){return this.controller.volume},set:function(e){this.controller.volume=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skipFrame",{get:function(){return this.controller.skipFrame},set:function(e){this.controller.skipFrame=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mimeType",{get:function(){return this.controller.mimeType},set:function(e){this.controller.mimeType=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"audioCodec",{get:function(){return this.controller.audioCodec},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"videoCodec",{get:function(){return this.controller.videoCodec},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"videoWidth",{get:function(){return this.controller.videoWidth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"videoHeight",{get:function(){return this.controller.videoHeight},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this.controller.duration},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentTime",{get:function(){return this.controller.currentTime},set:function(e){this.controller.currentTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoplay",{get:function(){return this.controller.autoplay},set:function(e){this.controller.autoplay=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"preload",{get:function(){return this.controller.preload},set:function(e){this.controller.preload=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"poster",{get:function(){return this.controller.poster},set:function(e){this.controller.poster=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textureElement",{get:function(){return this.controller.textureElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"audioElement",{get:function(){return this.controller.audioElement},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(e){Zr.setLevel(e)},t.prototype.setLogPrintLevel=function(e){Zr.setPrintLevel(e)},t.prototype.getLogs=function(){return Zr.getLogs()},t.prototype.load=function(){return this.controller.load()},t.prototype.play=function(){return this.controller.play()},t.prototype.pause=function(){return this.controller.pause()},t.prototype.destroy=function(){Zr.reset(),this.ui.destroy(),this.controller.destroy(),this.removeAllListeners()},t.prototype.removeEventListener=function(e,t){this.off(e,t)},t.prototype.addEventListener=function(e,t){this._on(e,t)},t.prototype.dispatchEvent=function(e,t){return this.emit(e.type,t)},t.ErrorCode=Object.assign({},It,En),t.ProbeManager=Ws,t.LogLevel=Ur,t.DiscardType=bn,t}(rs);const Lu=Nu})(),window.Videox=n})();